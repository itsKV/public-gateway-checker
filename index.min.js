(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.IpfsPublicGatewayChecker = factory()}(typeof self !== 'undefined' ? self : this, function () {
"use strict";var IpfsPublicGatewayChecker=(()=>{var vr=Object.create;var yn=Object.defineProperty;var br=Object.getOwnPropertyDescriptor;var Er=Object.getOwnPropertyNames;var kr=Object.getPrototypeOf,Sr=Object.prototype.hasOwnProperty;var wn=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Rr=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let c of Er(t))!Sr.call(e,c)&&c!==r&&yn(e,c,{get:()=>t[c],enumerable:!(i=br(t,c))||i.enumerable});return e};var Qt=(e,t,r)=>(r=e!=null?vr(kr(e)):{},Rr(t||!e||!e.__esModule?yn(r,"default",{value:e,enumerable:!0}):r,e));var Zt=wn((Gt,Bi)=>{(function(e){"use strict";function t(r){var i=r&&r.Promise||e.Promise,c=r&&r.XMLHttpRequest||e.XMLHttpRequest;return function(){var p=Object.create(e,{fetch:{value:void 0,writable:!0}});return function(I,f){typeof Gt=="object"&&typeof Bi<"u"?f(Gt):typeof define=="function"&&define.amd?define(["exports"],f):f(I.WHATWGFetch={})}(this,function(I){"use strict";var f=typeof p<"u"&&p||typeof self<"u"&&self||typeof f<"u"&&f,v={searchParams:"URLSearchParams"in f,iterable:"Symbol"in f&&"iterator"in Symbol,blob:"FileReader"in f&&"Blob"in f&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in f,arrayBuffer:"ArrayBuffer"in f};function D(d){return d&&DataView.prototype.isPrototypeOf(d)}if(v.arrayBuffer)var w=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],B=ArrayBuffer.isView||function(d){return d&&w.indexOf(Object.prototype.toString.call(d))>-1};function T(d){if(typeof d!="string"&&(d=String(d)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(d)||d==="")throw new TypeError("Invalid character in header field name");return d.toLowerCase()}function M(d){return typeof d!="string"&&(d=String(d)),d}function S(d){var k={next:function(){var G=d.shift();return{done:G===void 0,value:G}}};return v.iterable&&(k[Symbol.iterator]=function(){return k}),k}function b(d){this.map={},d instanceof b?d.forEach(function(k,G){this.append(G,k)},this):Array.isArray(d)?d.forEach(function(k){this.append(k[0],k[1])},this):d&&Object.getOwnPropertyNames(d).forEach(function(k){this.append(k,d[k])},this)}b.prototype.append=function(d,k){d=T(d),k=M(k);var G=this.map[d];this.map[d]=G?G+", "+k:k},b.prototype.delete=function(d){delete this.map[T(d)]},b.prototype.get=function(d){return d=T(d),this.has(d)?this.map[d]:null},b.prototype.has=function(d){return this.map.hasOwnProperty(T(d))},b.prototype.set=function(d,k){this.map[T(d)]=M(k)},b.prototype.forEach=function(d,k){for(var G in this.map)this.map.hasOwnProperty(G)&&d.call(k,this.map[G],G,this)},b.prototype.keys=function(){var d=[];return this.forEach(function(k,G){d.push(G)}),S(d)},b.prototype.values=function(){var d=[];return this.forEach(function(k){d.push(k)}),S(d)},b.prototype.entries=function(){var d=[];return this.forEach(function(k,G){d.push([G,k])}),S(d)},v.iterable&&(b.prototype[Symbol.iterator]=b.prototype.entries);function F(d){if(d.bodyUsed)return i.reject(new TypeError("Already read"));d.bodyUsed=!0}function K(d){return new i(function(k,G){d.onload=function(){k(d.result)},d.onerror=function(){G(d.error)}})}function j(d){var k=new FileReader,G=K(k);return k.readAsArrayBuffer(d),G}function X(d){var k=new FileReader,G=K(k);return k.readAsText(d),G}function z(d){for(var k=new Uint8Array(d),G=new Array(k.length),ee=0;ee<k.length;ee++)G[ee]=String.fromCharCode(k[ee]);return G.join("")}function ie(d){if(d.slice)return d.slice(0);var k=new Uint8Array(d.byteLength);return k.set(new Uint8Array(d)),k.buffer}function V(){return this.bodyUsed=!1,this._initBody=function(d){this.bodyUsed=this.bodyUsed,this._bodyInit=d,d?typeof d=="string"?this._bodyText=d:v.blob&&Blob.prototype.isPrototypeOf(d)?this._bodyBlob=d:v.formData&&FormData.prototype.isPrototypeOf(d)?this._bodyFormData=d:v.searchParams&&URLSearchParams.prototype.isPrototypeOf(d)?this._bodyText=d.toString():v.arrayBuffer&&v.blob&&D(d)?(this._bodyArrayBuffer=ie(d.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):v.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(d)||B(d))?this._bodyArrayBuffer=ie(d):this._bodyText=d=Object.prototype.toString.call(d):this._bodyText="",this.headers.get("content-type")||(typeof d=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):v.searchParams&&URLSearchParams.prototype.isPrototypeOf(d)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},v.blob&&(this.blob=function(){var d=F(this);if(d)return d;if(this._bodyBlob)return i.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return i.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return i.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var d=F(this);return d||(ArrayBuffer.isView(this._bodyArrayBuffer)?i.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):i.resolve(this._bodyArrayBuffer))}else return this.blob().then(j)}),this.text=function(){var d=F(this);if(d)return d;if(this._bodyBlob)return X(this._bodyBlob);if(this._bodyArrayBuffer)return i.resolve(z(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return i.resolve(this._bodyText)},v.formData&&(this.formData=function(){return this.text().then(xe)}),this.json=function(){return this.text().then(JSON.parse)},this}var Se=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function A(d){var k=d.toUpperCase();return Se.indexOf(k)>-1?k:d}function le(d,k){if(!(this instanceof le))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');k=k||{};var G=k.body;if(d instanceof le){if(d.bodyUsed)throw new TypeError("Already read");this.url=d.url,this.credentials=d.credentials,k.headers||(this.headers=new b(d.headers)),this.method=d.method,this.mode=d.mode,this.signal=d.signal,!G&&d._bodyInit!=null&&(G=d._bodyInit,d.bodyUsed=!0)}else this.url=String(d);if(this.credentials=k.credentials||this.credentials||"same-origin",(k.headers||!this.headers)&&(this.headers=new b(k.headers)),this.method=A(k.method||this.method||"GET"),this.mode=k.mode||this.mode||null,this.signal=k.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&G)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(G),(this.method==="GET"||this.method==="HEAD")&&(k.cache==="no-store"||k.cache==="no-cache")){var ee=/([?&])_=[^&]*/;if(ee.test(this.url))this.url=this.url.replace(ee,"$1_="+new Date().getTime());else{var te=/\?/;this.url+=(te.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}le.prototype.clone=function(){return new le(this,{body:this._bodyInit})};function xe(d){var k=new FormData;return d.trim().split("&").forEach(function(G){if(G){var ee=G.split("="),te=ee.shift().replace(/\+/g," "),q=ee.join("=").replace(/\+/g," ");k.append(decodeURIComponent(te),decodeURIComponent(q))}}),k}function $e(d){var k=new b,G=d.replace(/\r?\n[\t ]+/g," ");return G.split("\r").map(function(ee){return ee.indexOf(`
`)===0?ee.substr(1,ee.length):ee}).forEach(function(ee){var te=ee.split(":"),q=te.shift().trim();if(q){var ue=te.join(":").trim();k.append(q,ue)}}),k}V.call(le.prototype);function fe(d,k){if(!(this instanceof fe))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');k||(k={}),this.type="default",this.status=k.status===void 0?200:k.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in k?k.statusText:"",this.headers=new b(k.headers),this.url=k.url||"",this._initBody(d)}V.call(fe.prototype),fe.prototype.clone=function(){return new fe(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new b(this.headers),url:this.url})},fe.error=function(){var d=new fe(null,{status:0,statusText:""});return d.type="error",d};var je=[301,302,303,307,308];fe.redirect=function(d,k){if(je.indexOf(k)===-1)throw new RangeError("Invalid status code");return new fe(null,{status:k,headers:{location:d}})},I.DOMException=f.DOMException;try{new I.DOMException}catch{I.DOMException=function(k,G){this.message=k,this.name=G;var ee=Error(k);this.stack=ee.stack},I.DOMException.prototype=Object.create(Error.prototype),I.DOMException.prototype.constructor=I.DOMException}function Oe(d,k){return new i(function(G,ee){var te=new le(d,k);if(te.signal&&te.signal.aborted)return ee(new I.DOMException("Aborted","AbortError"));var q=new c;function ue(){q.abort()}q.onload=function(){var g={status:q.status,statusText:q.statusText,headers:$e(q.getAllResponseHeaders()||"")};g.url="responseURL"in q?q.responseURL:g.headers.get("X-Request-URL");var h="response"in q?q.response:q.responseText;setTimeout(function(){G(new fe(h,g))},0)},q.onerror=function(){setTimeout(function(){ee(new TypeError("Network request failed"))},0)},q.ontimeout=function(){setTimeout(function(){ee(new TypeError("Network request failed"))},0)},q.onabort=function(){setTimeout(function(){ee(new I.DOMException("Aborted","AbortError"))},0)};function ye(g){try{return g===""&&f.location.href?f.location.href:g}catch{return g}}q.open(te.method,ye(te.url),!0),te.credentials==="include"?q.withCredentials=!0:te.credentials==="omit"&&(q.withCredentials=!1),"responseType"in q&&(v.blob?q.responseType="blob":v.arrayBuffer&&te.headers.get("Content-Type")&&te.headers.get("Content-Type").indexOf("application/octet-stream")!==-1&&(q.responseType="arraybuffer")),k&&typeof k.headers=="object"&&!(k.headers instanceof b)?Object.getOwnPropertyNames(k.headers).forEach(function(g){q.setRequestHeader(g,M(k.headers[g]))}):te.headers.forEach(function(g,h){q.setRequestHeader(h,g)}),te.signal&&(te.signal.addEventListener("abort",ue),q.onreadystatechange=function(){q.readyState===4&&te.signal.removeEventListener("abort",ue)}),q.send(typeof te._bodyInit>"u"?null:te._bodyInit)})}Oe.polyfill=!0,f.fetch||(f.fetch=Oe,f.Headers=b,f.Request=le,f.Response=fe),I.Headers=b,I.Request=le,I.Response=fe,I.fetch=Oe,Object.defineProperty(I,"__esModule",{value:!0})}),{fetch:p.fetch,Headers:p.Headers,Request:p.Request,Response:p.Response,DOMException:p.DOMException}}()}typeof define=="function"&&define.amd?define(function(){return t}):typeof Gt=="object"?Bi.exports=t:e.fetchPonyfill=t})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof globalThis<"u"?globalThis:Gt)});var Xn=wn((Yn,Ei)=>{(function(e,t){typeof define=="function"&&define.amd?define([],function(){return t(e.Countly)}):typeof Ei=="object"&&Ei.exports?Ei.exports=t(e.Countly):e.Countly=t(e.Countly)})(typeof window<"u"?window:Yn,function(e){if(typeof window>"u")return;e=e||{};var t={SESSIONS:"sessions",EVENTS:"events",VIEWS:"views",SCROLLS:"scrolls",CLICKS:"clicks",FORMS:"forms",CRASHES:"crashes",ATTRIBUTION:"attribution",USERS:"users",STAR_RATING:"star-rating",LOCATION:"location",APM:"apm",FEEDBACK:"feedback",REMOTE_CONFIG:"remote-config"};e.features=[t.SESSIONS,t.EVENTS,t.VIEWS,t.SCROLLS,t.CLICKS,t.FORMS,t.CRASHES,t.ATTRIBUTION,t.USERS,t.STAR_RATING,t.LOCATION,t.APM,t.FEEDBACK,t.REMOTE_CONFIG];var r={NPS:"[CLY]_nps",SURVEY:"[CLY]_survey",STAR_RATING:"[CLY]_star_rating",VIEW:"[CLY]_view",ORIENTATION:"[CLY]_orientation",PUSH_ACTION:"[CLY]_push_action",ACTION:"[CLY]_action"},i={ERROR:"[ERROR] ",WARNING:"[WARNING] ",INFO:"[INFO] ",DEBUG:"[DEBUG] ",VERBOSE:"[VERBOSE] "},c={DEVELOPER_SUPPLIED:0,SDK_GENERATED:1,TEMPORARY_ID:2,URL_PROVIDED:3},p={BEAT_INTERVAL:500,QUEUE_SIZE:1e3,FAIL_TIMEOUT_AMOUNT:60,INACTIVITY_TIME:20,SESSION_UPDATE:60,MAX_EVENT_BATCH:100,SESSION_COOKIE_TIMEOUT:30,MAX_KEY_LENGTH:128,MAX_VALUE_SIZE:256,MAX_SEGMENTATION_VALUES:30,MAX_BREADCRUMB_COUNT:100,MAX_STACKTRACE_LINES_PER_THREAD:30,MAX_STACKTRACE_LINE_LENGTH:200};e.q=e.q||[],e.onload=e.onload||[];var I="22.06.4",f="javascript_native_web",v=/^(((([^:\/#\?]+:)?(?:(\/\/)((?:(([^:@\/#\?]+)(?:\:([^:@\/#\?]+))?)@)?(([^:\/#\?\]\[]+|\[[^\/\]@#?]+\])(?:\:([0-9]+))?))?)?)?((\/?(?:[^\/\?#]+\/+)*)([^\?#]*)))?(\?[^#]+)?)(#.*)?/,D=function(g){var h=this,Y=!e.i,Q=!1,_e="/i",Ie="/o/sdk",Te=b("interval",g,p.BEAT_INTERVAL),Me=b("queue_size",g,p.QUEUE_SIZE),ge=[],be=[],Ee={},Ue=[],Je={},Ve=b("ignore_referrers",g,[]),mt=null,yt=!0,ot,Ot=0,Ce=null,De=0,st=0,Pt=0,Fe=b("fail_timeout",g,p.FAIL_TIMEOUT_AMOUNT),wt=b("inactivity_time",g,p.INACTIVITY_TIME),n=0,s=b("session_update",g,p.SESSION_UPDATE),a=b("max_events",g,p.MAX_EVENT_BATCH),m=b("max_logs",g,null),E=b("use_session_cookie",g,!0),N=b("session_cookie_timeout",g,p.SESSION_COOKIE_TIMEOUT),P=!0,he=!1,re=b("offline_mode",g,!1),se={},ae=!0,ke=T(),_t=!0,xt=null,Ae=c.SDK_GENERATED,Mt=!1,Ft=0;try{localStorage.setItem("cly_testLocal",!0),localStorage.removeItem("cly_testLocal")}catch(o){l(i.ERROR,"Local storage test failed, Halting local storage support: "+o),_t=!1}for(var ve={},Ri=0;Ri<e.features.length;Ri++)ve[e.features[Ri]]={};this.initialize=function(){if(this.serialize=b("serialize",g,e.serialize),this.deserialize=b("deserialize",g,e.deserialize),this.getViewName=b("getViewName",g,e.getViewName),this.getViewUrl=b("getViewUrl",g,e.getViewUrl),this.getSearchQuery=b("getSearchQuery",g,e.getSearchQuery),this.DeviceIdType=e.DeviceIdType,this.namespace=b("namespace",g,""),this.clearStoredId=b("clear_stored_id",g,!1),this.app_key=b("app_key",g,null),this.onload=b("onload",g,[]),this.utm=b("utm",g,{source:!0,medium:!0,campaign:!0,term:!0,content:!0}),this.ignore_prefetch=b("ignore_prefetch",g,!0),this.rcAutoOptinAb=b("rc_automatic_optin_for_ab",g,!0),this.useExplicitRcApi=b("use_explicit_rc_api",g,!1),this.debug=b("debug",g,!1),this.test_mode=b("test_mode",g,!1),this.metrics=b("metrics",g,{}),this.headers=b("headers",g,{}),this.url=j(b("url",g,"")),this.app_version=b("app_version",g,"0.0"),this.country_code=b("country_code",g,null),this.city=b("city",g,null),this.ip_address=b("ip_address",g,null),this.ignore_bots=b("ignore_bots",g,!0),this.force_post=b("force_post",g,!1),this.remote_config=b("remote_config",g,!1),this.ignore_visitor=b("ignore_visitor",g,!1),this.require_consent=b("require_consent",g,!1),this.track_domains=b("track_domains",g,!0),this.storage=b("storage",g,"default"),this.enableOrientationTracking=b("enable_orientation_tracking",g,!0),this.maxKeyLength=b("max_key_length",g,p.MAX_KEY_LENGTH),this.maxValueSize=b("max_value_size",g,p.MAX_VALUE_SIZE),this.maxSegmentationValues=b("max_segmentation_values",g,p.MAX_SEGMENTATION_VALUES),this.maxBreadcrumbCount=b("max_breadcrumb_count",g,null),this.maxStackTraceLinesPerThread=b("max_stack_trace_lines_per_thread",g,p.MAX_STACKTRACE_LINES_PER_THREAD),this.maxStackTraceLineLength=b("max_stack_trace_line_length",g,p.MAX_STACKTRACE_LINE_LENGTH),this.heatmapWhitelist=b("heatmap_whitelist",g,[]),m&&!this.maxBreadcrumbCount?(this.maxBreadcrumbCount=m,l(i.WARNING,"initialize, 'maxCrashLogs' is deprecated. Use 'maxBreadcrumbCount' instead!")):!m&&!this.maxBreadcrumbCount&&(this.maxBreadcrumbCount=100),this.storage==="cookie"&&(_t=!1),!this.rcAutoOptinAb&&!this.useExplicitRcApi&&(l(i.WARNING,"initialize, Auto opting is disabled, switching to explicit RC API"),this.useExplicitRcApi=!0),Array.isArray(Ve)||(Ve=[]),this.url===""&&(l(i.ERROR,"initialize, Please provide server URL"),this.ignore_visitor=!0),de("cly_ignore")&&(this.ignore_visitor=!0),wr(),this.clearStoredId&&(l(i.INFO,"initialize, Clearing the device ID storage"),localStorage.removeItem(this.app_key+"/cly_id"),localStorage.removeItem(this.app_key+"/cly_id_type")),ge=de("cly_queue")||[],be=de("cly_event")||[],Ee=de("cly_remote_configs")||{},fn(),window.name&&window.name.indexOf("cly:")===0)try{this.passed_data=JSON.parse(window.name.replace("cly:",""))}catch(me){l(i.ERROR,"initialize, Could not parse name: "+window.name+", error: "+me)}else if(location.hash&&location.hash.indexOf("#cly:")===0)try{this.passed_data=JSON.parse(location.hash.replace("#cly:",""))}catch(me){l(i.ERROR,"initialize, Could not parse hash: "+location.hash+", error: "+me)}if((this.passed_data&&this.passed_data.app_key&&this.passed_data.app_key===this.app_key||this.passed_data&&!this.passed_data.app_key&&Y)&&this.passed_data.token&&this.passed_data.purpose){this.passed_data.token!==de("cly_old_token")&&(pn(this.passed_data.token),ne("cly_old_token",this.passed_data.token));var o=[];Array.isArray(this.heatmapWhitelist)?(this.heatmapWhitelist.push(this.url),o=this.heatmapWhitelist.map(function(me){return j(me)})):o=[this.url],o.includes(this.passed_data.url)&&this.passed_data.purpose==="heatmap"&&(this.ignore_visitor=!0,ue(),te(this.passed_data.url+"/views/heatmap.js",ye))}if(this.ignore_visitor){l(i.WARNING,"initialize, ignore_visitor:["+this.ignore_visitor+"], this user will not be tracked");return}l(i.DEBUG,"initialize, app_key:["+this.app_key+"], url:["+this.url+"]"),l(i.DEBUG,"initialize, device_id:["+b("device_id",g,void 0)+"]"),l(i.DEBUG,"initialize, require_consent is enabled:["+this.require_consent+"]");try{l(i.DEBUG,"initialize, metric override:["+JSON.stringify(this.metrics)+"]"),l(i.DEBUG,"initialize, header override:["+JSON.stringify(this.headers)+"]"),l(i.DEBUG,"initialize, number of onload callbacks provided:["+this.onload.length+"]"),l(i.DEBUG,"initialize, utm tags:["+JSON.stringify(this.utm)+"]"),Ve&&l(i.DEBUG,"initialize, referrers to ignore :["+JSON.stringify(Ve)+"]")}catch{l(i.ERROR,"initialize, Could not stringify some config object values")}l(i.DEBUG,"initialize, app_version:["+this.app_version+"]"),l(i.DEBUG,"initialize, provided location info; country_code:["+this.country_code+"], city:["+this.city+"], ip_address:["+this.ip_address+"]"),this.namespace!==""&&l(i.DEBUG,"initialize, namespace given:["+this.namespace+"]"),this.clearStoredId&&l(i.DEBUG,"initialize, clearStoredId flag set to:["+this.clearStoredId+"]"),this.ignore_prefetch&&l(i.DEBUG,"initialize, ignoring pre-fetching and pre-rendering from counting as real website visits :["+this.ignore_prefetch+"]"),this.test_mode&&l(i.WARNING,"initialize, test_mode:["+this.test_mode+"], queues won't be processed"),this.heatmapWhitelist&&l(i.DEBUG,"initialize, heatmap whitelist:["+JSON.stringify(this.heatmapWhitelist)+"], these domains will be whitelisted"),this.storage!=="default"&&l(i.DEBUG,"initialize, storage is set to:["+this.storage+"]"),this.ignore_bots&&l(i.DEBUG,"initialize, ignore traffic from bots :["+this.ignore_bots+"]"),this.force_post&&l(i.DEBUG,"initialize, forced post method for all requests:["+this.force_post+"]"),this.remote_config&&l(i.DEBUG,"initialize, remote_config callback provided:["+!!this.remote_config+"]"),typeof this.rcAutoOptinAb=="boolean"&&l(i.DEBUG,"initialize, automatic RC optin is enabled:["+this.rcAutoOptinAb+"]"),this.useExplicitRcApi||l(i.WARNING,"initialize, will use legacy RC API. Consider enabling new API during init with use_explicit_rc_api flag"),this.track_domains&&l(i.DEBUG,"initialize, tracking domain info:["+this.track_domains+"]"),this.enableOrientationTracking&&l(i.DEBUG,"initialize, enableOrientationTracking:["+this.enableOrientationTracking+"]"),E||l(i.WARNING,"initialize, use_session_cookie is enabled:["+E+"]"),re&&l(i.DEBUG,"initialize, offline_mode:["+re+"], user info won't be send to the servers"),re&&l(i.DEBUG,"initialize, stored remote configs:["+JSON.stringify(Ee)+"]"),l(i.DEBUG,"initialize, 'getViewName' callback override provided:["+!!this.getViewName+"]"),l(i.DEBUG,"initialize, 'getSearchQuery' callback override provided:["+!!this.getSearchQuery+"]"),this.maxKeyLength!==p.MAX_KEY_LENGTH&&l(i.DEBUG,"initialize, maxKeyLength set to:["+this.maxKeyLength+"] characters"),this.maxValueSize!==p.MAX_VALUE_SIZE&&l(i.DEBUG,"initialize, maxValueSize set to:["+this.maxValueSize+"] characters"),this.maxSegmentationValues!==p.MAX_SEGMENTATION_VALUES&&l(i.DEBUG,"initialize, maxSegmentationValues set to:["+this.maxSegmentationValues+"] key/value pairs"),this.maxBreadcrumbCount!==p.MAX_BREADCRUMB_COUNT&&l(i.DEBUG,"initialize, maxBreadcrumbCount for custom logs set to:["+this.maxBreadcrumbCount+"] entries"),this.maxStackTraceLinesPerThread!==p.MAX_STACKTRACE_LINES_PER_THREAD&&l(i.DEBUG,"initialize, maxStackTraceLinesPerThread set to:["+this.maxStackTraceLinesPerThread+"] lines"),this.maxStackTraceLineLength!==p.MAX_STACKTRACE_LINE_LENGTH&&l(i.DEBUG,"initialize, maxStackTraceLineLength set to:["+this.maxStackTraceLineLength+"] characters"),Te!==p.BEAT_INTERVAL&&l(i.DEBUG,"initialize, interval for heartbeats set to:["+Te+"] milliseconds"),Me!==p.QUEUE_SIZE&&l(i.DEBUG,"initialize, queue_size set to:["+Me+"] items max"),Fe!==p.FAIL_TIMEOUT_AMOUNT&&l(i.DEBUG,"initialize, fail_timeout set to:["+Fe+"] seconds of wait time after a failed connection to server"),wt!==p.INACTIVITY_TIME&&l(i.DEBUG,"initialize, inactivity_time set to:["+wt+"] minutes to consider a user as inactive after no observable action"),s!==p.SESSION_UPDATE&&l(i.DEBUG,"initialize, session_update set to:["+s+"] seconds to check if extending a session is needed while the user is active"),a!==p.MAX_EVENT_BATCH&&l(i.DEBUG,"initialize, max_events set to:["+a+"] events to send in one batch"),m&&l(i.WARNING,"initialize, max_logs set to:["+m+"] breadcrumbs to store for crash logs max, deprecated "),N!==p.SESSION_COOKIE_TIMEOUT&&l(i.DEBUG,"initialize, session_cookie_timeout set to:["+N+"] minutes to expire a cookies session"),l(i.INFO,"initialize, Countly initialized");var u=null,y=h.getSearchQuery(),x=!1,C={};if(y)for(var O=y.substring(1).split("&"),L=0;L<O.length;L++){var R=O[L].split("=");R[0]==="cly_id"?ne("cly_cmp_id",R[1]):R[0]==="cly_uid"?ne("cly_cmp_uid",R[1]):R[0]==="cly_device_id"?u=R[1]:(R[0]+"").indexOf("utm_")===0&&this.utm[R[0].replace("utm_","")]&&(C[R[0].replace("utm_","")]=R[1],x=!0)}var H=de("cly_id")==="[CLY]_temp_id",W=b("device_id",g,void 0);if(de("cly_id")&&!H?(this.device_id=de("cly_id"),l(i.INFO,"initialize, Set the stored device ID"),Ae=de("cly_id_type"),Ae||(l(i.INFO,"initialize, No device ID type info from the previous session, falling back to DEVELOPER_SUPPLIED"),Ae=c.DEVELOPER_SUPPLIED)):u!==null?(l(i.INFO,"initialize, Device ID set by URL"),this.device_id=u,Ae=c.URL_PROVIDED):W?(l(i.INFO,"initialize, Device ID set by developer"),this.device_id=W,g&&Object.keys(g).length?g.device_id!==void 0&&(Ae=c.DEVELOPER_SUPPLIED):e.device_id!==void 0&&(Ae=c.DEVELOPER_SUPPLIED)):re||H?(this.device_id="[CLY]_temp_id",Ae=c.TEMPORARY_ID,re&&H?l(i.INFO,"initialize, Temp ID set, continuing offline mode from previous app session"):re&&!H?l(i.INFO,"initialize, Temp ID set, entering offline mode"):(re=!0,l(i.INFO,"initialize, Temp ID set, enabling offline mode"))):(l(i.INFO,"initialize, Generating the device ID"),this.device_id=b("device_id",g,Ti()),g&&Object.keys(g).length?g.device_id!==void 0&&(Ae=c.DEVELOPER_SUPPLIED):e.device_id!==void 0&&(Ae=c.DEVELOPER_SUPPLIED)),ne("cly_id",this.device_id),ne("cly_id_type",Ae),x){for(var Z in this.utm)C[Z]?this.userData.set("utm_"+Z,C[Z]):this.userData.unset("utm_"+Z);this.userData.save()}cn(),setTimeout(function(){Jt(),h.remote_config&&h.fetch_remote_config(h.remote_config)},1),document.documentElement.setAttribute("data-countly-useragent",xe())},this.halt=function(){l(i.WARNING,"halt, Resetting Countly"),e.i=void 0,Y=!e.i,Q=!1,_e="/i",Ie="/o/sdk",Te=500,Me=1e3,ge=[],be=[],Ee={},Ue=[],Je={},Ve=[],mt=null,yt=!0,Ot=0,Ce=null,De=0,st=0,Pt=0,Fe=60,wt=20,n=0,s=60,a=100,m=null,E=!0,N=30,P=!0,he=!1,re=!1,se={},ae=!0,ke=T(),_t=!0,xt=null,Ae=c.SDK_GENERATED,Mt=!1,Ft=0;try{localStorage.setItem("cly_testLocal",!0),localStorage.removeItem("cly_testLocal")}catch{l(i.ERROR,"halt, Local storage test failed, will fallback to cookies"),_t=!1}e.features=[t.SESSIONS,t.EVENTS,t.VIEWS,t.SCROLLS,t.CLICKS,t.FORMS,t.CRASHES,t.ATTRIBUTION,t.USERS,t.STAR_RATING,t.LOCATION,t.APM,t.FEEDBACK,t.REMOTE_CONFIG],ve={};for(var o=0;o<e.features.length;o++)ve[e.features[o]]={};h.app_key=void 0,h.device_id=void 0,h.onload=void 0,h.utm=void 0,h.ignore_prefetch=void 0,h.debug=void 0,h.test_mode=void 0,h.metrics=void 0,h.headers=void 0,h.url=void 0,h.app_version=void 0,h.country_code=void 0,h.city=void 0,h.ip_address=void 0,h.ignore_bots=void 0,h.force_post=void 0,h.rcAutoOptinAb=void 0,h.useExplicitRcApi=void 0,h.remote_config=void 0,h.ignore_visitor=void 0,h.require_consent=void 0,h.track_domains=void 0,h.storage=void 0,h.enableOrientationTracking=void 0,h.maxKeyLength=void 0,h.maxValueSize=void 0,h.maxSegmentationValues=void 0,h.maxBreadcrumbCount=void 0,h.maxStackTraceLinesPerThread=void 0,h.maxStackTraceLineLength=void 0},this.group_features=function(o){if(l(i.INFO,"group_features, Grouping features"),o)for(var u in o)ve[u]?l(i.WARNING,"group_features, Feature name ["+u+"] is already reserved"):typeof o[u]=="string"?ve[u]={features:[o[u]]}:o[u]&&Array.isArray(o[u])&&o[u].length?ve[u]={features:o[u]}:l(i.ERROR,"group_features, Incorrect feature list for ["+u+"] value: ["+o[u]+"]");else l(i.ERROR,"group_features, Incorrect features:["+o+"]")},this.check_consent=function(o){return l(i.INFO,"check_consent, Checking if consent is given for specific feature:["+o+"]"),this.require_consent?ve[o]?!!(ve[o]&&ve[o].optin):(l(i.ERROR,"check_consent, No feature available for ["+o+"]"),!1):(l(i.INFO,"check_consent, require_consent is off, no consent is necessary"),!0)},this.get_device_id_type=function(){l(i.INFO,"check_device_id_type, Retrieving the current device id type.["+Ae+"]");var o;switch(Ae){case c.SDK_GENERATED:o=h.DeviceIdType.SDK_GENERATED;break;case c.URL_PROVIDED:case c.DEVELOPER_SUPPLIED:o=h.DeviceIdType.DEVELOPER_SUPPLIED;break;case c.TEMPORARY_ID:o=h.DeviceIdType.TEMPORARY_ID;break;default:o=-1;break}return o},this.get_device_id=function(){return l(i.INFO,"get_device_id, Retrieving the device id: ["+this.device_id+"]"),this.device_id},this.check_any_consent=function(){if(l(i.INFO,"check_any_consent, Checking if any consent is given"),!this.require_consent)return l(i.INFO,"check_any_consent, require_consent is off, no consent is necessary"),!0;for(var o in ve)if(ve[o]&&ve[o].optin)return!0;return l(i.INFO,"check_any_consent, No consents given"),!1},this.add_consent=function(o){if(l(i.INFO,"add_consent, Adding consent for ["+o+"]"),Array.isArray(o))for(var u=0;u<o.length;u++)this.add_consent(o[u]);else ve[o]?ve[o].features?(ve[o].optin=!0,this.add_consent(ve[o].features)):ve[o].optin!==!0&&(ve[o].optin=!0,sn(),setTimeout(function(){o===t.SESSIONS&&se.begin_session?(h.begin_session.apply(h,se.begin_session),se.begin_session=null):o===t.VIEWS&&se.track_pageview&&(Ce=null,h.track_pageview.apply(h,se.track_pageview),se.track_pageview=null)},1)):l(i.ERROR,"add_consent, No feature available for ["+o+"]")},this.remove_consent=function(o){l(i.INFO,"remove_consent, Removing consent for ["+o+"]"),this.remove_consent_internal(o,!0)},this.remove_consent_internal=function(o,u){if(u=u||!1,Array.isArray(o))for(var y=0;y<o.length;y++)this.remove_consent_internal(o[y],u);else ve[o]?ve[o].features?this.remove_consent_internal(ve[o].features,u):(ve[o].optin=!1,u&&ve[o].optin!==!1&&sn()):l(i.ERROR,"remove_consent, No feature available for ["+o+"]")};var Kt,sn=function(){Kt&&(clearTimeout(Kt),Kt=null),Kt=setTimeout(function(){for(var o={},u=0;u<e.features.length;u++)ve[e.features[u]].optin===!0?o[e.features[u]]=!0:o[e.features[u]]=!1;Pe({consent:JSON.stringify(o)}),l(i.DEBUG,"Consent update request has been sent to the queue.")},1e3)};this.enable_offline_mode=function(){l(i.INFO,"enable_offline_mode, Enabling offline mode"),this.remove_consent_internal(e.features,!1),re=!0,this.device_id="[CLY]_temp_id",Ae=c.TEMPORARY_ID},this.disable_offline_mode=function(o){l(i.INFO,"disable_offline_mode, Disabling offline mode"),re=!1,o&&this.device_id!==o?(this.device_id=o,Ae=c.DEVELOPER_SUPPLIED,ne("cly_id",this.device_id),ne("cly_id_type",c.DEVELOPER_SUPPLIED),l(i.INFO,"disable_offline_mode, Changing id to: "+this.device_id)):(this.device_id=Ti(),this.device_id!==de("cly_id")&&(ne("cly_id",this.device_id),ne("cly_id_type",c.SDK_GENERATED)));var u=!1;if(ge.length>0)for(var y=0;y<ge.length;y++)ge[y].device_id==="[CLY]_temp_id"&&(ge[y].device_id=this.device_id,u=!0);u&&ne("cly_queue",ge,!0)},this.begin_session=function(o,u){if(l(i.INFO,"begin_session, Starting the session"),o&&l(i.INFO,"begin_session, Heartbeats are disabled"),u&&l(i.INFO,"begin_session, Session starts irrespective of session cookie"),this.check_consent(t.SESSIONS)){if(!Q){this.enableOrientationTracking&&(this.report_orientation(),A(window,"resize",function(){h.report_orientation()})),ot=T(),Q=!0,yt=!o;var y=de("cly_session");if(u||!E||!y||parseInt(y)<=T()){l(i.INFO,"begin_session, Session started"),xt===null&&(xt=!0);var x={};x.begin_session=1,x.metrics=JSON.stringify(Yt()),Pe(x)}ne("cly_session",T()+N*60)}}else se.begin_session=arguments},this.session_duration=function(o){l(i.INFO,"session_duration, Reporting session duration"),this.check_consent(t.SESSIONS)&&Q&&(l(i.INFO,"session_duration, Session extended: ",o),Pe({session_duration:o}),ln())},this.end_session=function(o,u){l(i.INFO,"end_session, Ending the current session"),this.check_consent(t.SESSIONS)&&Q&&(o=o||T()-ot,Oi(),!E||u?(l(i.INFO,"end_session, Session ended"),Pe({end_session:1,session_duration:o})):this.session_duration(o),Q=!1)},this.change_id=function(o,u){if(l(i.INFO,"change_id, Changing the ID"),u&&l(i.INFO,"change_id, Will merge the IDs"),!o||typeof o!="string"||o.length===0){l(i.ERROR,"change_id, The provided ID: ["+o+"] is not a valid ID");return}if(re){l(i.WARNING,"change_id, Offline mode was on, initiating disabling sequence instead."),this.disable_offline_mode(o);return}if(this.device_id!==o){u||(Ii(),this.end_session(null,!0),Je={},this.remove_consent_internal(e.features,!1));var y=this.device_id;this.device_id=o,Ae=c.DEVELOPER_SUPPLIED,ne("cly_id",this.device_id),ne("cly_id_type",c.DEVELOPER_SUPPLIED),l(i.INFO,"change_id, Changing ID from:["+y+"] to ["+o+"]"),u?Pe({old_device_id:y}):this.begin_session(!yt,!0),this.remote_config&&(Ee={},ne("cly_remote_configs",Ee),this.fetch_remote_config(this.remote_config))}},this.add_event=function(o){l(i.INFO,"add_event, Adding event: ",o);var u=!1;switch(o.key){case r.NPS:u=this.check_consent("feedback");break;case r.SURVEY:u=this.check_consent("feedback");break;case r.STAR_RATING:u=this.check_consent("star-rating");break;case r.VIEW:u=this.check_consent("views");break;case r.ORIENTATION:u=this.check_consent("users");break;case r.PUSH_ACTION:u=this.check_consent("push");break;case r.ACTION:u=this.check_consent("clicks")||this.check_consent("scroll");break;default:u=this.check_consent("events")}u&&Ye(o)};function Ye(o){if(h.ignore_visitor){l(i.ERROR,"Adding event failed. Possible bot or user opt out");return}if(!o.key){l(i.ERROR,"Adding event failed. Event must have a key property");return}o.count||(o.count=1),o.key=V(o.key,h.maxKeyLength,"add_cly_event",l),o.segmentation=ie(o.segmentation,h.maxKeyLength,h.maxValueSize,h.maxSegmentationValues,"add_cly_event",l);var u=["key","count","sum","dur","segmentation"],y=X(o,u);y.timestamp=S();var x=new Date;y.hour=x.getHours(),y.dow=x.getDay(),be.push(y),ne("cly_event",be),l(i.INFO,"Successfully adding event: ",o)}this.start_event=function(o){if(l(i.INFO,"start_event, Starting timed event with key: ["+o+"]"),o=V(o,h.maxKeyLength,"start_event",l),Je[o]){l(i.WARNING,"start_event, Timed event with key ["+o+"] already started");return}Je[o]=T()},this.end_event=function(o){if(l(i.INFO,"end_event, Ending timed event"),typeof o=="string"&&(o={key:o}),!o.key){l(i.ERROR,"end_event, Timed event must have a key property");return}if(!Je[o.key]){l(i.ERROR,"end_event, Timed event with key ["+o.key+"] was not started");return}o.dur=T()-Je[o.key],this.add_event(o),delete Je[o.key]},this.report_orientation=function(o){l(i.INFO,"report_orientation, Reporting orientation"),this.check_consent(t.USERS)&&Ye({key:r.ORIENTATION,segmentation:{mode:o||G()}})},this.report_conversion=function(o,u){l(i.WARNING,"report_conversion, Deprecated function call! Use 'recordDirectAttribution' in place of this call. Call will be redirected now!"),this.recordDirectAttribution(o,u)},this.recordDirectAttribution=function(o,u){l(i.INFO,"recordDirectAttribution, Recording the attribution for campaign ID: ["+o+"] and the user ID: ["+u+"]"),this.check_consent(t.ATTRIBUTION)&&(o=o||de("cly_cmp_id")||"cly_organic",u=u||de("cly_cmp_uid"),Pe(u?{campaign_id:o,campaign_user:u}:{campaign_id:o}))},this.user_details=function(o){if(l(i.INFO,"user_details, Trying to add user details: ",o),this.check_consent(t.USERS)){o.name=V(o.name,h.maxValueSize,"user_details",l),o.username=V(o.username,h.maxValueSize,"user_details",l),o.email=V(o.email,h.maxValueSize,"user_details",l),o.organization=V(o.organization,h.maxValueSize,"user_details",l),o.phone=V(o.phone,h.maxValueSize,"user_details",l),o.picture=V(o.picture,4096,"user_details",l),o.gender=V(o.gender,h.maxValueSize,"user_details",l),o.byear=V(o.byear,h.maxValueSize,"user_details",l),o.custom=ie(o.custom,h.maxKeyLength,h.maxValueSize,h.maxSegmentationValues,"user_details",l);var u=["name","username","email","organization","phone","picture","gender","byear","custom"];Pe({user_details:JSON.stringify(X(o,u))})}};var tt={},at=function(o,u,y){h.check_consent(t.USERS)&&(tt[o]||(tt[o]={}),y==="$push"||y==="$pull"||y==="$addToSet"?(tt[o][y]||(tt[o][y]=[]),tt[o][y].push(u)):tt[o][y]=u)};this.userData={set:function(o,u){l(i.INFO,"set, Setting user's custom property value: ["+u+"] under the key: ["+o+"]"),o=V(o,h.maxKeyLength,"userData set",l),u=V(u,h.maxValueSize,"userData set",l),tt[o]=u},unset:function(o){l(i.INFO,"unset, Resetting user's custom property with key: ["+o+"] "),tt[o]=""},set_once:function(o,u){l(i.INFO,"set_once, Setting user's unique custom property value: ["+u+"] under the key: ["+o+"] "),o=V(o,h.maxKeyLength,"userData set_once",l),u=V(u,h.maxValueSize,"userData set_once",l),at(o,u,"$setOnce")},increment:function(o){l(i.INFO,"increment, Increasing user's custom property value under the key: ["+o+"] by one"),o=V(o,h.maxKeyLength,"userData increment",l),at(o,1,"$inc")},increment_by:function(o,u){l(i.INFO,"increment_by, Increasing user's custom property value under the key: ["+o+"] by: ["+u+"]"),o=V(o,h.maxKeyLength,"userData increment_by",l),u=V(u,h.maxValueSize,"userData increment_by",l),at(o,u,"$inc")},multiply:function(o,u){l(i.INFO,"multiply, Multiplying user's custom property value under the key: ["+o+"] by: ["+u+"]"),o=V(o,h.maxKeyLength,"userData multiply",l),u=V(u,h.maxValueSize,"userData multiply",l),at(o,u,"$mul")},max:function(o,u){l(i.INFO,"max, Saving user's maximum custom property value compared to the value: ["+u+"] under the key: ["+o+"]"),o=V(o,h.maxKeyLength,"userData max",l),u=V(u,h.maxValueSize,"userData max",l),at(o,u,"$max")},min:function(o,u){l(i.INFO,"min, Saving user's minimum custom property value compared to the value: ["+u+"] under the key: ["+o+"]"),o=V(o,h.maxKeyLength,"userData min",l),u=V(u,h.maxValueSize,"userData min",l),at(o,u,"$min")},push:function(o,u){l(i.INFO,"push, Pushing a value: ["+u+"] under the key: ["+o+"] to user's custom property array"),o=V(o,h.maxKeyLength,"userData push",l),u=V(u,h.maxValueSize,"userData push",l),at(o,u,"$push")},push_unique:function(o,u){l(i.INFO,"push_unique, Pushing a unique value: ["+u+"] under the key: ["+o+"] to user's custom property array"),o=V(o,h.maxKeyLength,"userData push_unique",l),u=V(u,h.maxValueSize,"userData push_unique",l),at(o,u,"$addToSet")},pull:function(o,u){l(i.INFO,"pull, Removing the value: ["+u+"] under the key: ["+o+"] from user's custom property array"),at(o,u,"$pull")},save:function(){l(i.INFO,"save, Saving changes to user's custom property"),h.check_consent(t.USERS)&&Pe({user_details:JSON.stringify({custom:tt})}),tt={}}},this.report_trace=function(o){if(l(i.INFO,"report_trace, Reporting performance trace"),this.check_consent(t.APM)){for(var u=["type","name","stz","etz","apm_metrics","apm_attr"],y=0;y<u.length;y++)if(u[y]!=="apm_attr"&&typeof o[u[y]]>"u"){l(i.WARNING,"report_trace, APM trace don't have the property: "+u[y]);return}o.name=V(o.name,h.maxKeyLength,"report_trace",l),o.app_metrics=ie(o.app_metrics,h.maxKeyLength,h.maxValueSize,h.maxSegmentationValues,"report_trace",l);var x=X(o,u);x.timestamp=o.stz;var C=new Date;x.hour=C.getHours(),x.dow=C.getDay(),Pe({apm:JSON.stringify(x)}),l(i.INFO,"report_trace, Successfully adding APM trace: ",x)}},this.track_errors=function(o){l(i.INFO,"track_errors, Started tracking errors"),e.i[this.app_key].tracking_crashes=!0,window.cly_crashes||(window.cly_crashes=!0,mt=o,window.onerror=function u(y,x,C,O,L){if(L!=null)F(L,!1);else{O=O||window.event&&window.event.errorCharacter;var R="";typeof y<"u"&&(R+=y+`
`),typeof x<"u"&&(R+="at "+x),typeof C<"u"&&(R+=":"+C),typeof O<"u"&&(R+=":"+O),R+=`
`;try{for(var H=[],W=u.caller;W;)H.push(W.name),W=W.caller;R+=H.join(`
`)}catch(Z){l(i.ERROR,"track_errors, Call stack generation experienced a problem: "+Z)}F(R,!1)}},window.addEventListener("unhandledrejection",function(u){F(new Error("Unhandled rejection (reason: "+(u.reason&&u.reason.stack?u.reason.stack:u.reason)+")."),!0)}))},this.log_error=function(o,u){l(i.INFO,"log_error, Logging errors"),this.recordError(o,!0,u)},this.add_log=function(o){if(l(i.INFO,"add_log, Adding a new log of breadcrumbs: [ "+o+" ]"),this.check_consent(t.CRASHES)){for(o=V(o,h.maxValueSize,"add_log",l);Ue.length>=h.maxBreadcrumbCount;)Ue.shift(),l(i.WARNING,"add_log, Reached maximum crashLogs size. Will erase the oldest one.");Ue.push(o)}},this.fetch_remote_config=function(o,u,y){var x=null,C=null,O=null;if(o&&(!y&&typeof o=="function"?O=o:Array.isArray(o)&&(x=o)),u&&(!y&&typeof u=="function"?O=u:Array.isArray(u)&&(C=u)),!O&&typeof y=="function"&&(O=y),this.useExplicitRcApi){l(i.INFO,"fetch_remote_config, Fetching remote config");var L=this.rcAutoOptinAb?1:0;an(x,C,L,null,O);return}l(i.WARNING,"fetch_remote_config, Fetching remote config, with legacy API"),an(x,C,null,"legacy",O)};function an(o,u,y,x,C){l(i.INFO,"fetch_remote_config_explicit, Fetching sequence initiated");var O={method:"rc"};o&&(O.keys=JSON.stringify(o)),u&&(O.omit_keys=JSON.stringify(u));var L;x==="legacy"&&(O.method="fetch_remote_config"),y===0&&(O.oi=0),y===1&&(O.oi=1),typeof C=="function"&&(L=C),h.check_consent(t.SESSIONS)&&(O.metrics=JSON.stringify(Yt())),h.check_consent(t.REMOTE_CONFIG)?(xi(O),lt("fetch_remote_config_explicit",h.url+Ie,O,function(R,H,W){if(R){l(i.ERROR,"fetch_remote_config_explicit, An error occurred: "+R);return}try{var Z=JSON.parse(W);if(O.keys||O.omit_keys)for(var me in Z)Ee[me]=Z[me];else Ee=Z;ne("cly_remote_configs",Ee)}catch(we){l(i.ERROR,"fetch_remote_config_explicit, Had an issue while parsing the response: "+we)}L&&(l(i.INFO,"fetch_remote_config_explicit, Callback function is provided"),L(R,Ee))},!0)):(l(i.ERROR,"fetch_remote_config_explicit, Remote config requires explicit consent"),L&&L(new Error("Remote config requires explicit consent"),Ee))}this.enrollUserToAb=function(o){if(l(i.INFO,"enrollUserToAb, Providing AB test keys to opt in for"),!o||!Array.isArray(o)||o.length===0){l(i.ERROR,"enrollUserToAb, No keys provided");return}var u={method:"ab",keys:JSON.stringify(o)};xi(u),lt("enrollUserToAb",this.url+Ie,u,function(y,x,C){if(y){l(i.ERROR,"enrollUserToAb, An error occurred: "+y);return}try{var O=JSON.parse(C);l(i.DEBUG,"enrollUserToAb, Parsed the response's result: ["+O.result+"]")}catch(L){l(i.ERROR,"enrollUserToAb, Had an issue while parsing the response: "+L)}},!0)},this.get_remote_config=function(o){return l(i.INFO,"get_remote_config, Getting remote config from storage"),typeof o<"u"?Ee[o]:Ee},this.stop_time=function(){l(i.INFO,"stop_time, Stopping tracking duration"),ae&&(ae=!1,Ot=T()-ot,st=T()-De)},this.start_time=function(){l(i.INFO,"start_time, Starting tracking duration"),ae||(ae=!0,ot=T()-Ot,De=T()-st,st=0,ln())},this.track_sessions=function(){l(i.INFO,"track_session, Starting tracking user session"),this.begin_session(),this.start_time(),A(window,"beforeunload",function(){Ii(),h.end_session()});var o="hidden";function u(){document[o]||!document.hasFocus()?h.stop_time():h.start_time()}A(window,"focus",u),A(window,"blur",u),A(window,"pageshow",u),A(window,"pagehide",u),"onfocusin"in document&&(A(window,"focusin",u),A(window,"focusout",u)),o in document?document.addEventListener("visibilitychange",u):"mozHidden"in document?(o="mozHidden",document.addEventListener("mozvisibilitychange",u)):"webkitHidden"in document?(o="webkitHidden",document.addEventListener("webkitvisibilitychange",u)):"msHidden"in document&&(o="msHidden",document.addEventListener("msvisibilitychange",u));function y(){n>=wt&&h.start_time(),n=0}A(window,"mousemove",y),A(window,"click",y),A(window,"keydown",y),A(window,"scroll",y),setInterval(function(){n++,n>=wt&&h.stop_time()},6e4)},this.track_pageview=function(o,u,y){if(l(i.INFO,"track_pageview, Tracking page views"),l(i.VERBOSE,"track_pageview, last view is:["+Ce+"]"),Ce&&(l(i.DEBUG,"track_pageview, Scroll registry triggered"),Ni(),Mt=!0,Ft=0),Oi(),o=V(o,h.maxKeyLength,"track_pageview",l),o&&Array.isArray(o)&&(u=o,o=null),o||(o=this.getViewName()),o===void 0||o===""){l(i.ERROR,"track_pageview, No page name to track (it is either undefined or empty string). No page view can be tracked.");return}if(o===null){l(i.ERROR,"track_pageview, View name returned as null. Page view will be ignored.");return}if(u&&u.length)for(var x=0;x<u.length;x++)try{var C=new RegExp(u[x]);if(C.test(o)){l(i.INFO,"track_pageview, Ignoring the page: "+o);return}}catch(W){l(i.ERROR,"track_pageview, Problem with finding ignore list item: "+u[x]+", error: "+W)}Ce=o,De=T(),l(i.VERBOSE,"track_pageview, last view is assigned:["+Ce+"]");var O={name:o,visit:1,view:h.getViewUrl()};if(O=ie(O,h.maxKeyLength,h.maxValueSize,h.maxSegmentationValues,"track_pageview",l),this.track_domains&&(O.domain=window.location.hostname),E)if(Q)xt&&(xt=!1,O.start=1);else{var L=de("cly_session");(!L||parseInt(L)<=T())&&(xt=!1,O.start=1)}else if(typeof document.referrer<"u"&&document.referrer.length){var R=v.exec(document.referrer);R&&R[11]&&R[11]!==window.location.hostname&&(O.start=1)}if(y){y=ie(y,h.maxKeyLength,h.maxValueSize,h.maxSegmentationValues,"track_pageview",l);for(var H in y)typeof O[H]>"u"&&(O[H]=y[H])}this.check_consent(t.VIEWS)?Ye({key:r.VIEW,segmentation:O}):se.track_pageview=arguments},this.track_view=function(o,u,y){l(i.INFO,"track_view, Initiating tracking page views"),this.track_pageview(o,u,y)},this.track_clicks=function(o){l(i.INFO,"track_clicks, Starting to track clicks"),o&&l(i.INFO,"track_clicks, Tracking the specified children:["+o+"]"),o=o||document;var u=!0;function y(x){if(u){if(u=!1,je(x),typeof x.pageX<"u"&&typeof x.pageY<"u"){var C=Oe(),O=d();if(h.check_consent(t.CLICKS)){var L={type:"click",x:x.pageX,y:x.pageY,width:O,height:C,view:h.getViewUrl()};L=ie(L,h.maxKeyLength,h.maxValueSize,h.maxSegmentationValues,"processClick",l),h.track_domains&&(L.domain=window.location.hostname),Ye({key:r.ACTION,segmentation:L})}}setTimeout(function(){u=!0},1e3)}}A(o,"click",y)},this.track_scrolls=function(o){l(i.INFO,"track_scrolls, Starting to track scrolls"),o&&l(i.INFO,"track_scrolls, Tracking the specified children"),o=o||window,Mt=!0,A(o,"scroll",dn),A(o,"beforeunload",Ni)},this.track_links=function(o){l(i.INFO,"track_links, Starting to track clicks to links"),o&&l(i.INFO,"track_links, Tracking the specified children"),o=o||document;function u(y){var x=Se(le(y),"a");x&&(je(y),h.check_consent(t.CLICKS)&&Ye({key:"linkClick",segmentation:{href:x.href,text:x.innerText,id:x.id,view:h.getViewUrl()}}))}A(o,"click",u)},this.track_forms=function(o,u){l(i.INFO,"track_forms, Starting to track form submissions. DOM object provided:["+!!o+"] Tracking hidden inputs :["+!!u+"]"),o=o||document;function y(C){return C.name||C.id||C.type||C.nodeName}function x(C){var O=le(C),L={id:O.attributes.id&&O.attributes.id.nodeValue,name:O.attributes.name&&O.attributes.name.nodeValue,action:O.attributes.action&&O.attributes.action.nodeValue,method:O.attributes.method&&O.attributes.method.nodeValue,view:h.getViewUrl()},R;if(typeof O.elements<"u"){for(var H=0;H<O.elements.length;H++)R=O.elements[H],R&&R.type!=="password"&&R.className.indexOf("cly_user_ignore")===-1&&(typeof L["input:"+y(R)]>"u"&&(L["input:"+y(R)]=[]),R.nodeName.toLowerCase()==="select"?typeof R.multiple<"u"?L["input:"+y(R)].push(w(R)):L["input:"+y(R)].push(R.options[R.selectedIndex].value):R.nodeName.toLowerCase()==="input"?typeof R.type<"u"?R.type.toLowerCase()==="checkbox"||R.type.toLowerCase()==="radio"?R.checked&&L["input:"+y(R)].push(R.value):(R.type.toLowerCase()!=="hidden"||u)&&L["input:"+y(R)].push(R.value):L["input:"+y(R)].push(R.value):(R.nodeName.toLowerCase()==="textarea"||typeof R.value<"u")&&L["input:"+y(R)].push(R.value));for(var W in L)L[W]&&typeof L[W].join=="function"&&(L[W]=L[W].join(", "))}h.check_consent(t.FORMS)&&Ye({key:"formSubmit",segmentation:L})}A(o,"submit",x)},this.collect_from_forms=function(o,u){l(i.INFO,"collect_from_forms, Starting to collect possible user data. DOM object provided:["+!!o+"] Submitting custom user property:["+!!u+"]"),o=o||document;function y(x){var C=le(x),O={},L=!1,R;if(typeof C.elements<"u"){var H={},W=o.getElementsByTagName("LABEL"),Z,me;for(Z=0;Z<W.length;Z++)W[Z].htmlFor&&W[Z].htmlFor!==""&&(H[W[Z].htmlFor]=W[Z].innerText||W[Z].textContent||W[Z].innerHTML);for(Z=0;Z<C.elements.length;Z++)if(R=C.elements[Z],R&&R.type!=="password"&&R.className.indexOf("cly_user_ignore")===-1){var we="";if(R.nodeName.toLowerCase()==="select"?typeof R.multiple<"u"?we=w(R):we=R.options[R.selectedIndex].value:R.nodeName.toLowerCase()==="input"?typeof R.type<"u"&&(R.type.toLowerCase()==="checkbox"||R.type.toLowerCase()==="radio")?R.checked&&(we=R.value):we=R.value:(R.nodeName.toLowerCase()==="textarea"||typeof R.value<"u")&&(we=R.value),R.className&&R.className.indexOf("cly_user_")!==-1){var Xe=R.className.split(" ");for(me=0;me<Xe.length;me++)if(Xe[me].indexOf("cly_user_")===0){O[Xe[me].replace("cly_user_","")]=we,L=!0;break}}else R.type&&R.type.toLowerCase()==="email"||R.name&&R.name.toLowerCase().indexOf("email")!==-1||R.id&&R.id.toLowerCase().indexOf("email")!==-1||R.id&&H[R.id]&&H[R.id].toLowerCase().indexOf("email")!==-1||/[^@\s]+@[^@\s]+\.[^@\s]+/.test(we)?(O.email||(O.email=we),L=!0):R.name&&R.name.toLowerCase().indexOf("username")!==-1||R.id&&R.id.toLowerCase().indexOf("username")!==-1||R.id&&H[R.id]&&H[R.id].toLowerCase().indexOf("username")!==-1?(O.username||(O.username=we),L=!0):R.name&&(R.name.toLowerCase().indexOf("tel")!==-1||R.name.toLowerCase().indexOf("phone")!==-1||R.name.toLowerCase().indexOf("number")!==-1)||R.id&&(R.id.toLowerCase().indexOf("tel")!==-1||R.id.toLowerCase().indexOf("phone")!==-1||R.id.toLowerCase().indexOf("number")!==-1)||R.id&&H[R.id]&&(H[R.id].toLowerCase().indexOf("tel")!==-1||H[R.id].toLowerCase().indexOf("phone")!==-1||H[R.id].toLowerCase().indexOf("number")!==-1)?(O.phone||(O.phone=we),L=!0):R.name&&(R.name.toLowerCase().indexOf("org")!==-1||R.name.toLowerCase().indexOf("company")!==-1)||R.id&&(R.id.toLowerCase().indexOf("org")!==-1||R.id.toLowerCase().indexOf("company")!==-1)||R.id&&H[R.id]&&(H[R.id].toLowerCase().indexOf("org")!==-1||H[R.id].toLowerCase().indexOf("company")!==-1)?(O.organization||(O.organization=we),L=!0):(R.name&&R.name.toLowerCase().indexOf("name")!==-1||R.id&&R.id.toLowerCase().indexOf("name")!==-1||R.id&&H[R.id]&&H[R.id].toLowerCase().indexOf("name")!==-1)&&(O.name||(O.name=""),O.name+=we+" ",L=!0)}}L&&(l(i.INFO,"collect_from_forms, Gathered user data",O),u?h.user_details({custom:O}):h.user_details(O))}A(o,"submit",y)},this.collect_from_facebook=function(o){l(i.INFO,"collect_from_facebook, Starting to collect possible user data"),FB&&FB.api&&FB.api("/me",function(u){var y={};if(u.name&&(y.name=u.name),u.email&&(y.email=u.email),u.gender==="male"?y.gender="M":u.gender==="female"&&(y.gender="F"),u.birthday){var x=u.birthday.split("/").pop();x&&x.length===4&&(y.byear=x)}if(u.work&&u.work[0]&&u.work[0].employer&&u.work[0].employer.name&&(y.organization=u.work[0].employer.name),o){y.custom={};for(var C in o){for(var O=o[C].split("."),L=u,R=0;R<O.length&&(L=L[O[R]],!(typeof L>"u"));R++);typeof L<"u"&&(y.custom[C]=L)}}h.user_details(y)})},this.opt_out=function(){l(i.INFO,"opt_out, Opting out the user"),this.ignore_visitor=!0,ne("cly_ignore",!0)},this.opt_in=function(){l(i.INFO,"opt_in, Opting in the user"),ne("cly_ignore",!1),this.ignore_visitor=!1,fn(),!this.ignore_visitor&&!he&&Jt()},this.report_feedback=function(o){l(i.WARNING,"report_feedback, Deprecated function call! Use 'recordRatingWidgetWithID' or 'reportFeedbackWidgetManually' in place of this call. Call will be redirected to 'recordRatingWidgetWithID' now!"),this.recordRatingWidgetWithID(o)},this.recordRatingWidgetWithID=function(o){if(l(i.INFO,"recordRatingWidgetWithID, Providing information about user with ID: [ "+o.widget_id+" ]"),!!this.check_consent(t.STAR_RATING)){if(!o.widget_id){l(i.ERROR,"recordRatingWidgetWithID, Rating Widget must contain widget_id property");return}if(!o.rating){l(i.ERROR,"recordRatingWidgetWithID, Rating Widget must contain rating property");return}var u=["widget_id","contactMe","platform","app_version","rating","email","comment"],y={key:r.STAR_RATING,count:1,segmentation:{}};y.segmentation=X(o,u),y.segmentation.app_version||(y.segmentation.app_version=this.metrics._app_version||this.app_version),y.segmentation.rating>5?(l(i.WARNING,"recordRatingWidgetWithID, You have entered a rating higher than 5. Changing it back to 5 now."),y.segmentation.rating=5):y.segmentation.rating<1&&(l(i.WARNING,"recordRatingWidgetWithID, You have entered a rating lower than 1. Changing it back to 1 now."),y.segmentation.rating=1),l(i.INFO,"recordRatingWidgetWithID, Reporting Rating Widget: ",y),Ye(y)}},this.reportFeedbackWidgetManually=function(o,u,y){if(!!this.check_consent(t.FEEDBACK)){if(!(o&&u)){l(i.ERROR,"reportFeedbackWidgetManually, Widget data and/or Widget object not provided. Aborting.");return}if(!o._id){l(i.ERROR,"reportFeedbackWidgetManually, Feedback Widgets must contain _id property");return}if(re){l(i.ERROR,"reportFeedbackWidgetManually, Feedback Widgets can not be reported in offline mode");return}l(i.INFO,"reportFeedbackWidgetManually, Providing information about user with, provided result of the widget with  ID: [ "+o._id+" ] and type: ["+o.type+"]");var x=[],C=o.type,O;if(C==="nps"){if(y){if(!y.rating){l(i.ERROR,"reportFeedbackWidgetManually, Widget must contain rating property");return}y.rating=Math.round(y.rating),y.rating>10?(l(i.WARNING,"reportFeedbackWidgetManually, You have entered a rating higher than 10. Changing it back to 10 now."),y.rating=10):y.rating<0&&(l(i.WARNING,"reportFeedbackWidgetManually, You have entered a rating lower than 0. Changing it back to 0 now."),y.rating=0),x=["rating","comment"]}O=r.NPS}else if(C==="survey"){if(y){if(Object.keys(y).length<1){l(i.ERROR,"reportFeedbackWidgetManually, Widget should have answers to be reported");return}x=Object.keys(y)}O=r.SURVEY}else if(C==="rating"){if(y){if(!y.rating){l(i.ERROR,"reportFeedbackWidgetManually, Widget must contain rating property");return}y.rating=Math.round(y.rating),y.rating>5?(l(i.WARNING,"reportFeedbackWidgetManually, You have entered a rating higher than 5. Changing it back to 5 now."),y.rating=5):y.rating<1&&(l(i.WARNING,"reportFeedbackWidgetManually, You have entered a rating lower than 1. Changing it back to 1 now."),y.rating=1),x=["rating","comment","email","contactMe"]}O=r.STAR_RATING}else{l(i.ERROR,"reportFeedbackWidgetManually, Widget has an unacceptable type");return}var L={key:O,count:1,segmentation:{widget_id:o._id,platform:this.platform,app_version:this.metrics._app_version||this.app_version}};y===null?L.segmentation.closed=1:L.segmentation=z(L.segmentation,y,x),l(i.INFO,"reportFeedbackWidgetManually, Reporting "+C+": ",L),Ye(L)}},this.show_feedback_popup=function(o){l(i.WARNING,"show_feedback_popup, Deprecated function call! Use 'presentRatingWidgetWithID' in place of this call. Call will be redirected now!"),this.presentRatingWidgetWithID(o)},this.presentRatingWidgetWithID=function(o){l(i.INFO,"presentRatingWidgetWithID, Showing rating widget popup for the widget with ID: [ "+o+" ]"),this.check_consent(t.STAR_RATING)&&(re?l(i.ERROR,"presentRatingWidgetWithID, Cannot show ratingWidget popup in offline mode"):lt("presentRatingWidgetWithID",this.url+"/o/feedback/widget",{widget_id:o},function(u,y,x){if(u){l(i.ERROR,"presentRatingWidgetWithID, An error occurred: "+u);return}try{var C=JSON.parse(x);Ai(C,!1)}catch(O){l(i.ERROR,"presentRatingWidgetWithID, JSON parse failed: "+O)}},!0))},this.initialize_feedback_popups=function(o){l(i.WARNING,"initialize_feedback_popups, Deprecated function call! Use 'initializeRatingWidgets' in place of this call. Call will be redirected now!"),this.initializeRatingWidgets(o)},this.initializeRatingWidgets=function(o){if(l(i.INFO,"initializeRatingWidgets, Initializing rating widget with provided widget IDs:[ "+o+"]"),!!this.check_consent(t.STAR_RATING)){o||(o=de("cly_fb_widgets"));for(var u=document.getElementsByClassName("countly-feedback-sticker");u.length>0;)u[0].remove();lt("initializeRatingWidgets",this.url+"/o/feedback/multiple-widgets-by-id",{widgets:JSON.stringify(o)},function(y,x,C){if(y){l(i.ERROR,"initializeRatingWidgets, An error occurred: "+y);return}try{for(var O=JSON.parse(C),L=0;L<O.length;L++)if(O[L].is_active==="true"){var R=O[L].target_devices,H=$e();if(R[H])if(typeof O[L].hide_sticker=="string"&&(O[L].hide_sticker=O[L].hide_sticker==="true"),O[L].target_page==="all"&&!O[L].hide_sticker)Ai(O[L],!0);else for(var W=O[L].target_pages,Z=0;Z<W.length;Z++){var me=W[Z].substr(0,W[Z].length-1)===window.location.pathname.substr(0,W[Z].length-1),we=W[Z]===window.location.pathname,Xe=W[Z].includes("*");(Xe&&me||we)&&!O[L].hide_sticker&&Ai(O[L],!0)}}}catch(Le){l(i.ERROR,"initializeRatingWidgets, JSON parse error: "+Le)}},!0)}},this.enable_feedback=function(o){l(i.WARNING,"enable_feedback, Deprecated function call! Use 'enableRatingWidgets' in place of this call. Call will be redirected now!"),this.enableRatingWidgets(o)},this.enableRatingWidgets=function(o){if(l(i.INFO,"enableRatingWidgets, Enabling rating widget with params:",o),!!this.check_consent(t.STAR_RATING))if(re)l(i.ERROR,"enableRatingWidgets, Cannot enable rating widgets in offline mode");else{ne("cly_fb_widgets",o.popups||o.widgets),q(this.url+"/star-rating/stylesheets/countly-feedback-web.css");var u=o.popups||o.widgets;u.length>0?(document.body.insertAdjacentHTML("beforeend",'<div id="cfbg"></div>'),this.initializeRatingWidgets(u)):l(i.ERROR,"enableRatingWidgets, You should provide at least one widget id as param. Read documentation for more detail. https://resources.count.ly/plugins/feedback")}},this.get_available_feedback_widgets=function(o){if(l(i.INFO,"get_available_feedback_widgets, Getting the feedback list, callback function is provided:["+!!o+"]"),!this.check_consent(t.FEEDBACK)){o&&o(null,new Error("Consent for feedback not provided."));return}if(re){l(i.ERROR,"get_available_feedback_widgets, Cannot enable feedback widgets in offline mode.");return}var u=this.url+Ie,y={method:t.FEEDBACK,device_id:this.device_id,app_key:this.app_key};lt("get_available_feedback_widgets",u,y,function(x,C,O){if(x){l(i.ERROR,"get_available_feedback_widgets, Error occurred while fetching feedbacks: "+x),o&&o(null,x);return}try{var L=JSON.parse(O),R=L.result||[];o&&o(R,null);return}catch(H){l(i.ERROR,"get_available_feedback_widgets, Error while parsing feedback widgets list: "+H),o&&o(null,H)}},!1)},this.getFeedbackWidgetData=function(o,u){if(!o.type){l(i.ERROR,"getFeedbackWidgetData, Expected the provided widget object to have a type but got: ["+JSON.stringify(o)+"], aborting.");return}if(l(i.INFO,"getFeedbackWidgetData, Retrieving data for: ["+JSON.stringify(o)+"], callback function is provided:["+!!u+"]"),!this.check_consent(t.FEEDBACK)){u&&u(null,new Error("Consent for feedback not provided."));return}if(re){l(i.ERROR,"getFeedbackWidgetData, Cannot enable feedback widgets in offline mode.");return}var y=this.url,x={widget_id:o._id,shown:1,sdk_version:I,sdk_name:f,platform:this.platform,app_version:this.app_version};if(o.type==="nps")y+="/o/surveys/nps/widget";else if(o.type==="survey")y+="/o/surveys/survey/widget";else if(o.type==="rating")y+="/o/surveys/rating/widget";else{l(i.ERROR,"getFeedbackWidgetData, Unknown type info: ["+o.type+"]");return}lt("getFeedbackWidgetData",y,x,C,!0);function C(O,L,R){if(O){l(i.ERROR,"getFeedbackWidgetData, Error occurred while fetching feedbacks: "+O),u&&u(null,O);return}try{var H=JSON.parse(R);u&&u(H,null);return}catch(W){l(i.ERROR,"getFeedbackWidgetData, Error while parsing feedback widgets list: "+W),u&&u(null,W)}}},this.present_feedback_widget=function(o,u,y){if(l(i.INFO,"present_feedback_widget, Presenting the feedback widget by appending to the element with ID: [ "+u+" ] and className: [ "+y+" ]"),!this.check_consent(t.FEEDBACK))return;if(!o||typeof o!="object"||Array.isArray(o)){l(i.ERROR,"present_feedback_widget, Please provide at least one feedback widget object.");return}try{var x=this.url;if(o.type==="nps")l(i.DEBUG,"present_feedback_widget, Widget type: nps."),x+="/feedback/nps";else if(o.type==="survey")l(i.DEBUG,"present_feedback_widget, Widget type: survey."),x+="/feedback/survey";else if(o.type==="rating")l(i.DEBUG,"present_feedback_widget, Widget type: rating."),x+="/feedback/rating";else{l(i.ERROR,"present_feedback_widget, Feedback widget only accepts nps, rating and survey types.");return}var C=window.origin||window.location.origin,O;o.type==="rating"?(l(i.DEBUG,"present_feedback_widget, Loading css for rating widget."),O="ratings",q(this.url+"/star-rating/stylesheets/countly-feedback-web.css")):(l(i.DEBUG,"present_feedback_widget, Loading css for survey or nps."),q(this.url+"/surveys/stylesheets/countly-surveys.css"),O="surveys"),x+="?widget_id="+o._id,x+="&app_key="+this.app_key,x+="&device_id="+this.device_id,x+="&sdk_name="+f,x+="&platform="+this.platform,x+="&app_version="+this.app_version,x+="&sdk_version="+I,x+="&origin="+C,x+="&widget_v=web";var L=document.createElement("iframe");L.src=x,L.name="countly-"+O+"-iframe",L.id="countly-"+O+"-iframe";var R=!1;L.onload=function(){R&&(document.getElementById("countly-"+O+"-wrapper-"+o._id).style.display="none",document.getElementById("csbg").style.display="none"),R=!0,l(i.DEBUG,"present_feedback_widget, Loaded iframe.")};for(var H=document.getElementById("csbg");H;)H.remove(),H=document.getElementById("csbg"),l(i.DEBUG,"present_feedback_widget, Removing past overlay.");for(var W=document.getElementsByClassName("countly-"+O+"-wrapper"),Z=0;Z<W.length;Z++)W[Z].remove(),l(i.DEBUG,"present_feedback_widget, Removed a wrapper.");W=document.createElement("div"),W.className="countly-"+O+"-wrapper",W.id="countly-"+O+"-wrapper-"+o._id,o.type==="survey"&&(W.className=W.className+" "+o.appearance.position);var me=document.body,we=!1;if(u&&(document.getElementById(u)?(me=document.getElementById(u),we=!0):l(i.ERROR,"present_feedback_widget, Provided ID not found.")),we||y&&(document.getElementsByClassName(y)[0]?me=document.getElementsByClassName(y)[0]:l(i.ERROR,"present_feedback_widget, Provided class not found.")),me.insertAdjacentHTML("beforeend",'<div id="csbg"></div>'),me.appendChild(W),o.type==="rating"){var Xe=document.createElement("div");Xe.className="countly-ratings-overlay",Xe.id="countly-ratings-overlay-"+o._id,W.appendChild(Xe),l(i.DEBUG,"present_feedback_widget, appended the rating overlay to wrapper"),A(document.getElementById("countly-ratings-overlay-"+o._id),"click",function(){document.getElementById("countly-ratings-wrapper-"+o._id).style.display="none"})}if(W.appendChild(L),l(i.DEBUG,"present_feedback_widget, Appended the iframe"),A(window,"message",function(pe){var He={};try{He=JSON.parse(pe.data),l(i.DEBUG,"present_feedback_widget, Parsed response message "+He)}catch(_r){l(i.ERROR,"present_feedback_widget, Error while parsing message body "+_r)}if(!He.close){l(i.DEBUG,"present_feedback_widget, Closing signal not sent yet");return}document.getElementById("countly-"+O+"-wrapper-"+o._id).style.display="none",document.getElementById("csbg").style.display="none"}),o.type==="survey"){var Le=!1;switch(o.showPolicy){case"afterPageLoad":document.readyState==="complete"?Le||(Le=!0,vt(o)):A(document,"readystatechange",function(pe){pe.target.readyState==="complete"&&(Le||(Le=!0,vt(o)))});break;case"afterConstantDelay":setTimeout(function(){Le||(Le=!0,vt(o))},1e4);break;case"onAbandon":document.readyState==="complete"?A(document,"mouseleave",function(){Le||(Le=!0,vt(o))}):A(document,"readystatechange",function(pe){pe.target.readyState==="complete"&&A(document,"mouseleave",function(){Le||(Le=!0,vt(o))})});break;case"onScrollHalfwayDown":A(window,"scroll",function(){if(!Le){var pe=Math.max(window.scrollY,document.body.scrollTop,document.documentElement.scrollTop),He=Oe();pe>=He/2&&(Le=!0,vt(o))}});break;default:Le||(Le=!0,vt(o))}}else if(o.type==="nps")document.getElementById("countly-"+O+"-wrapper-"+o._id).style.display="block",document.getElementById("csbg").style.display="block";else if(o.type==="rating"){var Xt=!1;document.readyState==="complete"?Xt||(Xt=!0,mn(o)):A(document,"readystatechange",function(pe){pe.target.readyState==="complete"&&(Xt||(Xt=!0,mn(o)))})}}catch(pe){l(i.ERROR,"present_feedback_widget, Something went wrong while presenting the widget: "+pe)}function vt(pe){document.getElementById("countly-surveys-wrapper-"+pe._id).style.display="block",document.getElementById("csbg").style.display="block"}function mn(pe){if(!pe.appearance.hideS){l(i.DEBUG,"present_feedback_widget, handling the sticker as it was not set to hidden");var He=document.createElement("div");He.innerText=pe.appearance.text,He.style.color=pe.appearance.text_color.length<7?"#"+pe.appearance.text_color:pe.appearance.text_color,He.style.backgroundColor=pe.appearance.bg_color.length<7?"#"+pe.appearance.bg_color:pe.appearance.bg_color,He.className="countly-feedback-sticker  "+pe.appearance.position+"-"+pe.appearance.size,He.id="countly-feedback-sticker-"+pe._id,document.body.appendChild(He),A(document.getElementById("countly-feedback-sticker-"+pe._id),"click",function(){document.getElementById("countly-ratings-wrapper-"+pe._id).style.display="flex",document.getElementById("csbg").style.display="block"})}A(document.getElementById("countly-feedback-close-icon-"+pe._id),"click",function(){document.getElementById("countly-ratings-wrapper-"+pe._id).style.display="none",document.getElementById("csbg").style.display="none"})}},this.recordError=function(o,u,y){if(l(i.INFO,"recordError, Recording error"),this.check_consent(t.CRASHES)&&o){y=y||mt;var x="";if(typeof o=="object"?typeof o.stack<"u"?x=o.stack:(typeof o.name<"u"&&(x+=o.name+":"),typeof o.message<"u"&&(x+=o.message+`
`),typeof o.fileName<"u"&&(x+="in "+o.fileName+`
`),typeof o.lineNumber<"u"&&(x+="on "+o.lineNumber),typeof o.columnNumber<"u"&&(x+=":"+o.columnNumber)):x=o+"",x.length>h.maxStackTraceLineLength*h.maxStackTraceLinesPerThread){l(i.DEBUG,"record_error, Error stack is too long will be truncated");var C=x.split(`
`);C.length>h.maxStackTraceLinesPerThread&&(C=C.splice(0,h.maxStackTraceLinesPerThread));for(var O=0,L=C.length;O<L;O++)C[O].length>h.maxStackTraceLineLength&&(C[O]=C[O].substring(0,h.maxStackTraceLineLength));x=C.join(`
`)}u=!!u;var R=Yt(),H={_resolution:R._resolution,_error:x,_app_version:R._app_version,_run:T()-ke};H._not_os_specific=!0,H._javascript=!0;var W=navigator.battery||navigator.webkitBattery||navigator.mozBattery||navigator.msBattery;W&&(H._bat=Math.floor(W.level*100)),typeof navigator.onLine<"u"&&(H._online=!!navigator.onLine),H._background=!document.hasFocus(),Ue.length>0&&(H._logs=Ue.join(`
`)),Ue=[],H._nonfatal=u,H._view=this.getViewName(),typeof y<"u"&&(y=ie(y,h.maxKeyLength,h.maxValueSize,h.maxSegmentationValues,"record_error",l),H._custom=y);try{var Z=document.createElement("canvas"),me=Z.getContext("experimental-webgl");H._opengl=me.getParameter(me.VERSION)}catch(Xe){l(i.ERROR,"Could not get the experimental-webgl context: "+Xe)}var we={};we.crash=JSON.stringify(H),we.metrics=JSON.stringify({_ua:R._ua}),Pe(we)}};function fn(){h.ignore_prefetch&&typeof document.visibilityState<"u"&&document.visibilityState==="prerender"&&(h.ignore_visitor=!0),h.ignore_bots&&fe()&&(h.ignore_visitor=!0)}function Ii(){be.length>0&&(Pe({events:JSON.stringify(be)}),be=[],ne("cly_event",be))}function Ai(o,u){var y=!!document.getElementById("countly-feedback-sticker-"+o._id);if(y){l(i.ERROR,"Widget with same ID exists");return}try{var x=document.createElement("div");x.className="countly-iframe-wrapper",x.id="countly-iframe-wrapper-"+o._id;var C=document.createElement("span");C.className="countly-feedback-close-icon",C.id="countly-feedback-close-icon-"+o._id,C.innerText="x";var O=document.createElement("iframe");if(O.name="countly-feedback-iframe",O.id="countly-feedback-iframe",O.src=h.url+"/feedback?widget_id="+o._id+"&app_key="+h.app_key+"&device_id="+h.device_id+"&sdk_version="+I,document.body.appendChild(x),x.appendChild(C),x.appendChild(O),A(document.getElementById("countly-feedback-close-icon-"+o._id),"click",function(){document.getElementById("countly-iframe-wrapper-"+o._id).style.display="none",document.getElementById("cfbg").style.display="none"}),u){var L=document.createElementNS("http://www.w3.org/2000/svg","svg");L.id="feedback-sticker-svg",L.setAttribute("aria-hidden","true"),L.setAttribute("data-prefix","far"),L.setAttribute("data-icon","grin"),L.setAttribute("class","svg-inline--fa fa-grin fa-w-16"),L.setAttribute("role","img"),L.setAttribute("xmlns","http://www.w3.org/2000/svg"),L.setAttribute("viewBox","0 0 496 512");var R=document.createElementNS("http://www.w3.org/2000/svg","path");R.id="smileyPathInStickerSvg",R.setAttribute("fill","white"),R.setAttribute("d","M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 448c-110.3 0-200-89.7-200-200S137.7 56 248 56s200 89.7 200 200-89.7 200-200 200zm105.6-151.4c-25.9 8.3-64.4 13.1-105.6 13.1s-79.6-4.8-105.6-13.1c-9.9-3.1-19.4 5.4-17.7 15.3 7.9 47.1 71.3 80 123.3 80s115.3-32.9 123.3-80c1.6-9.8-7.7-18.4-17.7-15.3zM168 240c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32zm160 0c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32z");var H=document.createElement("span");H.innerText=o.trigger_button_text;var W=document.createElement("div");W.style.color=o.trigger_font_color.length<7?"#"+o.trigger_font_color:o.trigger_font_color,W.style.backgroundColor=o.trigger_bg_color.length<7?"#"+o.trigger_bg_color:o.trigger_bg_color,W.className="countly-feedback-sticker  "+o.trigger_position+"-"+o.trigger_size,W.id="countly-feedback-sticker-"+o._id,L.appendChild(R),W.appendChild(L),W.appendChild(H),document.body.appendChild(W);var Z=document.getElementById("smileyPathInStickerSvg");Z&&(Z.style.fill=o.trigger_font_color.length<7?"#"+o.trigger_font_color:o.trigger_font_color),A(document.getElementById("countly-feedback-sticker-"+o._id),"click",function(){document.getElementById("countly-iframe-wrapper-"+o._id).style.display="block",document.getElementById("cfbg").style.display="block"})}else document.getElementById("countly-iframe-wrapper-"+o._id).style.display="block",document.getElementById("cfbg").style.display="block"}catch(me){l(i.ERROR,"Somethings went wrong while element injecting process: "+me)}}function cn(){var o;if(typeof h.onload<"u"&&h.onload.length>0){for(o=0;o<h.onload.length;o++)typeof h.onload[o]=="function"&&h.onload[o](h);h.onload=[]}}function Oi(){if(Ce){var o={name:Ce};h.check_consent(t.VIEWS)&&Ye({key:r.VIEW,dur:ae?T()-De:st,segmentation:o}),Ce=null}}function ur(){return Ce}function ln(){if(E){var o=de("cly_session");(!o||parseInt(o)<=T())&&(Q=!1,h.begin_session(!yt)),ne("cly_session",T()+N*60)}}function xi(o){o.app_key=h.app_key,o.device_id=h.device_id,o.sdk_name=f,o.sdk_version=I,o.t=Ae,h.check_consent(t.LOCATION)?(h.country_code&&(o.country_code=h.country_code),h.city&&(o.city=h.city),h.ip_address!==null&&(o.ip_address=h.ip_address)):o.location="",o.timestamp=S();var u=new Date;o.hour=u.getHours(),o.dow=u.getDay()}function Pe(o){if(h.ignore_visitor){l(i.WARNING,"User is opt_out will ignore the request: "+o);return}if(!h.app_key||!h.device_id){l(i.ERROR,"app_key or device_id is missing ",h.app_key,h.device_id);return}xi(o),ge.length>Me&&ge.shift(),ge.push(o),ne("cly_queue",ge,!0)}function Jt(){if(cn(),h.ignore_visitor){he=!1,l(i.WARNING,"User opt_out, no heartbeat");return}he=!0;var o=0;if(Y&&typeof e.q<"u"&&e.q.length>0){var u,y=e.q;for(e.q=[],o=0;o<y.length;o++)if(u=y[o],l(i.DEBUG,"Processing queued call",u),typeof u=="function")u();else if(Array.isArray(u)&&u.length>0){var x=h,C=0;if(e.i[u[C]]&&(x=e.i[u[C]],C++),typeof x[u[C]]=="function")x[u[C]].apply(x,u.slice(C+1));else if(u[C].indexOf("userData.")===0){var O=u[C].replace("userData.","");typeof x.userData[O]=="function"&&x.userData[O].apply(x,u.slice(C+1))}else typeof e[u[C]]=="function"&&e[u[C]].apply(e,u.slice(C+1))}}if(Q&&yt&&ae){var L=T();L-ot>s&&(h.session_duration(L-ot),ot=L)}if(be.length>0){if(be.length<=a)Pe({events:JSON.stringify(be)}),be=[];else{var R=be.splice(0,a);Pe({events:JSON.stringify(R)})}ne("cly_event",be)}if(!re&&ge.length>0&&P&&T()>Pt){P=!1;var H=ge[0];l(i.DEBUG,"Processing request",H),ne("cly_queue",ge,!0),h.test_mode||lt("send_request_queue",h.url+_e,H,function(W,Z){l(i.DEBUG,"Request Finished",Z,W),W?(Pt=T()+Fe,l(i.ERROR,"Request error: ",W)):ge.shift(),ne("cly_queue",ge,!0),P=!0},!1)}setTimeout(Jt,Te)}function Ti(){var o=de("cly_id");return o?(Ae=de("cly_id_type"),o):B()}function hr(o){return/[0-9a-fA-F]{8}\-[0-9a-fA-F]{4}\-4[0-9a-fA-F]{3}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{12}/.test(o)}function Yt(){var o=JSON.parse(JSON.stringify(h.metrics||{}));if(o._app_version=o._app_version||h.app_version,o._ua=o._ua||xe(),screen.width){var u=screen.width?parseInt(screen.width):0,y=screen.height?parseInt(screen.height):0;if(u!==0&&y!==0){var x=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);if(x&&window.devicePixelRatio)u=Math.round(u*window.devicePixelRatio),y=Math.round(y*window.devicePixelRatio);else if(Math.abs(window.orientation)===90){var C=u;u=y,y=C}o._resolution=o._resolution||""+u+"x"+y}}window.devicePixelRatio&&(o._density=o._density||window.devicePixelRatio);var O=navigator.language||navigator.browserLanguage||navigator.systemLanguage||navigator.userLanguage;if(typeof O<"u"&&(o._locale=o._locale||O),typeof document.referrer<"u"&&document.referrer.length){var L=v.exec(document.referrer);if(L&&L[11]&&L[11]!==window.location.hostname){var R=!1;if(Ve&&Ve.length)for(var H=0;H<Ve.length;H++)try{var W=new RegExp(Ve[H]);if(W.test(document.referrer)){l(i.DEBUG,"Ignored: "+document.referrer),R=!0;break}}catch(Z){l(i.ERROR,"Problem with ignoring: "+Ve[H],", error: "+Z)}R||(o._store=o._store||document.referrer)}}return l(i.DEBUG,"Got metrics",o),o}function l(o,u){if(h.debug&&typeof console<"u"){arguments[2]&&typeof arguments[2]=="object"&&(arguments[2]=JSON.stringify(arguments[2])),Y||(u="["+h.app_key+"] "+u),o||(o=i.DEBUG);for(var y="",x=2;x<arguments.length;x++)y+=arguments[x];var C=o+u+y;o===i.ERROR?console.error(C):o===i.WARNING?console.warn(C):o===i.INFO?console.info(C):o===i.VERBOSE?console.log(C):console.debug(C)}}function lt(o,u,y,x,C){C=C||!1;try{l(i.DEBUG,"Sending XML HTTP request");var O=null;window.XMLHttpRequest?O=new window.XMLHttpRequest:window.ActiveXObject&&(O=new window.ActiveXObject("Microsoft.XMLHTTP")),y=y||{};var L=K(y),R="GET";(h.force_post||L.length>=2e3)&&(R="POST"),R==="GET"?O.open("GET",u+"?"+L,!0):(O.open("POST",u,!0),O.setRequestHeader("Content-type","application/x-www-form-urlencoded"));for(var H in h.headers)O.setRequestHeader(H,h.headers[H]);O.onreadystatechange=function(){if(this.readyState===4){l(i.DEBUG,o+" HTTP request completed ["+this.status+"]["+this.responseText+"]");var W;C?W=hn(this.status,this.responseText):W=un(this.status,this.responseText),W?typeof x=="function"&&x(!1,y,this.responseText):(l(i.ERROR,o+" Failed Server XML HTTP request, ",this.status),typeof x=="function"&&x(!0,y))}},R==="GET"?O.send():O.send(L)}catch(W){l(i.ERROR,o+" Failed XML HTTP request: "+W),typeof x=="function"&&x(!0,y)}}function un(o,u){if(!(o>=200&&o<300))return l(i.ERROR,"Http response status code is not within the expected range:["+o+"]"),!1;try{var y=JSON.parse(u);return Object.prototype.toString.call(y)!=="[object Object]"?(l(i.ERROR,"Http response is not JSON Object"),!1):!!y.result}catch(x){return l(i.ERROR,"Http response is not JSON: "+x),!1}}function hn(o,u){if(!(o>=200&&o<300))return l(i.ERROR,"Http response status code is not within the expected range: "+o),!1;try{var y=JSON.parse(u);return Object.prototype.toString.call(y)!=="[object Object]"&&!Array.isArray(y)?(l(i.ERROR,"Http response is not JSON Object nor JSON Array"),!1):!0}catch(x){return l(i.ERROR,"Http response is not JSON: "+x),!1}}function dn(){Ft=Math.max(Ft,window.scrollY,document.body.scrollTop,document.documentElement.scrollTop)}function Ni(){if(Mt){Mt=!1;var o=Oe(),u=d(),y=k();if(h.check_consent(t.SCROLLS)){var x={type:"scroll",y:Ft+y,width:u,height:o,view:h.getViewUrl()};x=ie(x,h.maxKeyLength,h.maxValueSize,h.maxSegmentationValues,"processScrollView",l),h.track_domains&&(x.domain=window.location.hostname),Ye({key:r.ACTION,segmentation:x})}}}function dr(){return Ae}function pn(o){ne("cly_token",o)}function pr(){var o=de("cly_token");return it("cly_token"),o}function gr(){return be}function mr(){return ge}function yr(o){for(var u=o+"=",y=document.cookie.split(";"),x=0,C=y.length;x<C;x++){for(var O=y[x];O.charAt(0)===" ";)O=O.substring(1,O.length);if(O.indexOf(u)===0)return O.substring(u.length,O.length)}return null}function gn(o,u,y){var x=new Date;x.setTime(x.getTime()+y*24*60*60*1e3);var C="; expires="+x.toGMTString();document.cookie=o+"="+u+C+"; path=/"}function de(o,u,y){if(h.storage==="none"){l(i.WARNING,"Storage is disabled. Value with key: "+o+" won't be retrieved");return}y||(o=h.app_key+"/"+o,h.namespace&&(o=j(h.namespace)+"/"+o)),u===void 0&&(u=_t);var x;return u?x=localStorage.getItem(o):h.storage!=="localstorage"&&(x=yr(o)),h.deserialize(x)}function ne(o,u,y,x){if(h.storage==="none"){l(i.WARNING,"Storage is disabled. Value with key: "+o+" won't be stored");return}x||(o=h.app_key+"/"+o,h.namespace&&(o=j(h.namespace)+"/"+o)),y===void 0&&(y=_t),typeof u<"u"&&u!==null&&(u=h.serialize(u),y?localStorage.setItem(o,u):h.storage!=="localstorage"&&gn(o,u,30))}function it(o,u,y){if(h.storage==="none"){l(i.WARNING,"Storage is disabled. Value with key: "+o+" won't be removed");return}y||(o=h.app_key+"/"+o,h.namespace&&(o=j(h.namespace)+"/"+o)),u===void 0&&(u=_t),u?localStorage.removeItem(o):h.storage!=="localstorage"&&gn(o,"",-1)}function wr(){if(de(h.namespace+"cly_id",!1,!0)){ne("cly_id",de(h.namespace+"cly_id",!1,!0)),ne("cly_id_type",de(h.namespace+"cly_id_type",!1,!0)),ne("cly_event",de(h.namespace+"cly_event",!1,!0)),ne("cly_session",de(h.namespace+"cly_session",!1,!0));var o=de(h.namespace+"cly_queue",!1,!0);Array.isArray(o)&&(o=o.filter(function(u){return u.app_key===h.app_key}),ne("cly_queue",o)),de(h.namespace+"cly_cmp_id",!1,!0)&&(ne("cly_cmp_id",de(h.namespace+"cly_cmp_id",!1,!0)),ne("cly_cmp_uid",de(h.namespace+"cly_cmp_uid",!1,!0))),de(h.namespace+"cly_ignore",!1,!0)&&ne("cly_ignore",de(h.namespace+"cly_ignore",!1,!0)),it("cly_id",!1,!0),it("cly_id_type",!1,!0),it("cly_event",!1,!0),it("cly_session",!1,!0),it("cly_queue",!1,!0),it("cly_cmp_id",!1,!0),it("cly_cmp_uid",!1,!0),it("cly_ignore",!1,!0)}}this.onStorageChange=function(o,u){switch(l(i.INFO,"onStorageChange, Applying storage changes"),o){case"cly_queue":ge=h.deserialize(u||"[]");break;case"cly_event":be=h.deserialize(u||"[]");break;case"cly_remote_configs":Ee=h.deserialize(u||"{}");break;case"cly_ignore":h.ignore_visitor=h.deserialize(u);break;case"cly_id":h.device_id=h.deserialize(u);break;case"cly_id_type":Ae=h.deserialize(u);break;default:}},this._internals={store:ne,getDocWidth:d,getDocHeight:Oe,getViewportHeight:k,get_page_coord:je,get_event_target:le,add_event:A,createNewObjectFromProperties:X,truncateObject:ie,truncateSingleValue:V,stripTrailingSlash:j,prepareParams:K,sendXmlHttpRequest:lt,isResponseValid:un,getInternalDeviceIdType:dr,getMsTimestamp:S,getTimestamp:T,isResponseValidBroad:hn,log:l,getMetrics:Yt,generateUUID:B,sendEventsForced:Ii,isUUID:hr,getId:Ti,heartBeat:Jt,toRequestQueue:Pe,reportViewDuration:Oi,loadJS:te,loadCSS:q,getLastView:ur,setToken:pn,getToken:pr,showLoader:ue,hideLoader:ye,setValueInStorage:ne,getValueFromStorage:de,removeValueFromStorage:it,add_cly_events:Ye,processScrollView:Ni,processScroll:dn,currentUserAgentString:xe,userAgentDeviceDetection:$e,userAgentSearchBotDetection:fe,getRequestQueue:mr,getEventQueue:gr,clearQueue:function(){ge=[],ne("cly_queue",[]),be=[],ne("cly_event",[])}},this.initialize()};e.CountlyClass=D,e.init=function(g){g=g||{};var h=g.app_key||e.app_key;if(!e.i||!e.i[h]){var Y=new e.CountlyClass(g);if(!e.i){e.i={};for(var Q in Y)e[Q]=Y[Q]}e.i[h]=Y}return e.i[h]};function w(g){var h=[];if(typeof g.options<"u")for(var Y=0;Y<g.options.length;Y++)g.options[Y].selected&&h.push(g.options[Y].value);return h.join(", ")}function B(){var g=new Date().getTime(),h="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(Y){var Q=(g+Math.random()*16)%16|0;return g=Math.floor(g/16),(Y==="x"?Q:Q&3|8).toString(16)});return h}function T(){return Math.floor(new Date().getTime()/1e3)}var M=0;function S(){var g=new Date().getTime();return M>=g?M++:M=g,M}function b(g,h,Y){if(h&&Object.keys(h).length){if(typeof h[g]<"u")return h[g]}else if(typeof e[g]<"u")return e[g];return Y}function F(g,h,Y){for(var Q in e.i)e.i[Q].tracking_crashes&&e.i[Q].recordError(g,h,Y)}function K(g){var h=[];for(var Y in g)h.push(Y+"="+encodeURIComponent(g[Y]));return h.join("&")}function j(g){return typeof g=="string"&&g.substring(g.length-1)==="/"?g.substring(0,g.length-1):g}function X(g,h){for(var Y={},Q,_e=0,Ie=h.length;_e<Ie;_e++)Q=h[_e],typeof g[Q]<"u"&&(Y[Q]=g[Q]);return Y}function z(g,h,Y){if(!!Y){for(var Q,_e=0,Ie=Y.length;_e<Ie;_e++)Q=Y[_e],typeof h[Q]<"u"&&(g[Q]=h[Q]);return g}}function ie(g,h,Y,Q,_e,Ie){var Te={};if(g){if(Object.keys(g).length>Q){var Me={},ge=0;for(var be in g)ge<Q&&(Me[be]=g[be],ge++);g=Me}for(var Ee in g){var Ue=V(Ee,h,_e,Ie),Je=V(g[Ee],Y,_e,Ie);Te[Ue]=Je}}return Te}function V(g,h,Y,Q){var _e=g;return typeof g=="number"&&(g=g.toString()),typeof g=="string"&&g.length>h&&(_e=g.substring(0,h),Q(i.DEBUG,Y+", Key: [ "+g+" ] is longer than accepted length. It will be truncated.")),_e}var Se=function(g,h){for(h=h.toUpperCase();g;){if(g.nodeName.toUpperCase()===h)return g;g=g.parentElement}},A=function(g,h,Y){typeof g.addEventListener<"u"?g.addEventListener(h,Y,!1):g.attachEvent("on"+h,Y)},le=function(g){return g?typeof g.target<"u"?g.target:g.srcElement:window.event.srcElement};function xe(g){if(g)return g;var h=navigator.userAgent;return h||navigator.userAgentData&&(h=navigator.userAgentData.brands.map(function(Y){return Y.brand+":"+Y.version}).join(),h+=navigator.userAgentData.mobile?" mobi ":" ",h+=navigator.userAgentData.platform),h}function $e(g){var h;if(g)h=g;else{if(navigator.userAgentData.mobile)return"phone";h=xe()}h=h.toLowerCase();var Y="desktop",Q=/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/,_e=/(mobi|ipod|phone|blackberry|opera mini|fennec|minimo|symbian|psp|nintendo ds|archos|skyfire|puffin|blazer|bolt|gobrowser|iris|maemo|semc|teashark|uzard)/;return Q.test(h)?Y="tablet":_e.test(h)&&(Y="phone"),Y}function fe(g){var h=/(CountlySiteBot|nuhk|Googlebot|GoogleSecurityScanner|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver|bingbot|Google Web Preview|Mediapartners-Google|AdsBot-Google|Baiduspider|Ezooms|YahooSeeker|AltaVista|AVSearch|Mercator|Scooter|InfoSeek|Ultraseek|Lycos|Wget|YandexBot|Yandex|YaDirectFetcher|SiteBot|Exabot|AhrefsBot|MJ12bot|TurnitinBot|magpie-crawler|Nutch Crawler|CMS Crawler|rogerbot|Domnutch|ssearch_bot|XoviBot|netseer|digincore|fr-crawler|wesee|AliasIO|contxbot|PingdomBot|BingPreview|HeadlessChrome)/;return h.test(g||xe())}function je(g){return typeof g.pageY>"u"&&typeof g.clientX=="number"&&document.documentElement&&(g.pageX=g.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,g.pageY=g.clientY+document.body.scrollTop+document.documentElement.scrollTop),g}function Oe(){var g=document;return Math.max(Math.max(g.body.scrollHeight,g.documentElement.scrollHeight),Math.max(g.body.offsetHeight,g.documentElement.offsetHeight),Math.max(g.body.clientHeight,g.documentElement.clientHeight))}function d(){var g=document;return Math.max(Math.max(g.body.scrollWidth,g.documentElement.scrollWidth),Math.max(g.body.offsetWidth,g.documentElement.offsetWidth),Math.max(g.body.clientWidth,g.documentElement.clientWidth))}function k(){var g=document;return Math.min(Math.min(g.body.clientHeight,g.documentElement.clientHeight),Math.min(g.body.offsetHeight,g.documentElement.offsetHeight),window.innerHeight)}function G(){return window.innerWidth>window.innerHeight?"landscape":"portrait"}window.addEventListener("storage",function(g){var h=(g.key+"").split("/"),Y=h.pop(),Q=h.pop();e.i&&e.i[Q]&&e.i[Q].onStorageChange(Y,g.newValue)});function ee(g,h,Y,Q,_e,Ie){var Te=document.createElement(g),Me;Te.setAttribute(h,Y),Te.setAttribute(Q,_e);var ge=function(){Me||Ie(),Me=!0};Ie&&(Te.onreadystatechange=ge,Te.onload=ge),document.getElementsByTagName("head")[0].appendChild(Te)}function te(g,h){ee("script","type","text/javascript","src",g,h)}function q(g,h){ee("link","rel","stylesheet","href",g,h)}function ue(){var g=document.getElementById("cly-loader");if(!g){var h="#cly-loader {height: 4px; width: 100%; position: absolute; z-index: 99999; overflow: hidden; background-color: #fff; top:0px; left:0px;}#cly-loader:before{display: block; position: absolute; content: ''; left: -200px; width: 200px; height: 4px; background-color: #2EB52B; animation: cly-loading 2s linear infinite;}@keyframes cly-loading { from {left: -200px; width: 30%;} 50% {width: 30%;} 70% {width: 70%;} 80% { left: 50%;} 95% {left: 120%;} to {left: 100%;}}",Y=document.head||document.getElementsByTagName("head")[0],Q=document.createElement("style");Q.type="text/css",Q.styleSheet?Q.styleSheet.cssText=h:Q.appendChild(document.createTextNode(h)),Y.appendChild(Q),g=document.createElement("div"),g.setAttribute("id","cly-loader"),document.body.onload=function(){if(!e.showLoaderProtection)try{document.body.appendChild(g)}catch{}}}g.style.display="block"}function ye(){e.showLoaderProtection=!0;var g=document.getElementById("cly-loader");g&&(g.style.display="none")}return e.serialize=function(g){return typeof g=="object"&&(g=JSON.stringify(g)),g},e.deserialize=function(g){try{g=JSON.parse(g)}catch{}return g},e.getViewName=function(){return window.location.pathname},e.getViewUrl=function(){return window.location.pathname},e.getSearchQuery=function(){return window.location.search},e.DeviceIdType={DEVELOPER_SUPPLIED:c.DEVELOPER_SUPPLIED,SDK_GENERATED:c.SDK_GENERATED,TEMPORARY_ID:c.TEMPORARY_ID},e})});function Ir(){var e=Object.create(null);e.ftp=21,e.file=0,e.gopher=70,e.http=80,e.https=443,e.ws=80,e.wss=443;var t=Object.create(null);t["%2e"]=".",t[".%2e"]="..",t["%2e."]="..",t["%2e%2e"]="..";function r(S){return e[S]!==void 0}function i(){B.call(this),this._isInvalid=!0}function c(S){return S==""&&i.call(this),S.toLowerCase()}function p(S){var b=S.charCodeAt(0);return b>32&&b<127&&[34,35,60,62,63,96].indexOf(b)==-1?S:encodeURIComponent(S)}function I(S){var b=S.charCodeAt(0);return b>32&&b<127&&[34,35,60,62,96].indexOf(b)==-1?S:encodeURIComponent(S)}var f=void 0,v=/[a-zA-Z]/,D=/[a-zA-Z0-9\+\-\.]/;function w(S,b,F){function K(k){Se.push(k)}var j=b||"scheme start",X=0,z="",ie=!1,V=!1,Se=[];e:for(;(S[X-1]!=f||X==0)&&!this._isInvalid;){var A=S[X];switch(j){case"scheme start":if(A&&v.test(A))z+=A.toLowerCase(),j="scheme";else if(b){K("Invalid scheme.");break e}else{z="",j="no scheme";continue}break;case"scheme":if(A&&D.test(A))z+=A.toLowerCase();else if(A==":"){if(this._scheme=z,z="",b)break e;r(this._scheme)&&(this._isRelative=!0),this._scheme=="file"?j="relative":this._isRelative&&F&&F._scheme==this._scheme?j="relative or authority":this._isRelative?j="authority first slash":j="scheme data"}else if(b){if(f==A)break e;K("Code point not allowed in scheme: "+A);break e}else{z="",X=0,j="no scheme";continue}break;case"scheme data":A=="?"?(this._query="?",j="query"):A=="#"?(this._fragment="#",j="fragment"):f!=A&&A!="	"&&A!=`
`&&A!="\r"&&(this._schemeData+=p(A));break;case"no scheme":if(!F||!r(F._scheme))K("Missing scheme."),i.call(this);else{j="relative";continue}break;case"relative or authority":if(A=="/"&&S[X+1]=="/")j="authority ignore slashes";else{K("Expected /, got: "+A),j="relative";continue}break;case"relative":if(this._isRelative=!0,this._scheme!="file"&&(this._scheme=F._scheme),f==A){this._host=F._host,this._port=F._port,this._path=F._path.slice(),this._query=F._query,this._username=F._username,this._password=F._password;break e}else if(A=="/"||A=="\\")A=="\\"&&K("\\ is an invalid code point."),j="relative slash";else if(A=="?")this._host=F._host,this._port=F._port,this._path=F._path.slice(),this._query="?",this._username=F._username,this._password=F._password,j="query";else if(A=="#")this._host=F._host,this._port=F._port,this._path=F._path.slice(),this._query=F._query,this._fragment="#",this._username=F._username,this._password=F._password,j="fragment";else{var le=S[X+1],xe=S[X+2];(this._scheme!="file"||!v.test(A)||le!=":"&&le!="|"||f!=xe&&xe!="/"&&xe!="\\"&&xe!="?"&&xe!="#")&&(this._host=F._host,this._port=F._port,this._username=F._username,this._password=F._password,this._path=F._path.slice(),this._path.pop()),j="relative path";continue}break;case"relative slash":if(A=="/"||A=="\\")A=="\\"&&K("\\ is an invalid code point."),this._scheme=="file"?j="file host":j="authority ignore slashes";else{this._scheme!="file"&&(this._host=F._host,this._port=F._port,this._username=F._username,this._password=F._password),j="relative path";continue}break;case"authority first slash":if(A=="/")j="authority second slash";else{K("Expected '/', got: "+A),j="authority ignore slashes";continue}break;case"authority second slash":if(j="authority ignore slashes",A!="/"){K("Expected '/', got: "+A);continue}break;case"authority ignore slashes":if(A!="/"&&A!="\\"){j="authority";continue}else K("Expected authority, got: "+A);break;case"authority":if(A=="@"){ie&&(K("@ already seen."),z+="%40"),ie=!0;for(var $e=0;$e<z.length;$e++){var fe=z[$e];if(fe=="	"||fe==`
`||fe=="\r"){K("Invalid whitespace in authority.");continue}if(fe==":"&&this._password===null){this._password="";continue}var je=p(fe);this._password!==null?this._password+=je:this._username+=je}z=""}else if(f==A||A=="/"||A=="\\"||A=="?"||A=="#"){X-=z.length,z="",j="host";continue}else z+=A;break;case"file host":if(f==A||A=="/"||A=="\\"||A=="?"||A=="#"){z.length==2&&v.test(z[0])&&(z[1]==":"||z[1]=="|")?j="relative path":(z.length==0||(this._host=c.call(this,z),z=""),j="relative path start");continue}else A=="	"||A==`
`||A=="\r"?K("Invalid whitespace in file host."):z+=A;break;case"host":case"hostname":if(A==":"&&!V){if(this._host=c.call(this,z),z="",j="port",b=="hostname")break e}else if(f==A||A=="/"||A=="\\"||A=="?"||A=="#"){if(this._host=c.call(this,z),z="",j="relative path start",b)break e;continue}else A!="	"&&A!=`
`&&A!="\r"?(A=="["?V=!0:A=="]"&&(V=!1),z+=A):K("Invalid code point in host/hostname: "+A);break;case"port":if(/[0-9]/.test(A))z+=A;else if(f==A||A=="/"||A=="\\"||A=="?"||A=="#"||b){if(z!=""){var Oe=parseInt(z,10);Oe!=e[this._scheme]&&(this._port=Oe+""),z=""}if(b)break e;j="relative path start";continue}else A=="	"||A==`
`||A=="\r"?K("Invalid code point in port: "+A):i.call(this);break;case"relative path start":if(A=="\\"&&K("'\\' not allowed in path."),j="relative path",A!="/"&&A!="\\")continue;break;case"relative path":if(f==A||A=="/"||A=="\\"||!b&&(A=="?"||A=="#")){A=="\\"&&K("\\ not allowed in relative path.");var d;(d=t[z.toLowerCase()])&&(z=d),z==".."?(this._path.pop(),A!="/"&&A!="\\"&&this._path.push("")):z=="."&&A!="/"&&A!="\\"?this._path.push(""):z!="."&&(this._scheme=="file"&&this._path.length==0&&z.length==2&&v.test(z[0])&&z[1]=="|"&&(z=z[0]+":"),this._path.push(z)),z="",A=="?"?(this._query="?",j="query"):A=="#"&&(this._fragment="#",j="fragment")}else A!="	"&&A!=`
`&&A!="\r"&&(z+=p(A));break;case"query":!b&&A=="#"?(this._fragment="#",j="fragment"):f!=A&&A!="	"&&A!=`
`&&A!="\r"&&(this._query+=I(A));break;case"fragment":f!=A&&A!="	"&&A!=`
`&&A!="\r"&&(this._fragment+=A);break}X++}}function B(){this._scheme="",this._schemeData="",this._username="",this._password=null,this._host="",this._port="",this._path=[],this._query="",this._fragment="",this._isInvalid=!1,this._isRelative=!1}function T(S,b){b!==void 0&&!(b instanceof T)&&(b=new T(String(b))),S=String(S),this._url=S,B.call(this);var F=S.replace(/^[ \t\r\n\f]+|[ \t\r\n\f]+$/g,"");w.call(this,F,null,b)}T.prototype={toString:function(){return this.href},get href(){if(this._isInvalid)return this._url;var S="";return(this._username!=""||this._password!=null)&&(S=this._username+(this._password!=null?":"+this._password:"")+"@"),this.protocol+(this._isRelative?"//"+S+this.host:"")+this.pathname+this._query+this._fragment},set href(S){B.call(this),w.call(this,S)},get protocol(){return this._scheme+":"},set protocol(S){this._isInvalid||w.call(this,S+":","scheme start")},get host(){return this._isInvalid?"":this._port?this._host+":"+this._port:this._host},set host(S){this._isInvalid||!this._isRelative||w.call(this,S,"host")},get hostname(){return this._host},set hostname(S){this._isInvalid||!this._isRelative||w.call(this,S,"hostname")},get port(){return this._port},set port(S){this._isInvalid||!this._isRelative||w.call(this,S,"port")},get pathname(){return this._isInvalid?"":this._isRelative?"/"+this._path.join("/"):this._schemeData},set pathname(S){this._isInvalid||!this._isRelative||(this._path=[],w.call(this,S,"relative path start"))},get search(){return this._isInvalid||!this._query||this._query=="?"?"":this._query},set search(S){this._isInvalid||!this._isRelative||(this._query="?",S[0]=="?"&&(S=S.slice(1)),w.call(this,S,"query"))},get hash(){return this._isInvalid||!this._fragment||this._fragment=="#"?"":this._fragment},set hash(S){this._isInvalid||(this._fragment="#",S[0]=="#"&&(S=S.slice(1)),w.call(this,S,"fragment"))},get origin(){var S;if(this._isInvalid||!this._scheme)return"";switch(this._scheme){case"data":case"file":case"javascript":case"mailto":return"null"}return S=this.host,S?this._scheme+"://"+S:""}};var M=self.URL;return M&&(T.createObjectURL=function(S){return M.createObjectURL.apply(M,arguments)},T.revokeObjectURL=function(S){M.revokeObjectURL(S)}),T}var Qe=Ir();var En=Qt(Zt());var Ze=class{constructor(t="div",r=void 0,i="\u{1F551}"){let c=document.createElement(t);this.element=c,r!=null&&(this.className=r),this.textContent=i}static fromElement(t){let r=new Ze("div");return r.element=t,r}asterisk(){this.textContent="*"}lose(){this.textContent="\u274C"}win(t){if(t!=null){this.textContent="";let r=document.createElement("a");r.href=t,r.target="_blank",r.textContent="\u2705",this.element.title=t,this.element.appendChild(r)}else this.textContent="\u2705"}global(){this.textContent="\u{1F30D}"}err(){this.textContent="\u26A0\uFE0F"}empty(){this.textContent=""}get style(){return this.element.style}append(t){return t instanceof Ze&&(t=t.element),this.element.append(t)}get classList(){return this.element.classList}set title(t){this.element.title=t}set className(t){this.element.className=t}set textContent(t){this.element.textContent=t}};var We=class{constructor(t,...r){this.parent=t;this.tag=new Ze(...r)}};var ut=class extends We{constructor(r,...i){super(r,...i);this.parent=r;this._className="Not-set";this._tagName="Not-set"}get className(){return this._className}get tagName(){return this._tagName}check(){}checked(){}onerror(){this.tag.err()}};var _n="Hello from IPFS Gateway Checker",ft="bafybeifx7yeb55armcsxwwitkymga5xf53dxiarykms3ygqic223w5sk3m",ht="bafybeibwzifw52ttrkqlikfzext5akxu7lz4xiwjgwzmqcpdzmp3n5vnbe",vn="/ipns/en.wikipedia-on-ipfs.org/favicon.ico",Di=["raw","car"],bn="https://ipfs.io";var Re=class{constructor(t){this.namespace=t}log(t,...r){let[i,...c]=r,p=this.namespace!=null?`${this.namespace}.${t}: `:"";console[t](`${p}${i}`,...c)}debug(...t){this.log("debug",...t)}info(...t){this.log("info",...t)}warn(...t){this.log("warn",...t)}error(...t){this.log("error",...t)}};var{fetch:Ar}=(0,En.default)(),Li=new Re("Cors"),ei=class extends ut{constructor(r){super(r,"div","Cors");this.parent=r;this._className="Cors";this._tagName="div"}async check(){let r=Date.now(),c=`${this.parent.gateway.replace(":hash",ft)}?now=${r}#x-ipfs-companion-no-redirect`;try{let p=await Ar(c),{status:I}=p,f=await p.text();if(this.tag.title=`Response code: ${I}`,_n===f.trim())this.tag.asterisk(),this.parent.tag.classList.add("cors");else throw Li.debug("The response text did not match the expected string"),this.onerror(),new Error(`URL '${c} does not support CORS`)}catch(p){throw Li.error(p),this.onerror(),p}}checked(){Li.warn("Not implemented yet")}onerror(){this.tag.empty()}};var Or=Object.create,Tn=Object.defineProperty,xr=Object.getOwnPropertyDescriptor,Tr=Object.getOwnPropertyNames,Nr=Object.getPrototypeOf,Br=Object.prototype.hasOwnProperty,Tt=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Dr=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let c of Tr(t))!Br.call(e,c)&&c!==r&&Tn(e,c,{get:()=>t[c],enumerable:!(i=xr(t,c))||i.enumerable});return e},Nn=(e,t,r)=>(r=e!=null?Or(Nr(e)):{},Dr(t||!e||!e.__esModule?Tn(r,"default",{value:e,enumerable:!0}):r,e)),Lr=Tt(e=>{"use strict";e.byteLength=v,e.toByteArray=w,e.fromByteArray=M;var t=[],r=[],i=typeof Uint8Array<"u"?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(p=0,I=c.length;p<I;++p)t[p]=c[p],r[c.charCodeAt(p)]=p;var p,I;r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63;function f(S){var b=S.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var F=S.indexOf("=");F===-1&&(F=b);var K=F===b?0:4-F%4;return[F,K]}function v(S){var b=f(S),F=b[0],K=b[1];return(F+K)*3/4-K}function D(S,b,F){return(b+F)*3/4-F}function w(S){var b,F=f(S),K=F[0],j=F[1],X=new i(D(S,K,j)),z=0,ie=j>0?K-4:K,V;for(V=0;V<ie;V+=4)b=r[S.charCodeAt(V)]<<18|r[S.charCodeAt(V+1)]<<12|r[S.charCodeAt(V+2)]<<6|r[S.charCodeAt(V+3)],X[z++]=b>>16&255,X[z++]=b>>8&255,X[z++]=b&255;return j===2&&(b=r[S.charCodeAt(V)]<<2|r[S.charCodeAt(V+1)]>>4,X[z++]=b&255),j===1&&(b=r[S.charCodeAt(V)]<<10|r[S.charCodeAt(V+1)]<<4|r[S.charCodeAt(V+2)]>>2,X[z++]=b>>8&255,X[z++]=b&255),X}function B(S){return t[S>>18&63]+t[S>>12&63]+t[S>>6&63]+t[S&63]}function T(S,b,F){for(var K,j=[],X=b;X<F;X+=3)K=(S[X]<<16&16711680)+(S[X+1]<<8&65280)+(S[X+2]&255),j.push(B(K));return j.join("")}function M(S){for(var b,F=S.length,K=F%3,j=[],X=16383,z=0,ie=F-K;z<ie;z+=X)j.push(T(S,z,z+X>ie?ie:z+X));return K===1?(b=S[F-1],j.push(t[b>>2]+t[b<<4&63]+"==")):K===2&&(b=(S[F-2]<<8)+S[F-1],j.push(t[b>>10]+t[b>>4&63]+t[b<<2&63]+"=")),j.join("")}}),Ur=Tt(e=>{e.read=function(t,r,i,c,p){var I,f,v=p*8-c-1,D=(1<<v)-1,w=D>>1,B=-7,T=i?p-1:0,M=i?-1:1,S=t[r+T];for(T+=M,I=S&(1<<-B)-1,S>>=-B,B+=v;B>0;I=I*256+t[r+T],T+=M,B-=8);for(f=I&(1<<-B)-1,I>>=-B,B+=c;B>0;f=f*256+t[r+T],T+=M,B-=8);if(I===0)I=1-w;else{if(I===D)return f?NaN:(S?-1:1)*(1/0);f=f+Math.pow(2,c),I=I-w}return(S?-1:1)*f*Math.pow(2,I-c)},e.write=function(t,r,i,c,p,I){var f,v,D,w=I*8-p-1,B=(1<<w)-1,T=B>>1,M=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,S=c?0:I-1,b=c?1:-1,F=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(v=isNaN(r)?1:0,f=B):(f=Math.floor(Math.log(r)/Math.LN2),r*(D=Math.pow(2,-f))<1&&(f--,D*=2),f+T>=1?r+=M/D:r+=M*Math.pow(2,1-T),r*D>=2&&(f++,D/=2),f+T>=B?(v=0,f=B):f+T>=1?(v=(r*D-1)*Math.pow(2,p),f=f+T):(v=r*Math.pow(2,T-1)*Math.pow(2,p),f=0));p>=8;t[i+S]=v&255,S+=b,v/=256,p-=8);for(f=f<<p|v,w+=p;w>0;t[i+S]=f&255,S+=b,f/=256,w-=8);t[i+S-b]|=F*128}}),Cr=Tt(e=>{"use strict";var t=Lr(),r=Ur(),i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=f,e.SlowBuffer=j,e.INSPECT_MAX_BYTES=50;var c=2147483647;e.kMaxLength=c,f.TYPED_ARRAY_SUPPORT=p(),!f.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function p(){try{let n=new Uint8Array(1),s={foo:function(){return 42}};return Object.setPrototypeOf(s,Uint8Array.prototype),Object.setPrototypeOf(n,s),n.foo()===42}catch{return!1}}Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}});function I(n){if(n>c)throw new RangeError('The value "'+n+'" is invalid for option "size"');let s=new Uint8Array(n);return Object.setPrototypeOf(s,f.prototype),s}function f(n,s,a){if(typeof n=="number"){if(typeof s=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return B(n)}return v(n,s,a)}f.poolSize=8192;function v(n,s,a){if(typeof n=="string")return T(n,s);if(ArrayBuffer.isView(n))return S(n);if(n==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof n);if(De(n,ArrayBuffer)||n&&De(n.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(De(n,SharedArrayBuffer)||n&&De(n.buffer,SharedArrayBuffer)))return b(n,s,a);if(typeof n=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let m=n.valueOf&&n.valueOf();if(m!=null&&m!==n)return f.from(m,s,a);let E=F(n);if(E)return E;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof n[Symbol.toPrimitive]=="function")return f.from(n[Symbol.toPrimitive]("string"),s,a);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof n)}f.from=function(n,s,a){return v(n,s,a)},Object.setPrototypeOf(f.prototype,Uint8Array.prototype),Object.setPrototypeOf(f,Uint8Array);function D(n){if(typeof n!="number")throw new TypeError('"size" argument must be of type number');if(n<0)throw new RangeError('The value "'+n+'" is invalid for option "size"')}function w(n,s,a){return D(n),n<=0?I(n):s!==void 0?typeof a=="string"?I(n).fill(s,a):I(n).fill(s):I(n)}f.alloc=function(n,s,a){return w(n,s,a)};function B(n){return D(n),I(n<0?0:K(n)|0)}f.allocUnsafe=function(n){return B(n)},f.allocUnsafeSlow=function(n){return B(n)};function T(n,s){if((typeof s!="string"||s==="")&&(s="utf8"),!f.isEncoding(s))throw new TypeError("Unknown encoding: "+s);let a=X(n,s)|0,m=I(a),E=m.write(n,s);return E!==a&&(m=m.slice(0,E)),m}function M(n){let s=n.length<0?0:K(n.length)|0,a=I(s);for(let m=0;m<s;m+=1)a[m]=n[m]&255;return a}function S(n){if(De(n,Uint8Array)){let s=new Uint8Array(n);return b(s.buffer,s.byteOffset,s.byteLength)}return M(n)}function b(n,s,a){if(s<0||n.byteLength<s)throw new RangeError('"offset" is outside of buffer bounds');if(n.byteLength<s+(a||0))throw new RangeError('"length" is outside of buffer bounds');let m;return s===void 0&&a===void 0?m=new Uint8Array(n):a===void 0?m=new Uint8Array(n,s):m=new Uint8Array(n,s,a),Object.setPrototypeOf(m,f.prototype),m}function F(n){if(f.isBuffer(n)){let s=K(n.length)|0,a=I(s);return a.length===0||n.copy(a,0,0,s),a}if(n.length!==void 0)return typeof n.length!="number"||st(n.length)?I(0):M(n);if(n.type==="Buffer"&&Array.isArray(n.data))return M(n.data)}function K(n){if(n>=c)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+c.toString(16)+" bytes");return n|0}function j(n){return+n!=n&&(n=0),f.alloc(+n)}f.isBuffer=function(n){return n!=null&&n._isBuffer===!0&&n!==f.prototype},f.compare=function(n,s){if(De(n,Uint8Array)&&(n=f.from(n,n.offset,n.byteLength)),De(s,Uint8Array)&&(s=f.from(s,s.offset,s.byteLength)),!f.isBuffer(n)||!f.isBuffer(s))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(n===s)return 0;let a=n.length,m=s.length;for(let E=0,N=Math.min(a,m);E<N;++E)if(n[E]!==s[E]){a=n[E],m=s[E];break}return a<m?-1:m<a?1:0},f.isEncoding=function(n){switch(String(n).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(n,s){if(!Array.isArray(n))throw new TypeError('"list" argument must be an Array of Buffers');if(n.length===0)return f.alloc(0);let a;if(s===void 0)for(s=0,a=0;a<n.length;++a)s+=n[a].length;let m=f.allocUnsafe(s),E=0;for(a=0;a<n.length;++a){let N=n[a];if(De(N,Uint8Array))E+N.length>m.length?(f.isBuffer(N)||(N=f.from(N)),N.copy(m,E)):Uint8Array.prototype.set.call(m,N,E);else if(f.isBuffer(N))N.copy(m,E);else throw new TypeError('"list" argument must be an Array of Buffers');E+=N.length}return m};function X(n,s){if(f.isBuffer(n))return n.length;if(ArrayBuffer.isView(n)||De(n,ArrayBuffer))return n.byteLength;if(typeof n!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof n);let a=n.length,m=arguments.length>2&&arguments[2]===!0;if(!m&&a===0)return 0;let E=!1;for(;;)switch(s){case"ascii":case"latin1":case"binary":return a;case"utf8":case"utf-8":return mt(n).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return a*2;case"hex":return a>>>1;case"base64":return Ot(n).length;default:if(E)return m?-1:mt(n).length;s=(""+s).toLowerCase(),E=!0}}f.byteLength=X;function z(n,s,a){let m=!1;if((s===void 0||s<0)&&(s=0),s>this.length||((a===void 0||a>this.length)&&(a=this.length),a<=0)||(a>>>=0,s>>>=0,a<=s))return"";for(n||(n="utf8");;)switch(n){case"hex":return te(this,s,a);case"utf8":case"utf-8":return Oe(this,s,a);case"ascii":return G(this,s,a);case"latin1":case"binary":return ee(this,s,a);case"base64":return je(this,s,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q(this,s,a);default:if(m)throw new TypeError("Unknown encoding: "+n);n=(n+"").toLowerCase(),m=!0}}f.prototype._isBuffer=!0;function ie(n,s,a){let m=n[s];n[s]=n[a],n[a]=m}f.prototype.swap16=function(){let n=this.length;if(n%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let s=0;s<n;s+=2)ie(this,s,s+1);return this},f.prototype.swap32=function(){let n=this.length;if(n%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let s=0;s<n;s+=4)ie(this,s,s+3),ie(this,s+1,s+2);return this},f.prototype.swap64=function(){let n=this.length;if(n%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let s=0;s<n;s+=8)ie(this,s,s+7),ie(this,s+1,s+6),ie(this,s+2,s+5),ie(this,s+3,s+4);return this},f.prototype.toString=function(){let n=this.length;return n===0?"":arguments.length===0?Oe(this,0,n):z.apply(this,arguments)},f.prototype.toLocaleString=f.prototype.toString,f.prototype.equals=function(n){if(!f.isBuffer(n))throw new TypeError("Argument must be a Buffer");return this===n?!0:f.compare(this,n)===0},f.prototype.inspect=function(){let n="",s=e.INSPECT_MAX_BYTES;return n=this.toString("hex",0,s).replace(/(.{2})/g,"$1 ").trim(),this.length>s&&(n+=" ... "),"<Buffer "+n+">"},i&&(f.prototype[i]=f.prototype.inspect),f.prototype.compare=function(n,s,a,m,E){if(De(n,Uint8Array)&&(n=f.from(n,n.offset,n.byteLength)),!f.isBuffer(n))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof n);if(s===void 0&&(s=0),a===void 0&&(a=n?n.length:0),m===void 0&&(m=0),E===void 0&&(E=this.length),s<0||a>n.length||m<0||E>this.length)throw new RangeError("out of range index");if(m>=E&&s>=a)return 0;if(m>=E)return-1;if(s>=a)return 1;if(s>>>=0,a>>>=0,m>>>=0,E>>>=0,this===n)return 0;let N=E-m,P=a-s,he=Math.min(N,P),re=this.slice(m,E),se=n.slice(s,a);for(let ae=0;ae<he;++ae)if(re[ae]!==se[ae]){N=re[ae],P=se[ae];break}return N<P?-1:P<N?1:0};function V(n,s,a,m,E){if(n.length===0)return-1;if(typeof a=="string"?(m=a,a=0):a>2147483647?a=2147483647:a<-2147483648&&(a=-2147483648),a=+a,st(a)&&(a=E?0:n.length-1),a<0&&(a=n.length+a),a>=n.length){if(E)return-1;a=n.length-1}else if(a<0)if(E)a=0;else return-1;if(typeof s=="string"&&(s=f.from(s,m)),f.isBuffer(s))return s.length===0?-1:Se(n,s,a,m,E);if(typeof s=="number")return s=s&255,typeof Uint8Array.prototype.indexOf=="function"?E?Uint8Array.prototype.indexOf.call(n,s,a):Uint8Array.prototype.lastIndexOf.call(n,s,a):Se(n,[s],a,m,E);throw new TypeError("val must be string, number or Buffer")}function Se(n,s,a,m,E){let N=1,P=n.length,he=s.length;if(m!==void 0&&(m=String(m).toLowerCase(),m==="ucs2"||m==="ucs-2"||m==="utf16le"||m==="utf-16le")){if(n.length<2||s.length<2)return-1;N=2,P/=2,he/=2,a/=2}function re(ae,ke){return N===1?ae[ke]:ae.readUInt16BE(ke*N)}let se;if(E){let ae=-1;for(se=a;se<P;se++)if(re(n,se)===re(s,ae===-1?0:se-ae)){if(ae===-1&&(ae=se),se-ae+1===he)return ae*N}else ae!==-1&&(se-=se-ae),ae=-1}else for(a+he>P&&(a=P-he),se=a;se>=0;se--){let ae=!0;for(let ke=0;ke<he;ke++)if(re(n,se+ke)!==re(s,ke)){ae=!1;break}if(ae)return se}return-1}f.prototype.includes=function(n,s,a){return this.indexOf(n,s,a)!==-1},f.prototype.indexOf=function(n,s,a){return V(this,n,s,a,!0)},f.prototype.lastIndexOf=function(n,s,a){return V(this,n,s,a,!1)};function A(n,s,a,m){a=Number(a)||0;let E=n.length-a;m?(m=Number(m),m>E&&(m=E)):m=E;let N=s.length;m>N/2&&(m=N/2);let P;for(P=0;P<m;++P){let he=parseInt(s.substr(P*2,2),16);if(st(he))return P;n[a+P]=he}return P}function le(n,s,a,m){return Ce(mt(s,n.length-a),n,a,m)}function xe(n,s,a,m){return Ce(yt(s),n,a,m)}function $e(n,s,a,m){return Ce(Ot(s),n,a,m)}function fe(n,s,a,m){return Ce(ot(s,n.length-a),n,a,m)}f.prototype.write=function(n,s,a,m){if(s===void 0)m="utf8",a=this.length,s=0;else if(a===void 0&&typeof s=="string")m=s,a=this.length,s=0;else if(isFinite(s))s=s>>>0,isFinite(a)?(a=a>>>0,m===void 0&&(m="utf8")):(m=a,a=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let E=this.length-s;if((a===void 0||a>E)&&(a=E),n.length>0&&(a<0||s<0)||s>this.length)throw new RangeError("Attempt to write outside buffer bounds");m||(m="utf8");let N=!1;for(;;)switch(m){case"hex":return A(this,n,s,a);case"utf8":case"utf-8":return le(this,n,s,a);case"ascii":case"latin1":case"binary":return xe(this,n,s,a);case"base64":return $e(this,n,s,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return fe(this,n,s,a);default:if(N)throw new TypeError("Unknown encoding: "+m);m=(""+m).toLowerCase(),N=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function je(n,s,a){return s===0&&a===n.length?t.fromByteArray(n):t.fromByteArray(n.slice(s,a))}function Oe(n,s,a){a=Math.min(n.length,a);let m=[],E=s;for(;E<a;){let N=n[E],P=null,he=N>239?4:N>223?3:N>191?2:1;if(E+he<=a){let re,se,ae,ke;switch(he){case 1:N<128&&(P=N);break;case 2:re=n[E+1],(re&192)===128&&(ke=(N&31)<<6|re&63,ke>127&&(P=ke));break;case 3:re=n[E+1],se=n[E+2],(re&192)===128&&(se&192)===128&&(ke=(N&15)<<12|(re&63)<<6|se&63,ke>2047&&(ke<55296||ke>57343)&&(P=ke));break;case 4:re=n[E+1],se=n[E+2],ae=n[E+3],(re&192)===128&&(se&192)===128&&(ae&192)===128&&(ke=(N&15)<<18|(re&63)<<12|(se&63)<<6|ae&63,ke>65535&&ke<1114112&&(P=ke))}}P===null?(P=65533,he=1):P>65535&&(P-=65536,m.push(P>>>10&1023|55296),P=56320|P&1023),m.push(P),E+=he}return k(m)}var d=4096;function k(n){let s=n.length;if(s<=d)return String.fromCharCode.apply(String,n);let a="",m=0;for(;m<s;)a+=String.fromCharCode.apply(String,n.slice(m,m+=d));return a}function G(n,s,a){let m="";a=Math.min(n.length,a);for(let E=s;E<a;++E)m+=String.fromCharCode(n[E]&127);return m}function ee(n,s,a){let m="";a=Math.min(n.length,a);for(let E=s;E<a;++E)m+=String.fromCharCode(n[E]);return m}function te(n,s,a){let m=n.length;(!s||s<0)&&(s=0),(!a||a<0||a>m)&&(a=m);let E="";for(let N=s;N<a;++N)E+=Pt[n[N]];return E}function q(n,s,a){let m=n.slice(s,a),E="";for(let N=0;N<m.length-1;N+=2)E+=String.fromCharCode(m[N]+m[N+1]*256);return E}f.prototype.slice=function(n,s){let a=this.length;n=~~n,s=s===void 0?a:~~s,n<0?(n+=a,n<0&&(n=0)):n>a&&(n=a),s<0?(s+=a,s<0&&(s=0)):s>a&&(s=a),s<n&&(s=n);let m=this.subarray(n,s);return Object.setPrototypeOf(m,f.prototype),m};function ue(n,s,a){if(n%1!==0||n<0)throw new RangeError("offset is not uint");if(n+s>a)throw new RangeError("Trying to access beyond buffer length")}f.prototype.readUintLE=f.prototype.readUIntLE=function(n,s,a){n=n>>>0,s=s>>>0,a||ue(n,s,this.length);let m=this[n],E=1,N=0;for(;++N<s&&(E*=256);)m+=this[n+N]*E;return m},f.prototype.readUintBE=f.prototype.readUIntBE=function(n,s,a){n=n>>>0,s=s>>>0,a||ue(n,s,this.length);let m=this[n+--s],E=1;for(;s>0&&(E*=256);)m+=this[n+--s]*E;return m},f.prototype.readUint8=f.prototype.readUInt8=function(n,s){return n=n>>>0,s||ue(n,1,this.length),this[n]},f.prototype.readUint16LE=f.prototype.readUInt16LE=function(n,s){return n=n>>>0,s||ue(n,2,this.length),this[n]|this[n+1]<<8},f.prototype.readUint16BE=f.prototype.readUInt16BE=function(n,s){return n=n>>>0,s||ue(n,2,this.length),this[n]<<8|this[n+1]},f.prototype.readUint32LE=f.prototype.readUInt32LE=function(n,s){return n=n>>>0,s||ue(n,4,this.length),(this[n]|this[n+1]<<8|this[n+2]<<16)+this[n+3]*16777216},f.prototype.readUint32BE=f.prototype.readUInt32BE=function(n,s){return n=n>>>0,s||ue(n,4,this.length),this[n]*16777216+(this[n+1]<<16|this[n+2]<<8|this[n+3])},f.prototype.readBigUInt64LE=Fe(function(n){n=n>>>0,Ee(n,"offset");let s=this[n],a=this[n+7];(s===void 0||a===void 0)&&Ue(n,this.length-8);let m=s+this[++n]*2**8+this[++n]*2**16+this[++n]*2**24,E=this[++n]+this[++n]*2**8+this[++n]*2**16+a*2**24;return BigInt(m)+(BigInt(E)<<BigInt(32))}),f.prototype.readBigUInt64BE=Fe(function(n){n=n>>>0,Ee(n,"offset");let s=this[n],a=this[n+7];(s===void 0||a===void 0)&&Ue(n,this.length-8);let m=s*2**24+this[++n]*2**16+this[++n]*2**8+this[++n],E=this[++n]*2**24+this[++n]*2**16+this[++n]*2**8+a;return(BigInt(m)<<BigInt(32))+BigInt(E)}),f.prototype.readIntLE=function(n,s,a){n=n>>>0,s=s>>>0,a||ue(n,s,this.length);let m=this[n],E=1,N=0;for(;++N<s&&(E*=256);)m+=this[n+N]*E;return E*=128,m>=E&&(m-=Math.pow(2,8*s)),m},f.prototype.readIntBE=function(n,s,a){n=n>>>0,s=s>>>0,a||ue(n,s,this.length);let m=s,E=1,N=this[n+--m];for(;m>0&&(E*=256);)N+=this[n+--m]*E;return E*=128,N>=E&&(N-=Math.pow(2,8*s)),N},f.prototype.readInt8=function(n,s){return n=n>>>0,s||ue(n,1,this.length),this[n]&128?(255-this[n]+1)*-1:this[n]},f.prototype.readInt16LE=function(n,s){n=n>>>0,s||ue(n,2,this.length);let a=this[n]|this[n+1]<<8;return a&32768?a|4294901760:a},f.prototype.readInt16BE=function(n,s){n=n>>>0,s||ue(n,2,this.length);let a=this[n+1]|this[n]<<8;return a&32768?a|4294901760:a},f.prototype.readInt32LE=function(n,s){return n=n>>>0,s||ue(n,4,this.length),this[n]|this[n+1]<<8|this[n+2]<<16|this[n+3]<<24},f.prototype.readInt32BE=function(n,s){return n=n>>>0,s||ue(n,4,this.length),this[n]<<24|this[n+1]<<16|this[n+2]<<8|this[n+3]},f.prototype.readBigInt64LE=Fe(function(n){n=n>>>0,Ee(n,"offset");let s=this[n],a=this[n+7];(s===void 0||a===void 0)&&Ue(n,this.length-8);let m=this[n+4]+this[n+5]*2**8+this[n+6]*2**16+(a<<24);return(BigInt(m)<<BigInt(32))+BigInt(s+this[++n]*2**8+this[++n]*2**16+this[++n]*2**24)}),f.prototype.readBigInt64BE=Fe(function(n){n=n>>>0,Ee(n,"offset");let s=this[n],a=this[n+7];(s===void 0||a===void 0)&&Ue(n,this.length-8);let m=(s<<24)+this[++n]*2**16+this[++n]*2**8+this[++n];return(BigInt(m)<<BigInt(32))+BigInt(this[++n]*2**24+this[++n]*2**16+this[++n]*2**8+a)}),f.prototype.readFloatLE=function(n,s){return n=n>>>0,s||ue(n,4,this.length),r.read(this,n,!0,23,4)},f.prototype.readFloatBE=function(n,s){return n=n>>>0,s||ue(n,4,this.length),r.read(this,n,!1,23,4)},f.prototype.readDoubleLE=function(n,s){return n=n>>>0,s||ue(n,8,this.length),r.read(this,n,!0,52,8)},f.prototype.readDoubleBE=function(n,s){return n=n>>>0,s||ue(n,8,this.length),r.read(this,n,!1,52,8)};function ye(n,s,a,m,E,N){if(!f.isBuffer(n))throw new TypeError('"buffer" argument must be a Buffer instance');if(s>E||s<N)throw new RangeError('"value" argument is out of bounds');if(a+m>n.length)throw new RangeError("Index out of range")}f.prototype.writeUintLE=f.prototype.writeUIntLE=function(n,s,a,m){if(n=+n,s=s>>>0,a=a>>>0,!m){let P=Math.pow(2,8*a)-1;ye(this,n,s,a,P,0)}let E=1,N=0;for(this[s]=n&255;++N<a&&(E*=256);)this[s+N]=n/E&255;return s+a},f.prototype.writeUintBE=f.prototype.writeUIntBE=function(n,s,a,m){if(n=+n,s=s>>>0,a=a>>>0,!m){let P=Math.pow(2,8*a)-1;ye(this,n,s,a,P,0)}let E=a-1,N=1;for(this[s+E]=n&255;--E>=0&&(N*=256);)this[s+E]=n/N&255;return s+a},f.prototype.writeUint8=f.prototype.writeUInt8=function(n,s,a){return n=+n,s=s>>>0,a||ye(this,n,s,1,255,0),this[s]=n&255,s+1},f.prototype.writeUint16LE=f.prototype.writeUInt16LE=function(n,s,a){return n=+n,s=s>>>0,a||ye(this,n,s,2,65535,0),this[s]=n&255,this[s+1]=n>>>8,s+2},f.prototype.writeUint16BE=f.prototype.writeUInt16BE=function(n,s,a){return n=+n,s=s>>>0,a||ye(this,n,s,2,65535,0),this[s]=n>>>8,this[s+1]=n&255,s+2},f.prototype.writeUint32LE=f.prototype.writeUInt32LE=function(n,s,a){return n=+n,s=s>>>0,a||ye(this,n,s,4,4294967295,0),this[s+3]=n>>>24,this[s+2]=n>>>16,this[s+1]=n>>>8,this[s]=n&255,s+4},f.prototype.writeUint32BE=f.prototype.writeUInt32BE=function(n,s,a){return n=+n,s=s>>>0,a||ye(this,n,s,4,4294967295,0),this[s]=n>>>24,this[s+1]=n>>>16,this[s+2]=n>>>8,this[s+3]=n&255,s+4};function g(n,s,a,m,E){be(s,m,E,n,a,7);let N=Number(s&BigInt(4294967295));n[a++]=N,N=N>>8,n[a++]=N,N=N>>8,n[a++]=N,N=N>>8,n[a++]=N;let P=Number(s>>BigInt(32)&BigInt(4294967295));return n[a++]=P,P=P>>8,n[a++]=P,P=P>>8,n[a++]=P,P=P>>8,n[a++]=P,a}function h(n,s,a,m,E){be(s,m,E,n,a,7);let N=Number(s&BigInt(4294967295));n[a+7]=N,N=N>>8,n[a+6]=N,N=N>>8,n[a+5]=N,N=N>>8,n[a+4]=N;let P=Number(s>>BigInt(32)&BigInt(4294967295));return n[a+3]=P,P=P>>8,n[a+2]=P,P=P>>8,n[a+1]=P,P=P>>8,n[a]=P,a+8}f.prototype.writeBigUInt64LE=Fe(function(n,s=0){return g(this,n,s,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeBigUInt64BE=Fe(function(n,s=0){return h(this,n,s,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeIntLE=function(n,s,a,m){if(n=+n,s=s>>>0,!m){let he=Math.pow(2,8*a-1);ye(this,n,s,a,he-1,-he)}let E=0,N=1,P=0;for(this[s]=n&255;++E<a&&(N*=256);)n<0&&P===0&&this[s+E-1]!==0&&(P=1),this[s+E]=(n/N>>0)-P&255;return s+a},f.prototype.writeIntBE=function(n,s,a,m){if(n=+n,s=s>>>0,!m){let he=Math.pow(2,8*a-1);ye(this,n,s,a,he-1,-he)}let E=a-1,N=1,P=0;for(this[s+E]=n&255;--E>=0&&(N*=256);)n<0&&P===0&&this[s+E+1]!==0&&(P=1),this[s+E]=(n/N>>0)-P&255;return s+a},f.prototype.writeInt8=function(n,s,a){return n=+n,s=s>>>0,a||ye(this,n,s,1,127,-128),n<0&&(n=255+n+1),this[s]=n&255,s+1},f.prototype.writeInt16LE=function(n,s,a){return n=+n,s=s>>>0,a||ye(this,n,s,2,32767,-32768),this[s]=n&255,this[s+1]=n>>>8,s+2},f.prototype.writeInt16BE=function(n,s,a){return n=+n,s=s>>>0,a||ye(this,n,s,2,32767,-32768),this[s]=n>>>8,this[s+1]=n&255,s+2},f.prototype.writeInt32LE=function(n,s,a){return n=+n,s=s>>>0,a||ye(this,n,s,4,2147483647,-2147483648),this[s]=n&255,this[s+1]=n>>>8,this[s+2]=n>>>16,this[s+3]=n>>>24,s+4},f.prototype.writeInt32BE=function(n,s,a){return n=+n,s=s>>>0,a||ye(this,n,s,4,2147483647,-2147483648),n<0&&(n=4294967295+n+1),this[s]=n>>>24,this[s+1]=n>>>16,this[s+2]=n>>>8,this[s+3]=n&255,s+4},f.prototype.writeBigInt64LE=Fe(function(n,s=0){return g(this,n,s,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),f.prototype.writeBigInt64BE=Fe(function(n,s=0){return h(this,n,s,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Y(n,s,a,m,E,N){if(a+m>n.length)throw new RangeError("Index out of range");if(a<0)throw new RangeError("Index out of range")}function Q(n,s,a,m,E){return s=+s,a=a>>>0,E||Y(n,s,a,4,34028234663852886e22,-34028234663852886e22),r.write(n,s,a,m,23,4),a+4}f.prototype.writeFloatLE=function(n,s,a){return Q(this,n,s,!0,a)},f.prototype.writeFloatBE=function(n,s,a){return Q(this,n,s,!1,a)};function _e(n,s,a,m,E){return s=+s,a=a>>>0,E||Y(n,s,a,8,17976931348623157e292,-17976931348623157e292),r.write(n,s,a,m,52,8),a+8}f.prototype.writeDoubleLE=function(n,s,a){return _e(this,n,s,!0,a)},f.prototype.writeDoubleBE=function(n,s,a){return _e(this,n,s,!1,a)},f.prototype.copy=function(n,s,a,m){if(!f.isBuffer(n))throw new TypeError("argument should be a Buffer");if(a||(a=0),!m&&m!==0&&(m=this.length),s>=n.length&&(s=n.length),s||(s=0),m>0&&m<a&&(m=a),m===a||n.length===0||this.length===0)return 0;if(s<0)throw new RangeError("targetStart out of bounds");if(a<0||a>=this.length)throw new RangeError("Index out of range");if(m<0)throw new RangeError("sourceEnd out of bounds");m>this.length&&(m=this.length),n.length-s<m-a&&(m=n.length-s+a);let E=m-a;return this===n&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(s,a,m):Uint8Array.prototype.set.call(n,this.subarray(a,m),s),E},f.prototype.fill=function(n,s,a,m){if(typeof n=="string"){if(typeof s=="string"?(m=s,s=0,a=this.length):typeof a=="string"&&(m=a,a=this.length),m!==void 0&&typeof m!="string")throw new TypeError("encoding must be a string");if(typeof m=="string"&&!f.isEncoding(m))throw new TypeError("Unknown encoding: "+m);if(n.length===1){let N=n.charCodeAt(0);(m==="utf8"&&N<128||m==="latin1")&&(n=N)}}else typeof n=="number"?n=n&255:typeof n=="boolean"&&(n=Number(n));if(s<0||this.length<s||this.length<a)throw new RangeError("Out of range index");if(a<=s)return this;s=s>>>0,a=a===void 0?this.length:a>>>0,n||(n=0);let E;if(typeof n=="number")for(E=s;E<a;++E)this[E]=n;else{let N=f.isBuffer(n)?n:f.from(n,m),P=N.length;if(P===0)throw new TypeError('The value "'+n+'" is invalid for argument "value"');for(E=0;E<a-s;++E)this[E+s]=N[E%P]}return this};var Ie={};function Te(n,s,a){Ie[n]=class extends a{constructor(){super(),Object.defineProperty(this,"message",{value:s.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${n}]`,this.stack,delete this.name}get code(){return n}set code(m){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:m,writable:!0})}toString(){return`${this.name} [${n}]: ${this.message}`}}}Te("ERR_BUFFER_OUT_OF_BOUNDS",function(n){return n?`${n} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Te("ERR_INVALID_ARG_TYPE",function(n,s){return`The "${n}" argument must be of type number. Received type ${typeof s}`},TypeError),Te("ERR_OUT_OF_RANGE",function(n,s,a){let m=`The value of "${n}" is out of range.`,E=a;return Number.isInteger(a)&&Math.abs(a)>2**32?E=Me(String(a)):typeof a=="bigint"&&(E=String(a),(a>BigInt(2)**BigInt(32)||a<-(BigInt(2)**BigInt(32)))&&(E=Me(E)),E+="n"),m+=` It must be ${s}. Received ${E}`,m},RangeError);function Me(n){let s="",a=n.length,m=n[0]==="-"?1:0;for(;a>=m+4;a-=3)s=`_${n.slice(a-3,a)}${s}`;return`${n.slice(0,a)}${s}`}function ge(n,s,a){Ee(s,"offset"),(n[s]===void 0||n[s+a]===void 0)&&Ue(s,n.length-(a+1))}function be(n,s,a,m,E,N){if(n>a||n<s){let P=typeof s=="bigint"?"n":"",he;throw N>3?s===0||s===BigInt(0)?he=`>= 0${P} and < 2${P} ** ${(N+1)*8}${P}`:he=`>= -(2${P} ** ${(N+1)*8-1}${P}) and < 2 ** ${(N+1)*8-1}${P}`:he=`>= ${s}${P} and <= ${a}${P}`,new Ie.ERR_OUT_OF_RANGE("value",he,n)}ge(m,E,N)}function Ee(n,s){if(typeof n!="number")throw new Ie.ERR_INVALID_ARG_TYPE(s,"number",n)}function Ue(n,s,a){throw Math.floor(n)!==n?(Ee(n,a),new Ie.ERR_OUT_OF_RANGE(a||"offset","an integer",n)):s<0?new Ie.ERR_BUFFER_OUT_OF_BOUNDS:new Ie.ERR_OUT_OF_RANGE(a||"offset",`>= ${a?1:0} and <= ${s}`,n)}var Je=/[^+/0-9A-Za-z-_]/g;function Ve(n){if(n=n.split("=")[0],n=n.trim().replace(Je,""),n.length<2)return"";for(;n.length%4!==0;)n=n+"=";return n}function mt(n,s){s=s||1/0;let a,m=n.length,E=null,N=[];for(let P=0;P<m;++P){if(a=n.charCodeAt(P),a>55295&&a<57344){if(!E){if(a>56319){(s-=3)>-1&&N.push(239,191,189);continue}else if(P+1===m){(s-=3)>-1&&N.push(239,191,189);continue}E=a;continue}if(a<56320){(s-=3)>-1&&N.push(239,191,189),E=a;continue}a=(E-55296<<10|a-56320)+65536}else E&&(s-=3)>-1&&N.push(239,191,189);if(E=null,a<128){if((s-=1)<0)break;N.push(a)}else if(a<2048){if((s-=2)<0)break;N.push(a>>6|192,a&63|128)}else if(a<65536){if((s-=3)<0)break;N.push(a>>12|224,a>>6&63|128,a&63|128)}else if(a<1114112){if((s-=4)<0)break;N.push(a>>18|240,a>>12&63|128,a>>6&63|128,a&63|128)}else throw new Error("Invalid code point")}return N}function yt(n){let s=[];for(let a=0;a<n.length;++a)s.push(n.charCodeAt(a)&255);return s}function ot(n,s){let a,m,E,N=[];for(let P=0;P<n.length&&!((s-=2)<0);++P)a=n.charCodeAt(P),m=a>>8,E=a%256,N.push(E),N.push(m);return N}function Ot(n){return t.toByteArray(Ve(n))}function Ce(n,s,a,m){let E;for(E=0;E<m&&!(E+a>=s.length||E>=n.length);++E)s[E+a]=n[E];return E}function De(n,s){return n instanceof s||n!=null&&n.constructor!=null&&n.constructor.name!=null&&n.constructor.name===s.name}function st(n){return n!==n}var Pt=function(){let n="0123456789abcdef",s=new Array(256);for(let a=0;a<16;++a){let m=a*16;for(let E=0;E<16;++E)s[m+E]=n[a]+n[E]}return s}();function Fe(n){return typeof BigInt>"u"?wt:n}function wt(){throw new Error("BigInt not supported")}}),Pr=Tt(()=>{}),Mr=Tt(e=>{var t=e,{Buffer:r}=Cr(),i=Pr();t.toBuffer=function(f,v,D){D=~~D;let w;if(this.isV4Format(f))w=v||r.alloc(D+4),f.split(/\./g).map(B=>{w[D++]=parseInt(B,10)&255});else if(this.isV6Format(f)){let B=f.split(":",8),T;for(T=0;T<B.length;T++){let M=this.isV4Format(B[T]),S;M&&(S=this.toBuffer(B[T]),B[T]=S.slice(0,2).toString("hex")),S&&++T<8&&B.splice(T,0,S.slice(2,4).toString("hex"))}if(B[0]==="")for(;B.length<8;)B.unshift("0");else if(B[B.length-1]==="")for(;B.length<8;)B.push("0");else if(B.length<8){for(T=0;T<B.length&&B[T]!=="";T++);let M=[T,1];for(T=9-B.length;T>0;T--)M.push("0");B.splice(...M)}for(w=v||r.alloc(D+16),T=0;T<B.length;T++){let M=parseInt(B[T],16);w[D++]=M>>8&255,w[D++]=M&255}}if(!w)throw Error(`Invalid ip address: ${f}`);return w},t.toString=function(f,v,D){v=~~v,D=D||f.length-v;let w=[];if(D===4){for(let B=0;B<D;B++)w.push(f[v+B]);w=w.join(".")}else if(D===16){for(let B=0;B<D;B+=2)w.push(f.readUInt16BE(v+B).toString(16));w=w.join(":"),w=w.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3"),w=w.replace(/:{3,4}/,"::")}return w};var c=/^(\d{1,3}\.){3,3}\d{1,3}$/,p=/^(::)?(((\d{1,3}\.){3}(\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i;t.isV4Format=function(f){return c.test(f)},t.isV6Format=function(f){return p.test(f)};function I(f){return f===4?"ipv4":f===6?"ipv6":f?f.toLowerCase():"ipv4"}t.fromPrefixLen=function(f,v){f>32?v="ipv6":v=I(v);let D=4;v==="ipv6"&&(D=16);let w=r.alloc(D);for(let B=0,T=w.length;B<T;++B){let M=8;f<8&&(M=f),f-=M,w[B]=~(255>>M)&255}return t.toString(w)},t.mask=function(f,v){f=t.toBuffer(f),v=t.toBuffer(v);let D=r.alloc(Math.max(f.length,v.length)),w;if(f.length===v.length)for(w=0;w<f.length;w++)D[w]=f[w]&v[w];else if(v.length===4)for(w=0;w<v.length;w++)D[w]=f[f.length-4+w]&v[w];else{for(w=0;w<D.length-6;w++)D[w]=0;for(D[10]=255,D[11]=255,w=0;w<f.length;w++)D[w+12]=f[w]&v[w+12];w+=12}for(;w<D.length;w++)D[w]=0;return t.toString(D)},t.cidr=function(f){let v=f.split("/"),D=v[0];if(v.length!==2)throw new Error(`invalid CIDR subnet: ${D}`);let w=t.fromPrefixLen(parseInt(v[1],10));return t.mask(D,w)},t.subnet=function(f,v){let D=t.toLong(t.mask(f,v)),w=t.toBuffer(v),B=0;for(let M=0;M<w.length;M++)if(w[M]===255)B+=8;else{let S=w[M]&255;for(;S;)S=S<<1&255,B++}let T=2**(32-B);return{networkAddress:t.fromLong(D),firstAddress:T<=2?t.fromLong(D):t.fromLong(D+1),lastAddress:T<=2?t.fromLong(D+T-1):t.fromLong(D+T-2),broadcastAddress:t.fromLong(D+T-1),subnetMask:v,subnetMaskLength:B,numHosts:T<=2?T:T-2,length:T,contains(M){return D===t.toLong(t.mask(M,v))}}},t.cidrSubnet=function(f){let v=f.split("/"),D=v[0];if(v.length!==2)throw new Error(`invalid CIDR subnet: ${D}`);let w=t.fromPrefixLen(parseInt(v[1],10));return t.subnet(D,w)},t.not=function(f){let v=t.toBuffer(f);for(let D=0;D<v.length;D++)v[D]=255^v[D];return t.toString(v)},t.or=function(f,v){if(f=t.toBuffer(f),v=t.toBuffer(v),f.length===v.length){for(let T=0;T<f.length;++T)f[T]|=v[T];return t.toString(f)}let D=f,w=v;v.length>f.length&&(D=v,w=f);let B=D.length-w.length;for(let T=B;T<D.length;++T)D[T]|=w[T-B];return t.toString(D)},t.isEqual=function(f,v){if(f=t.toBuffer(f),v=t.toBuffer(v),f.length===v.length){for(let w=0;w<f.length;w++)if(f[w]!==v[w])return!1;return!0}if(v.length===4){let w=v;v=f,f=w}for(let w=0;w<10;w++)if(v[w]!==0)return!1;let D=v.readUInt16BE(10);if(D!==0&&D!==65535)return!1;for(let w=0;w<4;w++)if(f[w]!==v[w+12])return!1;return!0},t.isPrivate=function(f){return/^(::f{4}:)?10\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(f)||/^(::f{4}:)?192\.168\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(f)||/^(::f{4}:)?172\.(1[6-9]|2\d|30|31)\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(f)||/^(::f{4}:)?127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(f)||/^(::f{4}:)?169\.254\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(f)||/^f[cd][0-9a-f]{2}:/i.test(f)||/^fe80:/i.test(f)||/^::1$/.test(f)||/^::$/.test(f)},t.isPublic=function(f){return!t.isPrivate(f)},t.isLoopback=function(f){return/^(::f{4}:)?127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})/.test(f)||/^fe80::1$/.test(f)||/^::1$/.test(f)||/^::$/.test(f)},t.loopback=function(f){if(f=I(f),f!=="ipv4"&&f!=="ipv6")throw new Error("family must be ipv4 or ipv6");return f==="ipv4"?"127.0.0.1":"fe80::1"},t.address=function(f,v){let D=i.networkInterfaces();if(v=I(v),f&&f!=="private"&&f!=="public"){let B=D[f].filter(T=>I(T.family)===v);return B.length===0?void 0:B[0].address}let w=Object.keys(D).map(B=>{let T=D[B].filter(M=>(M.family=I(M.family),M.family!==v||t.isLoopback(M.address)?!1:f?f==="public"?t.isPrivate(M.address):t.isPublic(M.address):!0));return T.length?T[0].address:void 0}).filter(Boolean);return w.length?w[0]:t.loopback(v)},t.toLong=function(f){let v=0;return f.split(".").forEach(D=>{v<<=8,v+=parseInt(D)}),v>>>0},t.fromLong=function(f){return`${f>>>24}.${f>>16&255}.${f>>8&255}.${f&255}`}}),Fr=Tt((e,t)=>{var r=typeof self<"u"?self:e,i=function(){function p(){this.fetch=!1,this.DOMException=r.DOMException}return p.prototype=r,new p}();(function(p){var I=function(f){var v={searchParams:"URLSearchParams"in p,iterable:"Symbol"in p&&"iterator"in Symbol,blob:"FileReader"in p&&"Blob"in p&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in p,arrayBuffer:"ArrayBuffer"in p};function D(d){return d&&DataView.prototype.isPrototypeOf(d)}if(v.arrayBuffer)var w=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],B=ArrayBuffer.isView||function(d){return d&&w.indexOf(Object.prototype.toString.call(d))>-1};function T(d){if(typeof d!="string"&&(d=String(d)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(d))throw new TypeError("Invalid character in header field name");return d.toLowerCase()}function M(d){return typeof d!="string"&&(d=String(d)),d}function S(d){var k={next:function(){var G=d.shift();return{done:G===void 0,value:G}}};return v.iterable&&(k[Symbol.iterator]=function(){return k}),k}function b(d){this.map={},d instanceof b?d.forEach(function(k,G){this.append(G,k)},this):Array.isArray(d)?d.forEach(function(k){this.append(k[0],k[1])},this):d&&Object.getOwnPropertyNames(d).forEach(function(k){this.append(k,d[k])},this)}b.prototype.append=function(d,k){d=T(d),k=M(k);var G=this.map[d];this.map[d]=G?G+", "+k:k},b.prototype.delete=function(d){delete this.map[T(d)]},b.prototype.get=function(d){return d=T(d),this.has(d)?this.map[d]:null},b.prototype.has=function(d){return this.map.hasOwnProperty(T(d))},b.prototype.set=function(d,k){this.map[T(d)]=M(k)},b.prototype.forEach=function(d,k){for(var G in this.map)this.map.hasOwnProperty(G)&&d.call(k,this.map[G],G,this)},b.prototype.keys=function(){var d=[];return this.forEach(function(k,G){d.push(G)}),S(d)},b.prototype.values=function(){var d=[];return this.forEach(function(k){d.push(k)}),S(d)},b.prototype.entries=function(){var d=[];return this.forEach(function(k,G){d.push([G,k])}),S(d)},v.iterable&&(b.prototype[Symbol.iterator]=b.prototype.entries);function F(d){if(d.bodyUsed)return Promise.reject(new TypeError("Already read"));d.bodyUsed=!0}function K(d){return new Promise(function(k,G){d.onload=function(){k(d.result)},d.onerror=function(){G(d.error)}})}function j(d){var k=new FileReader,G=K(k);return k.readAsArrayBuffer(d),G}function X(d){var k=new FileReader,G=K(k);return k.readAsText(d),G}function z(d){for(var k=new Uint8Array(d),G=new Array(k.length),ee=0;ee<k.length;ee++)G[ee]=String.fromCharCode(k[ee]);return G.join("")}function ie(d){if(d.slice)return d.slice(0);var k=new Uint8Array(d.byteLength);return k.set(new Uint8Array(d)),k.buffer}function V(){return this.bodyUsed=!1,this._initBody=function(d){this._bodyInit=d,d?typeof d=="string"?this._bodyText=d:v.blob&&Blob.prototype.isPrototypeOf(d)?this._bodyBlob=d:v.formData&&FormData.prototype.isPrototypeOf(d)?this._bodyFormData=d:v.searchParams&&URLSearchParams.prototype.isPrototypeOf(d)?this._bodyText=d.toString():v.arrayBuffer&&v.blob&&D(d)?(this._bodyArrayBuffer=ie(d.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):v.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(d)||B(d))?this._bodyArrayBuffer=ie(d):this._bodyText=d=Object.prototype.toString.call(d):this._bodyText="",this.headers.get("content-type")||(typeof d=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):v.searchParams&&URLSearchParams.prototype.isPrototypeOf(d)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},v.blob&&(this.blob=function(){var d=F(this);if(d)return d;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?F(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(j)}),this.text=function(){var d=F(this);if(d)return d;if(this._bodyBlob)return X(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(z(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},v.formData&&(this.formData=function(){return this.text().then(xe)}),this.json=function(){return this.text().then(JSON.parse)},this}var Se=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function A(d){var k=d.toUpperCase();return Se.indexOf(k)>-1?k:d}function le(d,k){k=k||{};var G=k.body;if(d instanceof le){if(d.bodyUsed)throw new TypeError("Already read");this.url=d.url,this.credentials=d.credentials,k.headers||(this.headers=new b(d.headers)),this.method=d.method,this.mode=d.mode,this.signal=d.signal,!G&&d._bodyInit!=null&&(G=d._bodyInit,d.bodyUsed=!0)}else this.url=String(d);if(this.credentials=k.credentials||this.credentials||"same-origin",(k.headers||!this.headers)&&(this.headers=new b(k.headers)),this.method=A(k.method||this.method||"GET"),this.mode=k.mode||this.mode||null,this.signal=k.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&G)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(G)}le.prototype.clone=function(){return new le(this,{body:this._bodyInit})};function xe(d){var k=new FormData;return d.trim().split("&").forEach(function(G){if(G){var ee=G.split("="),te=ee.shift().replace(/\+/g," "),q=ee.join("=").replace(/\+/g," ");k.append(decodeURIComponent(te),decodeURIComponent(q))}}),k}function $e(d){var k=new b,G=d.replace(/\r?\n[\t ]+/g," ");return G.split(/\r?\n/).forEach(function(ee){var te=ee.split(":"),q=te.shift().trim();if(q){var ue=te.join(":").trim();k.append(q,ue)}}),k}V.call(le.prototype);function fe(d,k){k||(k={}),this.type="default",this.status=k.status===void 0?200:k.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in k?k.statusText:"OK",this.headers=new b(k.headers),this.url=k.url||"",this._initBody(d)}V.call(fe.prototype),fe.prototype.clone=function(){return new fe(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new b(this.headers),url:this.url})},fe.error=function(){var d=new fe(null,{status:0,statusText:""});return d.type="error",d};var je=[301,302,303,307,308];fe.redirect=function(d,k){if(je.indexOf(k)===-1)throw new RangeError("Invalid status code");return new fe(null,{status:k,headers:{location:d}})},f.DOMException=p.DOMException;try{new f.DOMException}catch{f.DOMException=function(d,k){this.message=d,this.name=k;var G=Error(d);this.stack=G.stack},f.DOMException.prototype=Object.create(Error.prototype),f.DOMException.prototype.constructor=f.DOMException}function Oe(d,k){return new Promise(function(G,ee){var te=new le(d,k);if(te.signal&&te.signal.aborted)return ee(new f.DOMException("Aborted","AbortError"));var q=new XMLHttpRequest;function ue(){q.abort()}q.onload=function(){var ye={status:q.status,statusText:q.statusText,headers:$e(q.getAllResponseHeaders()||"")};ye.url="responseURL"in q?q.responseURL:ye.headers.get("X-Request-URL");var g="response"in q?q.response:q.responseText;G(new fe(g,ye))},q.onerror=function(){ee(new TypeError("Network request failed"))},q.ontimeout=function(){ee(new TypeError("Network request failed"))},q.onabort=function(){ee(new f.DOMException("Aborted","AbortError"))},q.open(te.method,te.url,!0),te.credentials==="include"?q.withCredentials=!0:te.credentials==="omit"&&(q.withCredentials=!1),"responseType"in q&&v.blob&&(q.responseType="blob"),te.headers.forEach(function(ye,g){q.setRequestHeader(g,ye)}),te.signal&&(te.signal.addEventListener("abort",ue),q.onreadystatechange=function(){q.readyState===4&&te.signal.removeEventListener("abort",ue)}),q.send(typeof te._bodyInit>"u"?null:te._bodyInit)})}return Oe.polyfill=!0,p.fetch||(p.fetch=Oe,p.Headers=b,p.Request=le,p.Response=fe),f.Headers=b,f.Request=le,f.Response=fe,f.fetch=Oe,Object.defineProperty(f,"__esModule",{value:!0}),f}({})})(i),i.fetch.ponyfill=!0,delete i.fetch.polyfill;var c=i;e=c.fetch,e.default=c.fetch,e.fetch=c.fetch,e.Headers=c.Headers,e.Request=c.Request,e.Response=c.Response,t.exports=e}),Gr=(e,t,r,i)=>{if(r==="length"||r==="prototype"||r==="arguments"||r==="caller")return;let c=Object.getOwnPropertyDescriptor(e,r),p=Object.getOwnPropertyDescriptor(t,r);!zr(c,p)&&i||Object.defineProperty(e,r,p)},zr=function(e,t){return e===void 0||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},$r=(e,t)=>{let r=Object.getPrototypeOf(t);r!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,r)},jr=(e,t)=>`/* Wrapped ${e}*/
${t}`,Vr=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),Hr=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),Wr=(e,t,r)=>{let i=r===""?"":`with ${r.trim()}() `,c=jr.bind(null,i,t.toString());Object.defineProperty(c,"name",Hr),Object.defineProperty(e,"toString",{...Vr,value:c})};function qr(e,t,{ignoreNonConfigurable:r=!1}={}){let{name:i}=e;for(let c of Reflect.ownKeys(t))Gr(e,t,c,r);return $r(e,t),Wr(e,t,i),e}var Kr=new WeakMap;function Jr(e,{cacheKey:t=([i])=>i,cache:r=new Map}={}){let i=new Map,c=function(...p){let I=t(p);if(i.has(I))return i.get(I);let f=(async()=>{try{if(r&&await r.has(I))return await r.get(I);let v=await e.apply(this,p);try{return v}finally{r&&await r.set(I,v)}}finally{i.delete(I)}})();return i.set(I,f),f};return qr(c,e,{ignoreNonConfigurable:!0}),Kr.set(c,r),c}var Yr=Nn(Mr(),1),Xr=["string","number","bigint","symbol"],Qr=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function Zr(e){if(e===null)return"null";if(e===void 0)return"undefined";if(e===!0||e===!1)return"boolean";let t=typeof e;return Xr.includes(t)?t:t==="function"?"Function":Array.isArray(e)?"Array":eo(e)?"Buffer":to(e)||"Object"}function eo(e){return e&&e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer.call(null,e)}function to(e){let t=Object.prototype.toString.call(e).slice(8,-1);if(Qr.includes(t))return t}var U=class{constructor(e,t,r){this.major=e,this.majorEncoded=e<<5,this.name=t,this.terminal=r}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}};U.uint=new U(0,"uint",!0);U.negint=new U(1,"negint",!0);U.bytes=new U(2,"bytes",!0);U.string=new U(3,"string",!0);U.array=new U(4,"array",!1);U.map=new U(5,"map",!1);U.tag=new U(6,"tag",!1);U.float=new U(7,"float",!0);U.false=new U(7,"false",!0);U.true=new U(7,"true",!0);U.null=new U(7,"null",!0);U.undefined=new U(7,"undefined",!0);U.break=new U(7,"break",!0);var J=class{constructor(e,t,r){this.type=e,this.value=t,this.encodedLength=r,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}},Nt=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",io=new TextDecoder,no=new TextEncoder;function ri(e){return Nt&&globalThis.Buffer.isBuffer(e)}function ro(e){return e instanceof Uint8Array?ri(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e:Uint8Array.from(e)}var oo=Nt?(e,t,r)=>r-t>64?globalThis.Buffer.from(e.subarray(t,r)).toString("utf8"):Sn(e,t,r):(e,t,r)=>r-t>64?io.decode(e.subarray(t,r)):Sn(e,t,r),so=Nt?e=>e.length>64?globalThis.Buffer.from(e):kn(e):e=>e.length>64?no.encode(e):kn(e),Fi=Nt?(e,t,r)=>ri(e)?new Uint8Array(e.subarray(t,r)):e.slice(t,r):(e,t,r)=>e.slice(t,r),ao=Nt?(e,t)=>(e=e.map(r=>r instanceof Uint8Array?r:globalThis.Buffer.from(r)),ro(globalThis.Buffer.concat(e,t))):(e,t)=>{let r=new Uint8Array(t),i=0;for(let c of e)i+c.length>r.length&&(c=c.subarray(0,r.length-i)),r.set(c,i),i+=c.length;return r},fo=Nt?e=>globalThis.Buffer.allocUnsafe(e):e=>new Uint8Array(e);function co(e,t){if(ri(e)&&ri(t))return e.compare(t);for(let r=0;r<e.length;r++)if(e[r]!==t[r])return e[r]<t[r]?-1:1;return 0}function kn(e,t=1/0){let r,i=e.length,c=null,p=[];for(let I=0;I<i;++I){if(r=e.charCodeAt(I),r>55295&&r<57344){if(!c){if(r>56319){(t-=3)>-1&&p.push(239,191,189);continue}else if(I+1===i){(t-=3)>-1&&p.push(239,191,189);continue}c=r;continue}if(r<56320){(t-=3)>-1&&p.push(239,191,189),c=r;continue}r=(c-55296<<10|r-56320)+65536}else c&&(t-=3)>-1&&p.push(239,191,189);if(c=null,r<128){if((t-=1)<0)break;p.push(r)}else if(r<2048){if((t-=2)<0)break;p.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;p.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;p.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return p}function Sn(e,t,r){let i=[];for(;t<r;){let c=e[t],p=null,I=c>239?4:c>223?3:c>191?2:1;if(t+I<=r){let f,v,D,w;switch(I){case 1:c<128&&(p=c);break;case 2:f=e[t+1],(f&192)===128&&(w=(c&31)<<6|f&63,w>127&&(p=w));break;case 3:f=e[t+1],v=e[t+2],(f&192)===128&&(v&192)===128&&(w=(c&15)<<12|(f&63)<<6|v&63,w>2047&&(w<55296||w>57343)&&(p=w));break;case 4:f=e[t+1],v=e[t+2],D=e[t+3],(f&192)===128&&(v&192)===128&&(D&192)===128&&(w=(c&15)<<18|(f&63)<<12|(v&63)<<6|D&63,w>65535&&w<1114112&&(p=w))}}p===null?(p=65533,I=1):p>65535&&(p-=65536,i.push(p>>>10&1023|55296),p=56320|p&1023),i.push(p),t+=I}return lo(i)}var Rn=4096;function lo(e){let t=e.length;if(t<=Rn)return String.fromCharCode.apply(String,e);let r="",i=0;for(;i<t;)r+=String.fromCharCode.apply(String,e.slice(i,i+=Rn));return r}var uo=256,ho=class{constructor(e=uo){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let t=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){let r=t.length-(this.maxCursor-this.cursor)-1;t.set(e,r)}else{if(t){let r=t.length-(this.maxCursor-this.cursor)-1;r<t.length&&(this.chunks[this.chunks.length-1]=t.subarray(0,r),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(t=fo(this.chunkSize),this.chunks.push(t),this.maxCursor+=t.length,this._initReuseChunk===null&&(this._initReuseChunk=t),t.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let t;if(this.chunks.length===1){let r=this.chunks[0];e&&this.cursor>r.length/2?(t=this.cursor===r.length?r:r.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):t=Fi(r,0,this.cursor)}else t=ao(this.chunks,this.cursor);return e&&this.reset(),t}},oe="CBOR decode error:",Bn="CBOR encode error:",Vt=[];Vt[23]=1;Vt[24]=2;Vt[25]=3;Vt[26]=5;Vt[27]=9;function Bt(e,t,r){if(e.length-t<r)throw new Error(`${oe} not enough data for type`)}var Be=[24,256,65536,4294967296,BigInt("18446744073709551616")];function bt(e,t,r){Bt(e,t,1);let i=e[t];if(r.strict===!0&&i<Be[0])throw new Error(`${oe} integer encoded in more bytes than necessary (strict decode)`);return i}function Et(e,t,r){Bt(e,t,2);let i=e[t]<<8|e[t+1];if(r.strict===!0&&i<Be[1])throw new Error(`${oe} integer encoded in more bytes than necessary (strict decode)`);return i}function kt(e,t,r){Bt(e,t,4);let i=e[t]*16777216+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];if(r.strict===!0&&i<Be[2])throw new Error(`${oe} integer encoded in more bytes than necessary (strict decode)`);return i}function St(e,t,r){Bt(e,t,8);let i=e[t]*16777216+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3],c=e[t+4]*16777216+(e[t+5]<<16)+(e[t+6]<<8)+e[t+7],p=(BigInt(i)<<BigInt(32))+BigInt(c);if(r.strict===!0&&p<Be[3])throw new Error(`${oe} integer encoded in more bytes than necessary (strict decode)`);if(p<=Number.MAX_SAFE_INTEGER)return Number(p);if(r.allowBigInt===!0)return p;throw new Error(`${oe} integers outside of the safe integer range are not supported`)}function po(e,t,r,i){return new J(U.uint,bt(e,t+1,i),2)}function go(e,t,r,i){return new J(U.uint,Et(e,t+1,i),3)}function mo(e,t,r,i){return new J(U.uint,kt(e,t+1,i),5)}function yo(e,t,r,i){return new J(U.uint,St(e,t+1,i),9)}function Rt(e,t){return Ke(e,0,t.value)}function Ke(e,t,r){if(r<Be[0]){let i=Number(r);e.push([t|i])}else if(r<Be[1]){let i=Number(r);e.push([t|24,i])}else if(r<Be[2]){let i=Number(r);e.push([t|25,i>>>8,i&255])}else if(r<Be[3]){let i=Number(r);e.push([t|26,i>>>24&255,i>>>16&255,i>>>8&255,i&255])}else{let i=BigInt(r);if(i<Be[4]){let c=[t|27,0,0,0,0,0,0,0],p=Number(i&BigInt(4294967295)),I=Number(i>>BigInt(32)&BigInt(4294967295));c[8]=p&255,p=p>>8,c[7]=p&255,p=p>>8,c[6]=p&255,p=p>>8,c[5]=p&255,c[4]=I&255,I=I>>8,c[3]=I&255,I=I>>8,c[2]=I&255,I=I>>8,c[1]=I&255,e.push(c)}else throw new Error(`${oe} encountered BigInt larger than allowable range`)}}Rt.encodedSize=function(e){return Ke.encodedSize(e.value)};Ke.encodedSize=function(e){return e<Be[0]?1:e<Be[1]?2:e<Be[2]?3:e<Be[3]?5:9};Rt.compareTokens=function(e,t){return e.value<t.value?-1:e.value>t.value?1:0};function wo(e,t,r,i){return new J(U.negint,-1-bt(e,t+1,i),2)}function _o(e,t,r,i){return new J(U.negint,-1-Et(e,t+1,i),3)}function vo(e,t,r,i){return new J(U.negint,-1-kt(e,t+1,i),5)}var Gi=BigInt(-1),Dn=BigInt(1);function bo(e,t,r,i){let c=St(e,t+1,i);if(typeof c!="bigint"){let p=-1-c;if(p>=Number.MIN_SAFE_INTEGER)return new J(U.negint,p,9)}if(i.allowBigInt!==!0)throw new Error(`${oe} integers outside of the safe integer range are not supported`);return new J(U.negint,Gi-BigInt(c),9)}function zi(e,t){let r=t.value,i=typeof r=="bigint"?r*Gi-Dn:r*-1-1;Ke(e,t.type.majorEncoded,i)}zi.encodedSize=function(e){let t=e.value,r=typeof t=="bigint"?t*Gi-Dn:t*-1-1;return r<Be[0]?1:r<Be[1]?2:r<Be[2]?3:r<Be[3]?5:9};zi.compareTokens=function(e,t){return e.value<t.value?1:e.value>t.value?-1:0};function Ht(e,t,r,i){Bt(e,t,r+i);let c=Fi(e,t+r,t+r+i);return new J(U.bytes,c,r+i)}function Eo(e,t,r,i){return Ht(e,t,1,r)}function ko(e,t,r,i){return Ht(e,t,2,bt(e,t+1,i))}function So(e,t,r,i){return Ht(e,t,3,Et(e,t+1,i))}function Ro(e,t,r,i){return Ht(e,t,5,kt(e,t+1,i))}function Io(e,t,r,i){let c=St(e,t+1,i);if(typeof c=="bigint")throw new Error(`${oe} 64-bit integer bytes lengths not supported`);return Ht(e,t,9,c)}function oi(e){return e.encodedBytes===void 0&&(e.encodedBytes=e.type===U.string?so(e.value):e.value),e.encodedBytes}function ci(e,t){let r=oi(t);Ke(e,t.type.majorEncoded,r.length),e.push(r)}ci.encodedSize=function(e){let t=oi(e);return Ke.encodedSize(t.length)+t.length};ci.compareTokens=function(e,t){return Ao(oi(e),oi(t))};function Ao(e,t){return e.length<t.length?-1:e.length>t.length?1:co(e,t)}function Wt(e,t,r,i,c){let p=r+i;Bt(e,t,p);let I=new J(U.string,oo(e,t+r,t+p),p);return c.retainStringBytes===!0&&(I.byteValue=Fi(e,t+r,t+p)),I}function Oo(e,t,r,i){return Wt(e,t,1,r,i)}function xo(e,t,r,i){return Wt(e,t,2,bt(e,t+1,i),i)}function To(e,t,r,i){return Wt(e,t,3,Et(e,t+1,i),i)}function No(e,t,r,i){return Wt(e,t,5,kt(e,t+1,i),i)}function Bo(e,t,r,i){let c=St(e,t+1,i);if(typeof c=="bigint")throw new Error(`${oe} 64-bit integer string lengths not supported`);return Wt(e,t,9,c,i)}var Do=ci;function Dt(e,t,r,i){return new J(U.array,i,r)}function Lo(e,t,r,i){return Dt(e,t,1,r)}function Uo(e,t,r,i){return Dt(e,t,2,bt(e,t+1,i))}function Co(e,t,r,i){return Dt(e,t,3,Et(e,t+1,i))}function Po(e,t,r,i){return Dt(e,t,5,kt(e,t+1,i))}function Mo(e,t,r,i){let c=St(e,t+1,i);if(typeof c=="bigint")throw new Error(`${oe} 64-bit integer array lengths not supported`);return Dt(e,t,9,c)}function Fo(e,t,r,i){if(i.allowIndefinite===!1)throw new Error(`${oe} indefinite length items not allowed`);return Dt(e,t,1,1/0)}function $i(e,t){Ke(e,U.array.majorEncoded,t.value)}$i.compareTokens=Rt.compareTokens;$i.encodedSize=function(e){return Ke.encodedSize(e.value)};function Lt(e,t,r,i){return new J(U.map,i,r)}function Go(e,t,r,i){return Lt(e,t,1,r)}function zo(e,t,r,i){return Lt(e,t,2,bt(e,t+1,i))}function $o(e,t,r,i){return Lt(e,t,3,Et(e,t+1,i))}function jo(e,t,r,i){return Lt(e,t,5,kt(e,t+1,i))}function Vo(e,t,r,i){let c=St(e,t+1,i);if(typeof c=="bigint")throw new Error(`${oe} 64-bit integer map lengths not supported`);return Lt(e,t,9,c)}function Ho(e,t,r,i){if(i.allowIndefinite===!1)throw new Error(`${oe} indefinite length items not allowed`);return Lt(e,t,1,1/0)}function ji(e,t){Ke(e,U.map.majorEncoded,t.value)}ji.compareTokens=Rt.compareTokens;ji.encodedSize=function(e){return Ke.encodedSize(e.value)};function Wo(e,t,r,i){return new J(U.tag,r,1)}function qo(e,t,r,i){return new J(U.tag,bt(e,t+1,i),2)}function Ko(e,t,r,i){return new J(U.tag,Et(e,t+1,i),3)}function Jo(e,t,r,i){return new J(U.tag,kt(e,t+1,i),5)}function Yo(e,t,r,i){return new J(U.tag,St(e,t+1,i),9)}function Vi(e,t){Ke(e,U.tag.majorEncoded,t.value)}Vi.compareTokens=Rt.compareTokens;Vi.encodedSize=function(e){return Ke.encodedSize(e.value)};var Xo=20,Qo=21,Zo=22,es=23;function ts(e,t,r,i){if(i.allowUndefined===!1)throw new Error(`${oe} undefined values are not supported`);return i.coerceUndefinedToNull===!0?new J(U.null,null,1):new J(U.undefined,void 0,1)}function is(e,t,r,i){if(i.allowIndefinite===!1)throw new Error(`${oe} indefinite length items not allowed`);return new J(U.break,void 0,1)}function Hi(e,t,r){if(r){if(r.allowNaN===!1&&Number.isNaN(e))throw new Error(`${oe} NaN values are not supported`);if(r.allowInfinity===!1&&(e===1/0||e===-1/0))throw new Error(`${oe} Infinity values are not supported`)}return new J(U.float,e,t)}function ns(e,t,r,i){return Hi(qi(e,t+1),3,i)}function rs(e,t,r,i){return Hi(Ki(e,t+1),5,i)}function os(e,t,r,i){return Hi(Pn(e,t+1),9,i)}function Wi(e,t,r){let i=t.value;if(i===!1)e.push([U.float.majorEncoded|Xo]);else if(i===!0)e.push([U.float.majorEncoded|Qo]);else if(i===null)e.push([U.float.majorEncoded|Zo]);else if(i===void 0)e.push([U.float.majorEncoded|es]);else{let c,p=!1;(!r||r.float64!==!0)&&(Un(i),c=qi(et,1),i===c||Number.isNaN(i)?(et[0]=249,e.push(et.slice(0,3)),p=!0):(Cn(i),c=Ki(et,1),i===c&&(et[0]=250,e.push(et.slice(0,5)),p=!0))),p||(ss(i),c=Pn(et,1),et[0]=251,e.push(et.slice(0,9)))}}Wi.encodedSize=function(e,t){let r=e.value;if(r===!1||r===!0||r===null||r===void 0)return 1;if(!t||t.float64!==!0){Un(r);let i=qi(et,1);if(r===i||Number.isNaN(r))return 3;if(Cn(r),i=Ki(et,1),r===i)return 5}return 9};var Ln=new ArrayBuffer(9),qe=new DataView(Ln,1),et=new Uint8Array(Ln,0);function Un(e){if(e===1/0)qe.setUint16(0,31744,!1);else if(e===-1/0)qe.setUint16(0,64512,!1);else if(Number.isNaN(e))qe.setUint16(0,32256,!1);else{qe.setFloat32(0,e);let t=qe.getUint32(0),r=(t&2139095040)>>23,i=t&8388607;if(r===255)qe.setUint16(0,31744,!1);else if(r===0)qe.setUint16(0,(e&2147483648)>>16|i>>13,!1);else{let c=r-127;c<-24?qe.setUint16(0,0):c<-14?qe.setUint16(0,(t&2147483648)>>16|1<<24+c,!1):qe.setUint16(0,(t&2147483648)>>16|c+15<<10|i>>13,!1)}}}function qi(e,t){if(e.length-t<2)throw new Error(`${oe} not enough data for float16`);let r=(e[t]<<8)+e[t+1];if(r===31744)return 1/0;if(r===64512)return-1/0;if(r===32256)return NaN;let i=r>>10&31,c=r&1023,p;return i===0?p=c*2**-24:i!==31?p=(c+1024)*2**(i-25):p=c===0?1/0:NaN,r&32768?-p:p}function Cn(e){qe.setFloat32(0,e,!1)}function Ki(e,t){if(e.length-t<4)throw new Error(`${oe} not enough data for float32`);let r=(e.byteOffset||0)+t;return new DataView(e.buffer,r,4).getFloat32(0,!1)}function ss(e){qe.setFloat64(0,e,!1)}function Pn(e,t){if(e.length-t<8)throw new Error(`${oe} not enough data for float64`);let r=(e.byteOffset||0)+t;return new DataView(e.buffer,r,8).getFloat64(0,!1)}Wi.compareTokens=Rt.compareTokens;function ce(e,t,r){throw new Error(`${oe} encountered invalid minor (${r}) for major ${e[t]>>>5}`)}function li(e){return()=>{throw new Error(`${oe} ${e}`)}}var $=[];for(let e=0;e<=23;e++)$[e]=ce;$[24]=po;$[25]=go;$[26]=mo;$[27]=yo;$[28]=ce;$[29]=ce;$[30]=ce;$[31]=ce;for(let e=32;e<=55;e++)$[e]=ce;$[56]=wo;$[57]=_o;$[58]=vo;$[59]=bo;$[60]=ce;$[61]=ce;$[62]=ce;$[63]=ce;for(let e=64;e<=87;e++)$[e]=Eo;$[88]=ko;$[89]=So;$[90]=Ro;$[91]=Io;$[92]=ce;$[93]=ce;$[94]=ce;$[95]=li("indefinite length bytes/strings are not supported");for(let e=96;e<=119;e++)$[e]=Oo;$[120]=xo;$[121]=To;$[122]=No;$[123]=Bo;$[124]=ce;$[125]=ce;$[126]=ce;$[127]=li("indefinite length bytes/strings are not supported");for(let e=128;e<=151;e++)$[e]=Lo;$[152]=Uo;$[153]=Co;$[154]=Po;$[155]=Mo;$[156]=ce;$[157]=ce;$[158]=ce;$[159]=Fo;for(let e=160;e<=183;e++)$[e]=Go;$[184]=zo;$[185]=$o;$[186]=jo;$[187]=Vo;$[188]=ce;$[189]=ce;$[190]=ce;$[191]=Ho;for(let e=192;e<=215;e++)$[e]=Wo;$[216]=qo;$[217]=Ko;$[218]=Jo;$[219]=Yo;$[220]=ce;$[221]=ce;$[222]=ce;$[223]=ce;for(let e=224;e<=243;e++)$[e]=li("simple values are not supported");$[244]=ce;$[245]=ce;$[246]=ce;$[247]=ts;$[248]=li("simple values are not supported");$[249]=ns;$[250]=rs;$[251]=os;$[252]=ce;$[253]=ce;$[254]=ce;$[255]=is;var nt=[];for(let e=0;e<24;e++)nt[e]=new J(U.uint,e,1);for(let e=-1;e>=-24;e--)nt[31-e]=new J(U.negint,e,1);nt[64]=new J(U.bytes,new Uint8Array(0),1);nt[96]=new J(U.string,"",1);nt[128]=new J(U.array,0,1);nt[160]=new J(U.map,0,1);nt[244]=new J(U.false,!1,1);nt[245]=new J(U.true,!0,1);nt[246]=new J(U.null,null,1);function as(){let e=[];return e[U.uint.major]=Rt,e[U.negint.major]=zi,e[U.bytes.major]=ci,e[U.string.major]=Do,e[U.array.major]=$i,e[U.map.major]=ji,e[U.tag.major]=Vi,e[U.float.major]=Wi,e}var ja=as(),Va=new ho,Ci=class{constructor(e,t){this.obj=e,this.parent=t}includes(e){let t=this;do if(t.obj===e)return!0;while(t=t.parent);return!1}static createCheck(e,t){if(e&&e.includes(t))throw new Error(`${Bn} object contains circular references`);return new Ci(t,e)}},dt={null:new J(U.null,null),undefined:new J(U.undefined,void 0),true:new J(U.true,!0),false:new J(U.false,!1),emptyArray:new J(U.array,0),emptyMap:new J(U.map,0)},gt={number(e,t,r,i){return!Number.isInteger(e)||!Number.isSafeInteger(e)?new J(U.float,e):e>=0?new J(U.uint,e):new J(U.negint,e)},bigint(e,t,r,i){return e>=BigInt(0)?new J(U.uint,e):new J(U.negint,e)},Uint8Array(e,t,r,i){return new J(U.bytes,e)},string(e,t,r,i){return new J(U.string,e)},boolean(e,t,r,i){return e?dt.true:dt.false},null(e,t,r,i){return dt.null},undefined(e,t,r,i){return dt.undefined},ArrayBuffer(e,t,r,i){return new J(U.bytes,new Uint8Array(e))},DataView(e,t,r,i){return new J(U.bytes,new Uint8Array(e.buffer,e.byteOffset,e.byteLength))},Array(e,t,r,i){if(!e.length)return r.addBreakTokens===!0?[dt.emptyArray,new J(U.break)]:dt.emptyArray;i=Ci.createCheck(i,e);let c=[],p=0;for(let I of e)c[p++]=Ui(I,r,i);return r.addBreakTokens?[new J(U.array,e.length),c,new J(U.break)]:[new J(U.array,e.length),c]},Object(e,t,r,i){let c=t!=="Object",p=c?e.keys():Object.keys(e),I=c?e.size:p.length;if(!I)return r.addBreakTokens===!0?[dt.emptyMap,new J(U.break)]:dt.emptyMap;i=Ci.createCheck(i,e);let f=[],v=0;for(let D of p)f[v++]=[Ui(D,r,i),Ui(c?e.get(D):e[D],r,i)];return fs(f,r),r.addBreakTokens?[new J(U.map,I),f,new J(U.break)]:[new J(U.map,I),f]}};gt.Map=gt.Object;gt.Buffer=gt.Uint8Array;for(let e of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))gt[`${e}Array`]=gt.DataView;function Ui(e,t={},r){let i=Zr(e),c=t&&t.typeEncoders&&t.typeEncoders[i]||gt[i];if(typeof c=="function"){let I=c(e,i,t,r);if(I!=null)return I}let p=gt[i];if(!p)throw new Error(`${Bn} unsupported type: ${i}`);return p(e,i,t,r)}function fs(e,t){t.mapSorter&&e.sort(t.mapSorter)}var cs={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},ls=class{constructor(e,t={}){this.pos=0,this.data=e,this.options=t}done(){return this.pos>=this.data.length}next(){let e=this.data[this.pos],t=nt[e];if(t===void 0){let r=$[e];if(!r)throw new Error(`${oe} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);let i=e&31;t=r(this.data,this.pos,i,this.options)}return this.pos+=t.encodedLength,t}},$t=Symbol.for("DONE"),ui=Symbol.for("BREAK");function us(e,t,r){let i=[];for(let c=0;c<e.value;c++){let p=jt(t,r);if(p===ui){if(e.value===1/0)break;throw new Error(`${oe} got unexpected break to lengthed array`)}if(p===$t)throw new Error(`${oe} found array but not enough entries (got ${c}, expected ${e.value})`);i[c]=p}return i}function hs(e,t,r){let i=r.useMaps===!0,c=i?void 0:{},p=i?new Map:void 0;for(let I=0;I<e.value;I++){let f=jt(t,r);if(f===ui){if(e.value===1/0)break;throw new Error(`${oe} got unexpected break to lengthed map`)}if(f===$t)throw new Error(`${oe} found map but not enough entries (got ${I} [no key], expected ${e.value})`);if(i!==!0&&typeof f!="string")throw new Error(`${oe} non-string keys not supported (got ${typeof f})`);let v=jt(t,r);if(v===$t)throw new Error(`${oe} found map but not enough entries (got ${I} [no value], expected ${e.value})`);i?p.set(f,v):c[f]=v}return i?p:c}function jt(e,t){if(e.done())return $t;let r=e.next();if(r.type===U.break)return ui;if(r.type.terminal)return r.value;if(r.type===U.array)return us(r,e,t);if(r.type===U.map)return hs(r,e,t);if(r.type===U.tag){if(t.tags&&typeof t.tags[r.value]=="function"){let i=jt(e,t);return t.tags[r.value](i)}throw new Error(`${oe} tag not supported (${r.value})`)}throw new Error("unsupported")}function ds(e,t){if(!(e instanceof Uint8Array))throw new Error(`${oe} data to decode must be a Uint8Array`);t=Object.assign({},cs,t);let r=t.tokenizer||new ls(e,t),i=jt(r,t);if(i===$t)throw new Error(`${oe} did not find any content to decode`);if(i===ui)throw new Error(`${oe} got unexpected break`);if(!r.done())throw new Error(`${oe} too many terminals, data makes no sense`);return i}var ps=Mn,In=128,gs=127,ms=~gs,ys=Math.pow(2,31);function Mn(e,t,r){t=t||[],r=r||0;for(var i=r;e>=ys;)t[r++]=e&255|In,e/=128;for(;e&ms;)t[r++]=e&255|In,e>>>=7;return t[r]=e|0,Mn.bytes=r-i+1,t}var ws=Pi,_s=128,An=127;function Pi(e,i){var r=0,i=i||0,c=0,p=i,I,f=e.length;do{if(p>=f)throw Pi.bytes=0,new RangeError("Could not decode varint");I=e[p++],r+=c<28?(I&An)<<c:(I&An)*Math.pow(2,c),c+=7}while(I>=_s);return Pi.bytes=p-i,r}var vs=Math.pow(2,7),bs=Math.pow(2,14),Es=Math.pow(2,21),ks=Math.pow(2,28),Ss=Math.pow(2,35),Rs=Math.pow(2,42),Is=Math.pow(2,49),As=Math.pow(2,56),Os=Math.pow(2,63),xs=function(e){return e<vs?1:e<bs?2:e<Es?3:e<ks?4:e<Ss?5:e<Rs?6:e<Is?7:e<As?8:e<Os?9:10},Ts={encode:ps,decode:ws,encodingLength:xs},Ns=Ts,si=Ns,Mi=(e,t=0)=>[si.decode(e,t),si.decode.bytes],ai=(e,t,r=0)=>(si.encode(e,t,r),t),fi=e=>si.encodingLength(e),Ha=new Uint8Array(0),Bs=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0},Ji=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},Ds=(e,t)=>{let r=t.byteLength,i=fi(e),c=i+fi(r),p=new Uint8Array(c+r);return ai(e,p,0),ai(r,p,i),p.set(t,c),new Yi(e,r,t,p)},Ls=e=>{let t=Ji(e),[r,i]=Mi(t),[c,p]=Mi(t.subarray(i)),I=t.subarray(i+p);if(I.byteLength!==c)throw new Error("Incorrect length");return new Yi(r,c,I,t)},Us=(e,t)=>e===t?!0:e.code===t.code&&e.size===t.size&&Bs(e.bytes,t.bytes),Yi=class{constructor(e,t,r,i){this.code=e,this.size=t,this.digest=r,this.bytes=i}};function Cs(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var c=0;c<e.length;c++){var p=e.charAt(c),I=p.charCodeAt(0);if(r[I]!==255)throw new TypeError(p+" is ambiguous");r[I]=c}var f=e.length,v=e.charAt(0),D=Math.log(f)/Math.log(256),w=Math.log(256)/Math.log(f);function B(S){if(S instanceof Uint8Array||(ArrayBuffer.isView(S)?S=new Uint8Array(S.buffer,S.byteOffset,S.byteLength):Array.isArray(S)&&(S=Uint8Array.from(S))),!(S instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(S.length===0)return"";for(var b=0,F=0,K=0,j=S.length;K!==j&&S[K]===0;)K++,b++;for(var X=(j-K)*w+1>>>0,z=new Uint8Array(X);K!==j;){for(var ie=S[K],V=0,Se=X-1;(ie!==0||V<F)&&Se!==-1;Se--,V++)ie+=256*z[Se]>>>0,z[Se]=ie%f>>>0,ie=ie/f>>>0;if(ie!==0)throw new Error("Non-zero carry");F=V,K++}for(var A=X-F;A!==X&&z[A]===0;)A++;for(var le=v.repeat(b);A<X;++A)le+=e.charAt(z[A]);return le}function T(S){if(typeof S!="string")throw new TypeError("Expected String");if(S.length===0)return new Uint8Array;var b=0;if(S[b]!==" "){for(var F=0,K=0;S[b]===v;)F++,b++;for(var j=(S.length-b)*D+1>>>0,X=new Uint8Array(j);S[b];){var z=r[S.charCodeAt(b)];if(z===255)return;for(var ie=0,V=j-1;(z!==0||ie<K)&&V!==-1;V--,ie++)z+=f*X[V]>>>0,X[V]=z%256>>>0,z=z/256>>>0;if(z!==0)throw new Error("Non-zero carry");K=ie,b++}if(S[b]!==" "){for(var Se=j-K;Se!==j&&X[Se]===0;)Se++;for(var A=new Uint8Array(F+(j-Se)),le=F;Se!==j;)A[le++]=X[Se++];return A}}}function M(S){var b=T(S);if(b)return b;throw new Error(`Non-${t} character`)}return{encode:B,decodeUnsafe:T,decode:M}}var Ps=Cs,Ms=Ps,Fs=Ms,Gs=class{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},zs=class{constructor(e,t,r){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Fn(this,e)}},$s=class{constructor(e){this.decoders=e}or(e){return Fn(this,e)}decode(e){let t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},Fn=(e,t)=>new $s({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}}),js=class{constructor(e,t,r,i){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=i,this.encoder=new Gs(e,t,r),this.decoder=new zs(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Gn=({name:e,prefix:t,encode:r,decode:i})=>new js(e,t,r,i),zn=({prefix:e,name:t,alphabet:r})=>{let{encode:i,decode:c}=Fs(r,t);return Gn({prefix:e,name:t,encode:i,decode:p=>Ji(c(p))})},Vs=(e,t,r,i)=>{let c={};for(let w=0;w<t.length;++w)c[t[w]]=w;let p=e.length;for(;e[p-1]==="=";)--p;let I=new Uint8Array(p*r/8|0),f=0,v=0,D=0;for(let w=0;w<p;++w){let B=c[e[w]];if(B===void 0)throw new SyntaxError(`Non-${i} character`);v=v<<r|B,f+=r,f>=8&&(f-=8,I[D++]=255&v>>f)}if(f>=r||255&v<<8-f)throw new SyntaxError("Unexpected end of data");return I},Hs=(e,t,r)=>{let i=t[t.length-1]==="=",c=(1<<r)-1,p="",I=0,f=0;for(let v=0;v<e.length;++v)for(f=f<<8|e[v],I+=8;I>r;)I-=r,p+=t[c&f>>I];if(I&&(p+=t[c&f<<r-I]),i)for(;p.length*r&7;)p+="=";return p},ct=({name:e,prefix:t,bitsPerChar:r,alphabet:i})=>Gn({prefix:t,name:e,encode(c){return Hs(c,i,r)},decode(c){return Vs(c,i,r,e)}}),pt=zn({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Wa=zn({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),ni=ct({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),qa=ct({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Ka=ct({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Ja=ct({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Ya=ct({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Xa=ct({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Qa=ct({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Za=ct({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),ef=ct({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Ne=class{constructor(e,t,r,i){this.code=t,this.version=e,this.multihash=r,this.bytes=i,this.byteOffset=i.byteOffset,this.byteLength=i.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:ii,byteLength:ii,code:ti,version:ti,multihash:ti,bytes:ti,_baseCache:ii,asCID:ii})}toV0(){switch(this.version){case 0:return this;default:{let{code:e,multihash:t}=this;if(e!==zt)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==Js)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Ne.createV0(t)}}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,r=Ds(e,t);return Ne.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&Us(this.multihash,e.multihash)}toString(e){let{bytes:t,version:r,_baseCache:i}=this;switch(r){case 0:return qs(t,i,e||pt.encoder);default:return Ks(t,i,e||ni.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return Xs(/^0\.0/,Qs),!!(e&&(e[xn]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof Ne)return e;if(e!=null&&e.asCID===e){let{version:t,code:r,multihash:i,bytes:c}=e;return new Ne(t,r,i,c||On(t,r,i.bytes))}else if(e!=null&&e[xn]===!0){let{version:t,multihash:r,code:i}=e,c=Ls(r);return Ne.create(t,i,c)}else return null}static create(e,t,r){if(typeof t!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(t!==zt)throw new Error(`Version 0 CID must use dag-pb (code: ${zt}) block encoding`);return new Ne(e,t,r,r.bytes)}case 1:{let i=On(e,t,r.bytes);return new Ne(e,t,r,i)}default:throw new Error("Invalid version")}}static createV0(e){return Ne.create(0,zt,e)}static createV1(e,t){return Ne.create(1,e,t)}static decode(e){let[t,r]=Ne.decodeFirst(e);if(r.length)throw new Error("Incorrect length");return t}static decodeFirst(e){let t=Ne.inspectBytes(e),r=t.size-t.multihashSize,i=Ji(e.subarray(r,r+t.multihashSize));if(i.byteLength!==t.multihashSize)throw new Error("Incorrect length");let c=i.subarray(t.multihashSize-t.digestSize),p=new Yi(t.multihashCode,t.digestSize,c,i);return[t.version===0?Ne.createV0(p):Ne.createV1(t.codec,p),e.subarray(t.size)]}static inspectBytes(e){let t=0,r=()=>{let[w,B]=Mi(e.subarray(t));return t+=B,w},i=r(),c=zt;if(i===18?(i=0,t=0):i===1&&(c=r()),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let p=t,I=r(),f=r(),v=t+f,D=v-p;return{version:i,codec:c,multihashCode:I,digestSize:f,multihashSize:D,size:v}}static parse(e,t){let[r,i]=Ws(e,t),c=Ne.decode(i);return c._baseCache.set(r,e),c}},Ws=(e,t)=>{switch(e[0]){case"Q":{let r=t||pt;return[pt.prefix,r.decode(`${pt.prefix}${e}`)]}case pt.prefix:{let r=t||pt;return[pt.prefix,r.decode(e)]}case ni.prefix:{let r=t||ni;return[ni.prefix,r.decode(e)]}default:{if(t==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}}},qs=(e,t,r)=>{let{prefix:i}=r;if(i!==pt.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let c=t.get(i);if(c==null){let p=r.encode(e).slice(1);return t.set(i,p),p}else return c},Ks=(e,t,r)=>{let{prefix:i}=r,c=t.get(i);if(c==null){let p=r.encode(e);return t.set(i,p),p}else return c},zt=112,Js=18,On=(e,t,r)=>{let i=fi(e),c=i+fi(t),p=new Uint8Array(c+r.byteLength);return ai(e,p,0),ai(t,p,i),p.set(r,c),p},xn=Symbol.for("@ipld/js-cid/CID"),ti={writable:!1,configurable:!1,enumerable:!0},ii={writable:!1,enumerable:!1,configurable:!1},Ys="0.0.0-dev",Xs=(e,t)=>{if(e.test(Ys))console.warn(t);else throw new Error(t)},Qs=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`,Zs=42;function ea(e){if(e[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return Ne.decode(e.subarray(1))}var $n={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};$n.tags[Zs]=ea;var ta=e=>ds(e,$n),ia=Nn(Fr(),1),na="Earth";function ra(e){return{country_name:e[0],country_code:e[1],region_code:e[2],city:e[3],postal_code:e[4],latitude:e[5],longitude:e[6],planet:na}}var oa=Ne.parse("bafyreihnpl7ami7esahkfdnemm6idx4r2n6u3apmtcrxlqwuapgjsciihy"),sa=["https://ipfs.io","https://dweb.link"];async function aa(e,t){if(typeof e=="function")return e(t);if(typeof e?.block?.get=="function")return e.block.get(t);let r=Array.isArray(e)?e:[e];for(let i of r){let c=new URL(i);c.pathname=`/ipfs/${t.toString()}`,c.search="?format=raw";try{let p=await(0,ia.default)(c,{headers:{Accept:"application/vnd.ipld.raw"},cache:"force-cache"});if(!p.ok)throw p;return new Uint8Array(await p.arrayBuffer())}catch(p){throw new Error(`unable to fetch raw block for CID ${t}`,{cause:p})}}}async function jn(e,t,r=1){try{let i=await aa(e,t);return{obj:await ta(i),block:i}}catch(i){if(r<3)return await jn(e,t,r+1);throw i}}async function fa(e,t,r){let i,c;try{({obj:i,block:c}=await jn(e,t))}catch(I){throw(process?.env?.DEBUG||process?.env?.TEST)&&console.error(c?`[ipfs-geoip] failed to parse DAG-CBOR behind CID '${t}'`:`[ipfs-geoip] failed to get raw block for CID '${t}'`,I),I}let p=0;if("data"in i){if("data"in i){for(;i.data[p]&&i.data[p].min<=r;)p++;let I=i.data[p-1];if(!I)throw new Error("Failed to lookup leaf node");if(!I.data)throw new Error("Unmapped range");return ra(I.data)}}else{for(;i.mins[p]&&i.mins[p]<=r;)p++;let I=i.links[p-1];if(!I)throw new Error("Failed to lookup node");let f=ca(I);if(!f)throw new Error("Failed to lookup node");return Vn(e,f,r)}}var Vn=Jr(fa,{cachePromiseRejection:!1,cacheKey:e=>{let[,t,r]=e;return`${t}.${r}`}});function Hn(e=sa,t){return Vn(e,oa,Yr.default.toLong(t))}function ca(e){return e?Ne.asCID(e):null}var It=class{constructor({tokensPerInterval:t,interval:r,stopped:i}){if(this.tokensPerInterval=t,this._isStopped=i,typeof r=="string")switch(r){case"sec":case"second":{this.interval=1e3;break}case"min":case"minute":{this.interval=1e3*60;break}case"hr":case"hour":{this.interval=1e3*60*60;break}case"day":{this.interval=1e3*60*60*24;break}default:throw new Error("Invalid interval "+r)}else this.interval=r;this.tokensRemovedAt=[],this.awaitingRestart=new Set}dripTokens(){throw new Error("dripTokens() not implemented")}getDelayForTokens(){throw new Error("getDelayForTokens() not implemented")}getTokens(){return this.dripTokens(),Math.floor(this.tokens)}tryRemoveTokens(t){return this.dripTokens(),t>this.tokens?!1:(this.tokens-=t,this.tokensRemovedAt.push([Date.now(),t]),!0)}async awaitTokens(t=1){this._isStopped&&await new Promise(i=>this.awaitingRestart.add(i));let r=this.getDelayForTokens(t);return r===0?Math.floor(this.tokens):(await new Promise(i=>setTimeout(()=>i(),r)),this.awaitTokens(t))}reset(){this.awaitingRestart.forEach(t=>t())}stop(t=!0){this._isStopped=!0,t&&this.tryRemoveTokens(this.getTokens())}start(){this._isStopped=!1}get isStopped(){return this._isStopped}};var Ut=class extends It{constructor({bucketSize:t,tokensPerInterval:r,interval:i,stopped:c=!1}){super({tokensPerInterval:r,interval:i,stopped:c}),this.bucketSize=t,this.tokens=c?0:this.bucketSize,this.tokensRemovedAt=c?[0]:[Date.now()]}dripTokens(){if(this._isStopped)return;let t=Date.now(),r=this.tokensRemovedAt[0],i=Math.max(t-r,0);this.tokensRemovedAt=[t];let c=i*(this.tokensPerInterval/this.interval);return this.tokens=Math.min(this.tokens+c,this.bucketSize),Math.floor(this.tokens)}getDelayForTokens(t=1){if(t>this.bucketSize)throw new Error(`Cannot supply ${t} tokens at once (max is bucketSize = ${this.bucketSize}`);this.dripTokens();let r=t-this.tokens;if(r<=0)return 0;if(!this._isStopped)return Math.ceil(r*(this.interval/this.tokensPerInterval))}reset(){this._isStopped=!1,this.tokens=this.bucketSize,this.tokensRemovedAt=[Date.now()],super.reset()}};var At=new Re("Flag"),rt=class extends We{constructor(r,i){super(r,"div","Flag");this.parent=r;this.hostname=i}async check(){let r=!0;try{let i=localStorage.getItem(this.hostname);if(i!=null){let c=JSON.parse(i),p=Date.now(),I=c.time,f=p-I,v=7*24*60*60*1e3;f<v&&(r=!1,this.onResponse(c))}}catch(i){throw At.error(`error while getting savedSTR for ${this.hostname}`,i),this.onError(),i}if(r){this.startLimiters();let i=await this.waitForAvailableEndpoint();await this.dnsRequest(i)}}startLimiters(){rt.googleLimiter.isStopped===!0&&rt.googleLimiter.start(),rt.cloudFlareLimiter.isStopped===!0&&rt.cloudFlareLimiter.start()}async waitForAvailableEndpoint(){let r=await Promise.race([rt.googleLimiter.awaitTokens(1).then(()=>rt.googleLimiter.tryRemoveTokens(1)).then(i=>{if(i)return`https://dns.google/resolve?name=${this.hostname}&type=A`}),rt.cloudFlareLimiter.awaitTokens(1).then(()=>rt.cloudFlareLimiter.tryRemoveTokens(1)).then(i=>{if(i)return`https://cloudflare-dns.com/dns-query?name=${this.hostname}&type=A`})]);return r??(At.info("we awaited tokens, but could not retrieve any.. restarting dnsRequest"),await this.waitForAvailableEndpoint())}async dnsRequest(r){try{let c=await(await fetch(r,{method:"GET",headers:{Accept:"application/dns-json"}})).json();await this.handleDnsQueryResponse(c)}catch(i){At.error("problem submitting DNS request",r,i),this.onError()}}async handleDnsQueryResponse(r){if(r.Answer==null)return At.error('Response does not contain the "Answer" property:',r),this.onError();let i=null;for(let c=0;c<r.Answer.length&&i==null;c++){let p=r.Answer[c];p.type===1&&(i=p.data)}if(i!=null)try{let c=await Hn(bn,i);if(c?.country_code!=null){this.onResponse(c),c.time=Date.now();let p=JSON.stringify(c);localStorage.setItem(this.hostname,p)}else At.error("geoipResponse.country_code is null")}catch(c){At.error(`error while getting DNS A record for ${this.hostname}`,c),this.onError()}else At.error("IP is still null",r)}onError(){this.tag.empty()}onResponse(r){this.tag.style.setProperty("background-image",`url('https://ipfs.io/ipfs/QmaYjj5BHGAWfopTdE8ESzypbuthsZqTeqz9rEuh3EJZi6/${r.country_code.toLowerCase()}.svg')`),this.tag.title=r.country_name,this.tag.empty()}},Ct=rt;Ct.googleLimiter=new Ut({bucketSize:1,tokensPerInterval:1,interval:1e3*2,stopped:!0}),Ct.cloudFlareLimiter=new Ut({bucketSize:1,tokensPerInterval:1,interval:1e3*2,stopped:!0});var hi=new Re("expectSubdomainRedirect");async function Wn(e){let{redirected:t,url:r}=await fetch(e.toString());hi.debug("redirected: ",t),hi.debug("responseUrl: ",r),t&&hi.debug("definitely redirected");let{hostname:i}=new Qe(r);if(!i.startsWith(ht)){let c=`Expected ${e.toString()} to redirect to subdomain '${ht}' but instead received '${r}'`;throw hi.debug(c),new Error(c)}}async function di(e){return await new Promise((r,i)=>{let c=new Image,p=setTimeout(()=>{i(new Error(`Timeout when attempting to load img from '${c.src}`))},15e3),I=(f,v,D,w,B)=>{clearTimeout(p),B==null?i(new Error(`Unknown Error when attempting to load img from '${c.src}`)):i(B)};c.onerror=I,c.onload=()=>{clearTimeout(p),r()},c.src=e.toString()})}var la=new Re("Origin"),pi=class{constructor(t){this.parent=t;this.tag=new Ze("div","Origin")}async check(){let t=new Qe(this.parent.gateway),r=new Qe(`${t.protocol}//${ht}.ipfs.${t.hostname}/?now=${Date.now()}&filename=1x1.png#x-ipfs-companion-no-redirect`),i=new Qe(`${t.protocol}//${t.hostname}/ipfs/${ht}?now=${Date.now()}&filename=1x1.png#x-ipfs-companion-no-redirect`);await di(r).then(async()=>await Wn(i)).then(()=>{this.tag.win(r.toString()),this.parent.tag.classList.add("origin")}).catch(c=>this.onerror(c))}onerror(t){throw la.error(t),this.tag.err(),t}};var qn=Qt(Zt());var{fetch:ua}=(0,qn.default)(),Xi=new Re("Trustless"),gi=class extends ut{constructor(r){super(r,"div","Trustless");this.parent=r;this._className="Trustless";this._tagName="div"}async check(){let r=Date.now(),i=this.parent.gateway.replace(":hash",ft);this.parent.tag.classList.add("trustless");try{let c=await Promise.all(Di.map(async I=>{let f=`${i}?format=${I}&now=${r}#x-ipfs-companion-no-redirect`,v=await ua(f);return Boolean(v.headers.get("Content-Type")?.includes(`application/vnd.ipld.${I}`))})),p=Di.filter((I,f)=>!c[f]);if(p.length===0)this.tag.win();else{let I=`URL '${i} does not support the following Trustless response types: [${p.join(", ")}]`;throw Xi.debug(I),new Error(I)}}catch(c){throw Xi.error(c),this.onerror(),c}}checked(){Xi.warn("Not implemented yet")}onerror(){this.tag.err()}};var ha=new Re("Status"),mi=class extends We{constructor(r){super(r,"div","Status");this.parent=r;this._up=!1;this._down=!1}async check(){let r=new Qe(this.parent.gateway),i=new Qe(`${r.protocol}//${r.hostname}/ipfs/${ht}?now=${Date.now()}&filename=1x1.png#x-ipfs-companion-no-redirect`);await di(i).catch(c=>{throw c!=null&&ha.error(this.parent.gateway,c),c})}get down(){return this._down}set down(r){!this.up&&!this.down&&(this._down=!0,this.tag.lose())}get up(){return this._up}set up(r){!this.up&&!this.down&&(this._up=!0,this.tag.global(),this.parent.tag.classList.add("online"))}onerror(){throw new Error("Not implemented")}};function Qi(e){let t=e.toString();return e?.hostname!=null&&(t=e.hostname.toString()),t.replace(`${ft}.ipfs.`,"").replace(`${ft}.`,"")}var Kn=Qt(Zt());var{fetch:da}=(0,Kn.default)(),Zi=new Re("Ipns"),yi=class extends ut{constructor(r){super(r,"div","Ipns");this.parent=r;this._className="Ipns";this._tagName="div"}async check(){let r=Date.now(),i=new URL(this.parent.gateway);i.pathname=vn;let c=`${i.href}?now=${r}#x-ipfs-companion-no-redirect`;try{if((await da(c)).status===200)this.tag.win();else throw Zi.debug(`${this.parent.gateway} does not support IPNS`),new Error(`URL '${c} is not reachable`)}catch(p){throw Zi.error(p),this.onerror(),p}}checked(){Zi.warn("Not implemented yet")}onerror(){this.tag.err()}};var Ge=new Re("GatewayNode"),wi=class extends We{constructor(r,i,c){super(r,"div","Node");this.parent=r;this.atLeastOneSuccess=!1;this.tag.empty(),this.tag.style.order=Date.now().toString(),this.status=new mi(this),this.tag.append(this.status.tag),this.cors=new ei(this),this.tag.append(this.cors.tag),this.ipns=new yi(this),this.tag.append(this.ipns.tag),this.origin=new pi(this),this.tag.append(this.origin.tag),this.trustless=new gi(this),this.tag.append(this.trustless.tag),this.link=document.createElement("div");let p=i.replace(":hash",ft);this.link.url=new Qe(p),this.link.textContent=Qi(this.link.url),this.link.className="Link",this.flag=new Ct(this,this.link.textContent),this.tag.append(this.flag.tag),this.tag.append(this.link),this.took=document.createElement("div"),this.took.className="Took",this.tag.append(this.took),this.gateway=i,this.index=c,this.checkingTime=0}async check(){this.checkingTime=Date.now(),this.flag.check().then(()=>Ge.debug(this.gateway,"Flag success"));let r=[this.status.check().then(()=>Ge.debug(this.gateway,"Status success")).then(this.onSuccessfulCheck.bind(this)),this.cors.check().then(()=>Ge.debug(this.gateway,"CORS success")).then(this.onSuccessfulCheck.bind(this)),this.ipns.check().then(()=>Ge.debug(this.gateway,"IPNS success")).then(this.onSuccessfulCheck.bind(this)),this.origin.check().then(()=>Ge.debug(this.gateway,"Origin success")).then(this.onSuccessfulCheck.bind(this)),this.trustless.check().then(()=>Ge.debug(this.gateway,"Trustless success")).then(this.onSuccessfulCheck.bind(this))];await Promise.allSettled(r).then(i=>i.map(c=>c.status)).then(i=>{i.includes("fulfilled")?(Ge.debug(`For gateway '${this.gateway}', at least one promise was successfully fulfilled`),Ge.debug(this.gateway,"this.status.up: ",this.status.up),Ge.debug(this.gateway,"this.status.down: ",this.status.down),this.status.up=!0,Ge.debug(this.gateway,"this.status.up: ",this.status.up),Ge.debug(this.gateway,"this.status.down: ",this.status.down)):(this.status.down=!0,Ge.debug(`For gateway '${this.gateway}', all promises were rejected`))})}onSuccessfulCheck(){if(!this.atLeastOneSuccess){Ge.info(`For gateway '${this.gateway}', at least one check was successful`),this.atLeastOneSuccess=!0,this.status.up=!0;let r=this.link.url;if(r!=null){let p=Qi(r);this.link.innerHTML=`<a title="${p}" href="${r.toString()}#x-ipfs-companion-no-redirect" target="_blank">${p}</a>`}let i=Date.now()-this.checkingTime;this.tag.style.order=i.toString();let c=(i/1e3).toFixed(2);this.took.textContent=`${c}s`}}onerror(){this.tag.err()}};var _i=class{constructor(t){this.parent=t;let r=document.getElementById("checker.results");if(r==null)throw new Error('Element with Id "checker.results" not found.');this.element=r}append(t){this.element.append(t.element)}};var vi=class extends We{constructor(r){super(r);this.parent=r;let i=document.getElementById("checker.stats");if(i==null)throw new Error('Could not find element with Id "checker.stats"');this.tag=Ze.fromElement(i),this.gateways=document.createElement("div"),this.gateways.textContent="0/0 tested",this.gateways.className="Gateways",this.tag.append(this.gateways),this.totals=document.createElement("div"),this.totals.textContent="0 online",this.totals.className="Totals",this.tag.append(this.totals)}update(){let r=0,i=0;for(let c of this.parent.nodes)c.status.up?r+=1:c.status.down&&(i+=1);this.gateways.textContent=`${r+i}/${this.parent.nodes.length} tested`,this.totals.textContent=`${r} online`}};var pa=new Re("Checker"),bi=class{constructor(){this.nodes=[];let t=document.getElementById("checker");if(t==null)throw new Error('Element with Id "checker" not found.');this.element=t,this.stats=new vi(this),this.results=new _i(this),this.updateStats=this.updateStats.bind(this)}updateStats(){this.stats.update()}async checkGateways(t){let r=[];for(let i of t){let c=new wi(this.results,i,this.nodes.length);this.nodes.push(c),this.results.append(c.tag),setTimeout(()=>{r.push(c.check().catch(p=>pa.error(p)).finally(this.updateStats))},100*this.nodes.length)}}};var Jn=["https://ipfs.io/ipfs/:hash","https://dweb.link/ipfs/:hash","https://gateway.ipfs.io/ipfs/:hash","https://ninetailed.ninja/ipfs/:hash","https://via0.com/ipfs/:hash","https://ipfs.eternum.io/ipfs/:hash","https://hardbin.com/ipfs/:hash","https://cloudflare-ipfs.com/ipfs/:hash","https://astyanax.io/ipfs/:hash","https://cf-ipfs.com/ipfs/:hash","https://ipns.co/ipfs/:hash","https://gateway.originprotocol.com/ipfs/:hash","https://gateway.pinata.cloud/ipfs/:hash","https://ipfs.sloppyta.co/ipfs/:hash","https://ipfs.busy.org/ipfs/:hash","https://ipfs.greyh.at/ipfs/:hash","https://gateway.serph.network/ipfs/:hash","https://jorropo.net/ipfs/:hash","https://ipfs.fooock.com/ipfs/:hash","https://cdn.cwinfo.net/ipfs/:hash","https://aragon.ventures/ipfs/:hash","https://permaweb.io/ipfs/:hash","https://ipfs.best-practice.se/ipfs/:hash","https://storjipfs-gateway.com/ipfs/:hash","https://ipfs.runfission.com/ipfs/:hash","https://ipfs.trusti.id/ipfs/:hash","https://ipfs.overpi.com/ipfs/:hash","https://ipfs.ink/ipfs/:hash","https://ipfsgateway.makersplace.com/ipfs/:hash","https://ipfs.funnychain.co/ipfs/:hash","https://ipfs.telos.miami/ipfs/:hash","https://ipfs.mttk.net/ipfs/:hash","https://ipfs.fleek.co/ipfs/:hash","https://ipfs.jbb.one/ipfs/:hash","https://ipfs.yt/ipfs/:hash","https://hashnews.k1ic.com/ipfs/:hash","https://ipfs.drink.cafe/ipfs/:hash","https://ipfs.kavin.rocks/ipfs/:hash","https://ipfs.denarius.io/ipfs/:hash","https://crustwebsites.net/ipfs/:hash","https://ipfs0.sjc.cloudsigma.com/ipfs/:hash","http://ipfs.genenetwork.org/ipfs/:hash","https://ipfs.eth.aragon.network/ipfs/:hash","https://ipfs.smartholdem.io/ipfs/:hash","https://ipfs.xoqq.ch/ipfs/:hash","http://natoboram.mynetgear.com:8080/ipfs/:hash","https://video.oneloveipfs.com/ipfs/:hash","http://ipfs.anonymize.com/ipfs/:hash","https://ipfs.scalaproject.io/ipfs/:hash","https://search.ipfsgate.com/ipfs/:hash","https://ipfs.decoo.io/ipfs/:hash","https://alexdav.id/ipfs/:hash","https://ipfs.uploads.nu/ipfs/:hash","https://hub.textile.io/ipfs/:hash","https://ipfs1.pixura.io/ipfs/:hash","https://ravencoinipfs-gateway.com/ipfs/:hash","https://konubinix.eu/ipfs/:hash","https://ipfs.tubby.cloud/ipfs/:hash","https://ipfs.lain.la/ipfs/:hash","https://ipfs.kaleido.art/ipfs/:hash","https://ipfs.slang.cx/ipfs/:hash","https://ipfs.arching-kaos.com/ipfs/:hash","https://storry.tv/ipfs/:hash","https://ipfs.1-2.dev/ipfs/:hash","https://dweb.eu.org/ipfs/:hash","https://permaweb.eu.org/ipfs/:hash","https://ipfs.namebase.io/ipfs/:hash","https://ipfs.tribecap.co/ipfs/:hash","https://ipfs.kinematiks.com/ipfs/:hash","https://c4rex.co/ipfs/:hash","https://nftstorage.link/ipfs/:hash","https://gravity.jup.io/ipfs/:hash","http://fzdqwfb5ml56oadins5jpuhe6ki6bk33umri35p5kt2tue4fpws5efid.onion/ipfs/:hash","https://tth-ipfs.com/ipfs/:hash","https://ipfs.chisdealhd.co.uk/ipfs/:hash","https://ipfs.alloyxuast.tk/ipfs/:hash","https://4everland.io/ipfs/:hash","https://ipfs-gateway.cloud/ipfs/:hash","https://w3s.link/ipfs/:hash","https://cthd.icu/ipfs/:hash","https://ipfs.tayfundogdas.me/ipfs/:hash","https://ipfs.jpu.jp/ipfs/:hash","https://ipfs.soul-network.com/ipfs/:hash"];var ze=Qt(Xn()),Qn=localStorage.getItem("metrics_consent"),tn=document.querySelector(".js-metrics-notification-modal"),nn=document.querySelector(".js-metrics-agreement"),ir=document.querySelector(".js-metrics-preferences"),ma=document.querySelector(".js-modal-close"),Zn=document.querySelector(".js-metrics-notification-confirm"),er=document.querySelector(".js-metrics-notification-preferences-save"),tr=document.querySelector(".js-metrics-notification-manage"),en=document.querySelector(".js-necessary-toggle"),ya=document.querySelector(".js-metrics-modal-toggle");function ki(e){ze.default.add_consent(e),Array.isArray(e)?localStorage.setItem("metrics_consent",JSON.stringify(e)):localStorage.setItem("metrics_consent",JSON.stringify([e]))}function wa(){tn?.classList.add("hidden"),ki(["minimal"])}function _a(){en.checked?ki(["minimal"]):(ze.default.remove_consent(["minimal"]),localStorage.setItem("metrics_consent",JSON.stringify([])))}function va(){tn?.classList.remove("hidden"),Zn?.classList.remove("hidden"),tr?.classList.remove("hidden"),nn?.classList.remove("hidden"),ma?.addEventListener("click",nr),Zn?.addEventListener("click",wa),tr?.addEventListener("click",ba)}function nr(){tn?.classList.add("hidden"),ir?.classList.add("hidden"),nn?.classList.remove("hidden")}function ba(){let e=localStorage.getItem("metrics_consent");e!=null&&(en.checked=JSON.parse(e)[0]==="minimal"),nn?.classList.add("hidden"),er?.classList.remove("hidden"),ir?.classList.remove("hidden"),en.addEventListener("click",_a),er?.addEventListener("click",nr)}function Ea(){va()}function rr(){ya?.addEventListener("click",Ea),ze.default.init({app_key:"3c2c0819434074fc4d339ddd8e112a1e741ecb72",url:"https://countly.ipfs.io",require_consent:!0});let e=["sessions","views","events"],t=["crashes","apm"],r=["scrolls","clicks","forms"],i=["star-rating","feedback"],c=["location"];ze.default.group_features({all:[...e,...t,...r,...i,...c],minimal:e,performance:t,ux:r,feedback:i,location:c}),ze.default.track_clicks(),ze.default.track_errors(),ze.default.track_forms(),ze.default.track_links(),ze.default.track_pageview(),ze.default.track_scrolls(),ze.default.track_sessions(),ze.default.track_view(),Qn!=null?ki(JSON.parse(Qn)):ki(["minimal"])}try{self["workbox:window:6.5.3"]&&_()}catch{}function or(e,t){return new Promise(function(r){var i=new MessageChannel;i.port1.onmessage=function(c){r(c.data)},e.postMessage(t,[i.port2])})}function sr(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ar(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function ka(e,t){var r;if(typeof Symbol>"u"||e[Symbol.iterator]==null){if(Array.isArray(e)||(r=function(c,p){if(c){if(typeof c=="string")return ar(c,p);var I=Object.prototype.toString.call(c).slice(8,-1);return I==="Object"&&c.constructor&&(I=c.constructor.name),I==="Map"||I==="Set"?Array.from(c):I==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I)?ar(c,p):void 0}}(e))||t&&e&&typeof e.length=="number"){r&&(e=r);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return(r=e[Symbol.iterator]()).next.bind(r)}try{self["workbox:core:6.5.3"]&&_()}catch{}var rn=function(){var e=this;this.promise=new Promise(function(t,r){e.resolve=t,e.reject=r})};function on(e,t){var r=location.href;return new URL(e,r).href===new URL(t,r).href}var qt=function(e,t){this.type=e,Object.assign(this,t)};function Si(e,t,r){return r?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function Sa(){}var Ra={type:"SKIP_WAITING"};function fr(e,t){if(!t)return e&&e.then?e.then(Sa):Promise.resolve()}var cr=function(e){var t,r;function i(v,D){var w,B;return D===void 0&&(D={}),(w=e.call(this)||this).nn={},w.tn=0,w.rn=new rn,w.en=new rn,w.on=new rn,w.un=0,w.an=new Set,w.cn=function(){var T=w.fn,M=T.installing;w.tn>0||!on(M.scriptURL,w.sn.toString())||performance.now()>w.un+6e4?(w.vn=M,T.removeEventListener("updatefound",w.cn)):(w.hn=M,w.an.add(M),w.rn.resolve(M)),++w.tn,M.addEventListener("statechange",w.ln)},w.ln=function(T){var M=w.fn,S=T.target,b=S.state,F=S===w.vn,K={sw:S,isExternal:F,originalEvent:T};!F&&w.mn&&(K.isUpdate=!0),w.dispatchEvent(new qt(b,K)),b==="installed"?w.wn=self.setTimeout(function(){b==="installed"&&M.waiting===S&&w.dispatchEvent(new qt("waiting",K))},200):b==="activating"&&(clearTimeout(w.wn),F||w.en.resolve(S))},w.dn=function(T){var M=w.hn,S=M!==navigator.serviceWorker.controller;w.dispatchEvent(new qt("controlling",{isExternal:S,originalEvent:T,sw:M,isUpdate:w.mn})),S||w.on.resolve(M)},w.gn=(B=function(T){var M=T.data,S=T.ports,b=T.source;return Si(w.getSW(),function(){w.an.has(b)&&w.dispatchEvent(new qt("message",{data:M,originalEvent:T,ports:S,sw:b}))})},function(){for(var T=[],M=0;M<arguments.length;M++)T[M]=arguments[M];try{return Promise.resolve(B.apply(this,T))}catch(S){return Promise.reject(S)}}),w.sn=v,w.nn=D,navigator.serviceWorker.addEventListener("message",w.gn),w}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var c,p,I,f=i.prototype;return f.register=function(v){var D=(v===void 0?{}:v).immediate,w=D!==void 0&&D;try{var B=this;return function(T,M){var S=T();return S&&S.then?S.then(M):M(S)}(function(){if(!w&&document.readyState!=="complete")return fr(new Promise(function(T){return window.addEventListener("load",T)}))},function(){return B.mn=Boolean(navigator.serviceWorker.controller),B.yn=B.pn(),Si(B.bn(),function(T){B.fn=T,B.yn&&(B.hn=B.yn,B.en.resolve(B.yn),B.on.resolve(B.yn),B.yn.addEventListener("statechange",B.ln,{once:!0}));var M=B.fn.waiting;return M&&on(M.scriptURL,B.sn.toString())&&(B.hn=M,Promise.resolve().then(function(){B.dispatchEvent(new qt("waiting",{sw:M,wasWaitingBeforeRegister:!0}))}).then(function(){})),B.hn&&(B.rn.resolve(B.hn),B.an.add(B.hn)),B.fn.addEventListener("updatefound",B.cn),navigator.serviceWorker.addEventListener("controllerchange",B.dn),B.fn})})}catch(T){return Promise.reject(T)}},f.update=function(){try{return this.fn?fr(this.fn.update()):void 0}catch(v){return Promise.reject(v)}},f.getSW=function(){return this.hn!==void 0?Promise.resolve(this.hn):this.rn.promise},f.messageSW=function(v){try{return Si(this.getSW(),function(D){return or(D,v)})}catch(D){return Promise.reject(D)}},f.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&or(this.fn.waiting,Ra)},f.pn=function(){var v=navigator.serviceWorker.controller;return v&&on(v.scriptURL,this.sn.toString())?v:void 0},f.bn=function(){try{var v=this;return function(D,w){try{var B=D()}catch(T){return w(T)}return B&&B.then?B.then(void 0,w):B}(function(){return Si(navigator.serviceWorker.register(v.sn,v.nn),function(D){return v.un=performance.now(),D})},function(D){throw D})}catch(D){return Promise.reject(D)}},c=i,(p=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])&&sr(c.prototype,p),I&&sr(c,I),i}(function(){function e(){this.Pn=new Map}var t=e.prototype;return t.addEventListener=function(r,i){this.Sn(r).add(i)},t.removeEventListener=function(r,i){this.Sn(r).delete(i)},t.dispatchEvent=function(r){r.target=this;for(var i,c=ka(this.Sn(r.type));!(i=c()).done;)(0,i.value)(r)},t.Sn=function(r){return this.Pn.has(r)||this.Pn.set(r,new Set),this.Pn.get(r)},e}());var Ia=new cr("/sw.js");Ia.register();rr();var lr=new Re("App index");window.checker=new bi;window.checker.checkGateways(Jn).catch(e=>{lr.error("Unexpected error"),lr.error(e)});})();
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
return IpfsPublicGatewayChecker}));
